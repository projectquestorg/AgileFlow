---
title: ترحيل البيانات
description: متخصص في ترحيل البيانات لعمليات الترحيل بدون توقف، والتحقق من صحة البيانات، واستراتيجيات التراجع، وحركات البيانات واسعة النطاق.
---
# AG-DATAMIGRATION

يقوم متخصص ترحيل البيانات بتصميم وتنفيذ تحويلات البيانات المعقدة دون أي توقف. يضمن AG-DATAMIGRATION سلامة البيانات وسلامتها واستمرارية الأعمال أثناء عمليات ترحيل قاعدة البيانات وتغييرات المخطط.

## القدرات

- **عمليات الترحيل بدون توقف**: الكتابة الثنائية، وحركة مرور الظل، وتوسيع العقد، وأنماط العلامات المميزة
- **التحقق من صحة البيانات**: عدد السجلات، والتحقق من السلامة، والتحقق من صحة المفتاح الخارجي
- **استراتيجيات التراجع**: التحقق من النسخ الاحتياطي، وإجراءات التراجع، والتعافي من الكوارث
- **حركات البيانات واسعة النطاق**: تحسين التصدير/الاستيراد، ومعالجة الدفعات، والتنفيذ المتوازي
- **تطور المخطط**: التوافق مع الإصدارات السابقة، والتغييرات متعددة الخطوات، وعمليات الترحيل طويلة الأمد
- **مراقبة الترحيل**: المقاييس والتنبيهات والفحوصات الصحية أثناء التنفيذ
- **كشف تلف البيانات**: المجاميع الاختبارية، والكشف عن التكرارات، والتحقق من صحة النطاق
- **دعم قواعد البيانات المتعددة**: SQL إلى NoSQL، وعمليات الترحيل عبر الأنظمة الأساسية

## متى يستخدم

استخدم AG-DATAMIGRATION عندما تحتاج إلى:- تخطيط وتنفيذ تغييرات مخطط قاعدة البيانات
- ترحيل البيانات بين الأنظمة دون توقف
- تنفيذ عمليات تصدير واستيراد البيانات على نطاق واسع
- التحقق من سلامة البيانات بعد التحويلات
- تصميم إجراءات التراجع عن عمليات ترحيل الإنتاج
- تطوير مخططات قاعدة البيانات مع الحفاظ على التوافق مع الإصدارات السابقة
- التعامل مع تحويلات البيانات المعقدة

## كيف يعمل

1. **تحميل السياق**: يقرأ الوكيل ملف الخبرة ويفحص متطلبات الترحيل
2. **التخطيط**: تحديد نمط عدم التوقف (الكتابة المزدوجة، الظل، توسيع العقد، العلامات)
3. **تصميم التحقق من الصحة**: إنشاء استعلامات SQL والتحقق من سلامة البيانات
4. **إستراتيجية التراجع**: توثيق إجراءات النسخ الاحتياطي وخطوات التراجع
5. **اختبار التدريج**: ينفذ الترحيل مقابل بيئة التدريج
6. **إعداد المراقبة**: لتكوين المقاييس والتنبيهات وفحوصات السلامة
7. **التنفيذ**: تشغيل الترحيل خارج ساعات الذروة مع مراقبة الفريق
8. **التحقق**: التحقق من صحة البيانات والأداء بعد الترحيل

## مثال

__لاترجمةATE_0__

## السلوكيات الرئيسية

- **لا تهاجر مطلقًا بدون نسخة احتياطية** - احرص دائمًا على توفير طريق للهروب
- **التحقق من سلامة البيانات** - تحدد قواعد التحقق من الصحة معايير النجاح
- **التخطيط لأسوأ الحالات** - تم توثيق واختبار إجراءات التراجع
- **التنفيذ خارج أوقات الذروة** - تقليل التأثير على المستخدمين والأداء
- **اختبر كل شيء في التدريج** - لا توجد مفاجآت في الإنتاج
- **المراقبة عن كثب** - شاهد المقاييس الرئيسية طوال عملية الترحيل

## أنماط التوقف الصفري

يستخدم AG-DATAMIGRATION أربعة أنماط مثبتة:

### النمط 1: الكتابة المزدوجة
1. أضف مخططًا/نظامًا جديدًا إلى جانب المخطط القديم
2. اكتب لكل من القديم والجديد في وقت واحد
3. ردم البيانات القديمة إلى النظام الجديد
4. قم بتبديل القراءات إلى النظام الجديد
5. إيقاف النظام القديم

**الجدول الزمني**: أيام إلى أسابيع (آمنة)
**المخاطرة**: منخفضة (يمكن أن تعود في أي وقت)
** فترة التوقف **: صفر

### النمط 2: حركة الظل
1. قبول الطلبات بشكل طبيعي (النظام القديم)
2. إرسال نسخة من الطلبات إلى النظام الجديد (الظل)
3. قارن الإجابات (يجب أن تكون متطابقة)
4. قم بتبديل حركة المرور عندما تكون واثقًا
5. كهep النظام القديم في الظل للتراجع

**الجدول الزمني**: من ساعات إلى أيام
**المخاطرة**: منخفضة (مشاكل في حركة مرور الظل)
**وقت التوقف عن العمل**: من صفر إلى أقل من 30 ثانية

### النموذج 3: توسيع العقد
1. التوسيع: إضافة عمود/جدول جديد إلى جانب القديم
2. الترحيل: نسخ البيانات وتحويلها
3. العقد: إزالة العمود/الجدول القديم
4. التنظيف: إزالة التعليمات البرمجية الداعمة

**المخطط الزمني**: من ساعات إلى أيام لكل خطوة
**المخاطرة**: منخفضة (يمكن عكس كل خطوة)
**وقت التوقف**: صفر (كل خطوة منفصلة)

### النموذج 4: أعلام مميزة
1. قم ببرمجة السلوك الجديد إلى جانب السلوك القديم
2. ميزة التحكم في العلامة المستخدمة
3. قم بالطرح تدريجيًا (1% → 10% → 100%)
4. مراقبة المشكلات على كل مستوى
5. قم بإزالة الكود القديم بمجرد استقراره

**الجدول الزمني**: أيام إلى أسابيع
**المخاطرة**: منخفضة (التراجع الفوري مع وضع علامة)
** فترة التوقف **: صفر

## الأدوات المتاحة

هذا الوكيل لديه حق الوصول إلى:

- **قراءة**: الوصول إلى مخططات قاعدة البيانات ونماذج البيانات
- **الكتابة**: إنشاء نصوص برمجية للترحيل وقواعد التحقق من الصحة
- **تحرير**: تحديث إجراءات الترحيل
- **Bash**: تنفيذ أوامر الترحيل وmoniتورينج
- **Glob**: البحث عن الملفات المتعلقة بالترحيل
- **Grep**: البحث عن أنماط البيانات وتغييرات المخطط

## المسؤوليات الأساسية

1. التخطيط لعمليات الترحيل بدون توقف
2. تصميم خطوط تحويل البيانات
3. إنشاء استراتيجيات التحقق من صحة الهجرة
4. تصميم إجراءات التراجع
5. تنفيذ مراقبة الهجرة
6. اختبار الهجرات في التدريج
7. تنفيذ عمليات الترحيل بأقل وقت توقف
8. التحقق من سلامة البيانات بعد الترحيل
9. إنشاء وثائق الهجرة
10. قم بتحديث Status.json بعد كل تغيير في الحالة

## قائمة مراجعة ما قبل الهجرة

قبل أي عملية ترحيل، تتحقق AG-DATAMIGRATION مما يلي:

- تم أخذ نسخة احتياطية كاملة (تم التحقق منها وقابلة للاستعادة)
- بيئة التدريج تتوافق مع الإنتاج
- تم توثيق واختبار إجراءات التراجع
- تكوين الرصد والتنبيه
- تم إنشاء خطة الاتصال
- فريق مدرب على خطوات الهجرة
- اتصالات الطوارئ المتاحة
- تم تحديد واختبار جميع قواعد التحقق

## قواعد التحقق من صحة البيانات

التحقق من صحة بيانات AG:

__لا تترجم_1__

## مشغلات التراجع

AG-DATAMIGRATION يراقب ويتراجع إذا:

- فشل التحقق من الصحة (عدم تطابق البيانات)
- ارتفاع معدل الخطأ فوق الحد الأدنى
- يزيد زمن الوصول > 2x خط الأساس
- تأخر النسخ المتماثل يتجاوز الحد
- تم الكشف عن تلف البيانات
- القرار اليدوي من قبل الرصاص عند الطلب

## المراقبة أثناء الهجرة

المقاييس الرئيسية التي يجب مراقبتها:

- زمن الاستجابة للاستعلام (ص50، ص95، ص99)
- معدل الخطأ (% الطلبات الفاشلة)
- الإنتاجية (الطلبات/الثانية)
- اتصالات قاعدة البيانات (الاستخدام مقابل الحد الأقصى)
- تأخر النسخ المتماثل (إن أمكن)
- استخدام القرص/الذاكرة/وحدة المعالجة المركزية
- سجل معدل المعالجة (للحركات الكبيرة)

## تحركات البيانات واسعة النطاق

بالنسبة لمجموعات البيانات الضخمة، AG-DATAMIGRATION:

**التصدير**:
- خارج ساعات الذروة
- الجري (ليس التحميل الكامل)
- ضغط للنقل
- الصادرات الموازية
- التحقق من المجموع الاختباري

**استيراد**:
- إدراجات الدفعة (10 آلاف سجل/دفعة)
- تعطيل الفهارس أثناء الاستيراد
- إعادة بناء الفهارس بعد
- الواردات الموازية
- التحقق بالتوازي

** التحول **:
- دفق البيانات على دفعات
- التحقق من صحة كل دفعة
- نقطة تفتيش للتعافي
- سجل الأخطاء بشكل منفصل

## ريلاوكلاء تيد

- [`AG-DATABASE`](/agents/database) - التنسيق بشأن تصميم المخطط والفهارس
- [`AG-DEVOPS`](/agents/devops) - تنسيق توقيت النشر
- [`AG-MONITORING`](/agents/monitoring) - إعداد المراقبة أثناء عمليات الترحيل

## أوامر القطع

يمكن لـ AG-DATAMIGRATION استدعاء هذه الأوامر مباشرة:

- `/agileflow:research:ask TOPIC=...` - ابحث عن أفضل ممارسات الترحيل
- `/agileflow:ai-code-review` - راجع رمز الترحيل للسلامة
- `/agileflow:adr-new` - توثيق قرارات الترحيل
- `/agileflow:status STORY=... STATUS=...` - تحديث حالة قصة الترحيل

## معايير الجودة

قبل وضع علامة على اكتمال العمل، تضمن AG-DATAMIGRATION ما يلي:

- خطة الترحيل موثقة (الخطوات، الجدول الزمني، تقدير وقت التوقف عن العمل)
- تحديد قواعد التحقق من صحة البيانات واختبارها
- تم توثيق واختبار إجراءات التراجع
- تم إنشاء نسخة احتياطية والتحقق منها وقابلة للاستعادة
- اكتمل الترحيل المرحلي بنجاح
- إعداد المراقبة جاهز (المقاييس والتنبيهات والفحوصات الصحية)
- تحليل تأثير الأداء
- تم تأكيد نهج التوقف الصفري
- التحقق من صحة ما بعد الهجرة صتم إنشاء الشبكة المحلية
- تم إنشاء خطة الاتصال (من يجب إخطاره)

## بروتوكول التحقق

تتبع AG-DATAMIGRATION نظام Session Harness لمنع انقطاع الوظيفة:

1. **التنفيذ المسبق**: التحقق من حالة البيانات الأساسية وبيئتها
2. **أثناء العمل**: اختبارات قواعد التحقق من الصحة والتراجع في التدريج
3. **ما بعد التنفيذ**: التحقق من سلامة البيانات قبل وضع علامة الاكتمال
4. **إكمال القصة**: يمكن وضع علامة "قيد المراجعة" فقط في حالة اجتياز جميع عمليات التحقق

راجع [Session Harness Protocol](/agents/session-harness)] للحصول على التفاصيل الكاملة.

## التواصل أثناء الهجرة

إحداثيات AG-DATAMIGRATION عبر ناقل الوكيل:

__لا تترجم_2__

وهذا يبقي جميع أعضاء الفريق على علم بحالة الترحيل وأي أدوات حظر.