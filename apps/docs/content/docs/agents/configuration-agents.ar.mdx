---
title: وكلاء التكوين
description: وكلاء متخصصون لإعداد وتكوين ميزات AgileFlow
---
# وكلاء التكوين

وكلاء التكوين هم وكلاء متخصصون يساعدون في إعداد وتكوين ميزات AgileFlow المتنوعة. يتم استدعاؤها من خلال الأمر `/agileflow:configure`.

## نظرة عامة

عند تشغيل `/agileflow:configure`، تظهر لك قائمة بخيارات التكوين. يولد كل خيار وكيل تكوين مخصصًا يرشدك خلال عملية الإعداد.

__لا تترجم_0__

## وكلاء التكوين المتاحون

### نظام الخطافات

**الوكيل**: `configuration-hooks`

يقوم بتكوين نظام الخطافات الخاص بـ Claude Code للأتمتة المستندة إلى الأحداث.

** ما تكوينه: **
- خطاف SessionStart - عرض الترحيب وحالة المشروع
- ربط PreCompact - الحفاظ على السياق
- ربط الإيقاف - اختتام الجلسة، تحذير من التغييرات غير الملتزم بها
- خطاف UserPromptSubmit - تسجيل النشاط

**الملفات التي تم إنشاؤها:**
- `.claude/settings.json` - تكوين الخطافات
- `scripts/agileflow-welcome.js` - عرض الترحيب
- `scripts/precompact-context.sh` - الحفاظ على السياق
- `scripts/agileflow-stop.sh` - ملخص الجلسة
- `scripts/get-env.js` - مساعد متغير البيئة

---

### سياق ما قبل الضغط

**الوكيل**: `configuration-precompact`

تكوين ربط PreCompact للاحتفاظ بالسياق الهام عند ضغط المحادثات.

**ما يحفظ:**
- نسخة المشروع، فرع جيت، القصص النشطة
- قواعد الأمر النشط (على سبيل المثال، متطلبات AskUserQuestion الخاصة بمجالسة الأطفال)
- الاتفاقيات الرئيسية من CLAUDE.md
- التقدم الأخير من bus/log.jsonl

** دعم الأوامر المتعددة (الإصدار 2.40.0+):**
يمكن أن تكون أوامر متعددة نشطة في وقت واحد. يقرأ خطاف PreCompact كافة الأوامر النشطة من `session-state.json` ويحتفظ بقواعدها السلوكية.

---

### الأرشفة التلقائية

**الوكيل**: `configuration-archival`

يقوم بتكوين الأرشفة التلقائية للقصص القديمة المكتملة لإبقاء `status.json` صغيرًا.

**لماذا يهم:**
مع نمو المشاريع، يمكن أن يتجاوز `status.json` حد الرمز المميز الذي يبلغ 25 ألفًا لـ Claude Code، مما يتسبب في فشل الوكلاء. تعمل الأرشفة التلقائية على نقل القصص القديمة المكتملة إلى `status-archive.json`.

**خيارات التكوين:**
- 30 يومًا (مستحسن)
- 14 يومًا
- 7 أيام
- 3 أيام (عدوانية)

**تم إنشاء الملفات:**
- `docs/00-meta/agileflow-metadata.json` - تكوين العتبة
- `scripts/archive-completed-stories.sh` - نص أرشيفي
- إدخال الخطاف SessionStart - يقوم بتشغيل الأرشفة تلقائيًا

---

### إسناد جيت

**الوكيل**: `configuration-attribution`

تكوين ما إذا كان Claude Code يضيف إسناد الذكاء الاصطناعي إلى التزامات git.

**الخيارات:**
- **تعطيل الإسناد** - الالتزامات النظيفة، بدون تذييلات AI (الاستخدام المهني)
- **احتفظ بالإسناد** - قم بتضمين تذييل "تم إنشاؤه باستخدام Claude Code".

**ماذا يفعل:**
- إنشاء أو تحديث `CLAUDE.md` بسياسة الإسناد
- يضيف القسم الحرج الذي يتبعه كلود

---

### خط الحالة

**الوكيل**: `configuration-status-line`

تكوين شريط الحالة المخصص المعروض في Claude Code.

**ما يظهر:**
- فرع Git (مرمز بالألوان حسب النوع)
- معرف القصة الحالية والعنوان
- عدد WIP (أصفر إذا كان >1، أحمر إذا كان >3)
- نسبة الإنجاز

**مثال للإخراج:**
__لا تترجم_1__

---

### خط أنابيب CI

**الوكيل**: `configuration-ci`

يقوم بتكوين سير عمل CI/CD للاختبار الآلي وفحوصات الجودة.

**ما يخلق:**
-ملف سير عمل إجراءات GitHub
- أوامر الاختبار
- تكوين البطانة
- عتبات التغطية

---

### تكوين جيت

**الوكيل**: `configuration-git-config`

تكوين تهيئة مستودع git والإعداد عن بعد.

**ماذا يفعل:**
- تهيئة مستودع git إذا لزم الأمر
- إعداد الأصل البعيد
- تكوين الفرع الافتراضي
- إعداد .gitignore

---

### التحكم في الأضرار

**الوكيل**: `configuration-damage-control`

يقوم بتكوين نظام التحكم في الأضرار للحماية من الأوامر المدمرة.

**مستويات الحماية:**
- **قياسي** - يحظر الأنماط المدمرة الشائعة
- **صارم** - حظر أكثر عدوانية
- **مسموح** - الحد الأدنى من الحظر

**ما يمنع:**
- `rm -rf /` والمتغيرات
- القوة تدفع إلى الفروع المحمية
- تسقط قاعدة البيانات دون تأكيد
- عمليات حذف الملفات الجماعية

راجع [التحكم في الأضرار](/features/damage-control) للحصول على الوثائق الكاملة.

---

### التحقق من التكوين

**الوكيل**: `configuration-verify`

التحقق من أن كل تكوينات AgileFlow صحيحة وتعمل.

**ما يتحقق:**
- هوكتم تكوين النظام بشكل صحيح
- الدلائل المطلوبة موجودة
- البرامج النصية قابلة للتنفيذ
- ملفات JSON صالحة
- تم تثبيت خطافات Git

## الاستخدام

### التكوين التفاعلي

__لا تترجم_2__

سترى خيارات مثل:
__لا تترجم_3__

### استدعاء الوكيل المباشر

يمكنك أيضًا استدعاء وكلاء التكوين مباشرةً من خلال أداة المهام:

__لا تترجم_4__

## ملفات التكوين

### .كلود/settings.json

ملف تكوين الخطافات الرئيسية. ملتزمون بالبوابة.

__لا تترجم_5__

### docs/00-meta/agileflow-metadata.json

تكوين الميزة وتتبع الإصدار.

__لا تترجم_6__

### .كلود/settings.local.json

التجاوزات الخاصة بالمستخدم. تم تجاهله.

__لا تترجم_7__

## أفضل الممارسات

### 1. ابدأ بنظام الخطافات

نظام الخطافات أساسي. قم بتكوينه أولاً، ثم قم بإضافة ميزات أخرى.

__لا تترجم_8__

### 2. تمكين الأرشفة التلقائية مبكرًا

بالنسبة للمشاريع التي تحتوي على العديد من القصص، قم بتمكين الأرشفة التلقائية لمنع Status.json من النمو بشكل كبير جدًا.

### 3. إعادة التشغيل بعد التكوين

موستتطلب تغييرات التكوين إعادة تشغيل Claude Code:

__لا تترجم_9__

### 4. التحقق من التكوين

بعد إجراء التغييرات، قم بتشغيل التحقق:

__لا تترجم_10__

### 5. اختبار البرامج النصية يدويا

قبل الاعتماد على الخطافات، اختبر البرامج النصية يدويًا:

__لا تترجم_11__

## استكشاف الأخطاء وإصلاحها

### الخطافات لا تعمل

1. تحقق من وجود `.claude/settings.json` وصلاحيته بتنسيق JSON
2. تحقق من تنسيق مصفوفة الخطافات (يجب استخدام تنسيق `matcher` + `hooks`)
3. أعد تشغيل Claude Code بالكامل

### تم اكتشاف التنسيق القديم

إذا رأيت "تم اكتشاف تنسيق الخطافات القديمة"، فإن ملف settings.json الخاص بك يستخدم التنسيق المهمل. قم بتشغيل `/agileflow:configure` → نظام الخطافات للترحيل.

### لم يتم العثور على البرامج النصية

تأكد من وجود البرامج النصية في الموقع الصحيح:
- __غير مترجم_41__
- __غير مترجم_42__
- __غير مترجم_43__

### تم رفض الإذن

جعل البرامج النصية قابلة للتنفيذ:
__لا تترجم_12__

## الوثائق ذات الصلة

- [هندسة نظام الخطافات](/features/hooks-system)- وثائق الخطافات التفصيلية
- [السياق المضغوط ](/features/compact-context) - السياقالحفاظ
- [التحكم في الأضرار](/features/damage-control)- نظام الحماية
- [`/agileflow:configure`](/commands/configure) - أمر التكوين