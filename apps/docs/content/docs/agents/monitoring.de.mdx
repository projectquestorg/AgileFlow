---
title: Überwachung
description: Überwachungsspezialist für Beobachtbarkeit, Protokollierungsstrategien, Alarmierungsregeln, Metrik-Dashboards, SLOs und Produktionstransparenz.
---
# AG-ÜBERWACHUNG

Der Monitoring & Observability-Spezialist entwirft und implementiert umfassende Observability-Lösungen. AG-MONITORING stellt sicher, dass Produktionssysteme sichtbar, fehlerfrei und für die Reaktion auf Vorfälle bereit sind.

## Fähigkeiten

- **Strukturierte Protokollierung**: JSON-Format, Anforderungs-/Trace-IDs, geeignete Protokollebenen
- **Metriksammlung**: Anwendungs-, Infrastruktur- und Geschäftsmetriken
- **Dashboard-Erstellung**: Grafana-, Datadog-, CloudWatch-Dashboards
- **Alarmierungsregeln**: Schwellenwertbasierte, anomaliebasierte und zusammengesetzte Alarme
- **SLO-Definition**: Verfügbarkeit, Latenz, Fehlerratenziele mit Fehlerbudgets
- **Verteilte Ablaufverfolgung**: Anforderungsflussverfolgung durch das System
- **Gesundheitsprüfungen**: Überwachung des Endpunktzustands und Abhängigkeitsprüfungen
- **Incident Response Runbooks**: Erkennungs-, Diagnose- und Lösungsverfahren
- **Leistungsanalyse**: Latenzaufschlüsselung und Ressourcennutzungsmuster

## Wann zu verwenden

Verwenden Sie AG-MONITORING, wenn Sie Folgendes benötigen:

- Entwerfen Sie eine Observability-Architektur für aDienst
- Implementieren Sie eine strukturierte Protokollierung
- Richten Sie die Erfassung von Metriken und Dashboards ein
- Konfigurieren Sie Warnregeln und Benachrichtigungsweiterleitung
- Definieren Sie SLOs und Fehlerbudgets
- Erstellen Sie Runbooks zur Reaktion auf Vorfälle
- Überwachen Sie den Anwendungszustand in der Produktion
- Analysieren Sie Leistungs- und Latenzmuster

## Wie es funktioniert

1. **Kontextladen**: Der Agent liest die Expertise-Datei und untersucht die aktuelle Überwachungseinrichtung
2. **Design**: Plant die Observability-Architektur (was protokolliert, was gemessen, was gewarnt werden soll)
3. **Implementierung**: Richtet Protokollierung, Metriken, Dashboards und Warnungen ein
4. **Verifizierung**: Testet Integritätsprüfungen und Warnungen im Staging
5. **Dokumentation**: Erstellt Vorfall-Runbooks und SLO-Dokumentation
6. **Koordination**: Kommuniziert über den Agentenbus über den Überwachungsstatus

## Beispiel

```bash
# Via /babysit
/agileflow:babysit
> "Set up monitoring and alerting for the new API service"

# Or directly invoke
/agileflow:observability-setup

# AG-MONITORING will:
# 1. Design logging and metrics strategy
# 2. Set up structured JSON logging
# 3. Configure Prometheus/Grafana for metrics
# 4. Create dashboards
# 5. Configure alerting rules
# 6. Create incident runbooks
```

## Schlüsselverhalten

– **Strukturierte Protokollierung erzwungen** – Keine unstrukturierten Klartextprotokolle in der Produktion
- **Warnung, worauf es ankommt** - Reduzieren Sie Lärm mit intelligenten Schwellenwerten
- **Auf Fehler vorbereiten** - ErstellenErstellen Sie Runbooks, bevor es zu Vorfällen kommt
- **Niemals PII protokollieren** – Sicherheit und Compliance stehen an erster Stelle (keine Passwörter, Token, PII)
- **Überwachen Sie den glücklichen Weg UND Fehler** - Warnen Sie sowohl bei Erfolgsschwellen als auch bei Misserfolgen
- **SLOs bestimmen Entscheidungen** - Fehlerbudgets bestimmen, wann man langsamer vorgehen und Schulden beheben muss

## Observability-Säulen

AG-MONITORING implementiert alle vier Observability-Säulen:

### Metriken (quantitativ)
- Reaktionszeit (Latenz)
- Durchsatz (Anfragen/Sekunde)
- Fehlerquote (% Ausfälle)
- Ressourcennutzung (CPU, Speicher, Festplatte)
- Geschäftskennzahlen (Anmeldungen, Transaktionen)

### Protokolle (Detaillierte Ereignisse)
- Anwendungsprotokolle (Fehler, Warnungen, Informationen)
- Zugriffsprotokolle (HTTP-Anfragen)
- Audit-Protokolle (wer hat was getan)
- Strukturiertes Format (JSON, leicht durchsuchbar)

### Traces (Anfrageablauf)
- Verteilte Nachverfolgung durch das System
- Latenzaufschlüsselung (wo Zeit verbracht wird)
- Fehlerspuren und Stapelspuren
- Dienstabhängigkeiten

### Warnungen (proaktive Benachrichtigung)
- Schwellenwertbasiert (Metrik > Grenzwert)
- Anomaliebasiert (ungewöhnliches Muster).erns)
- Zusammengesetzt (mehrere Bedingungen)
- Intelligentes Routing (wer benachrichtigt werden soll)

## Werkzeuge verfügbar

Dieser Agent hat Zugriff auf:

- **Lesen**: Zugriff auf Anwendungscode und Protokollierungsmuster
- **Schreiben**: Protokollierungsdienstprogramme und Überwachungskonfigurationen erstellen
- **Bearbeiten**: Dashboards und Benachrichtigungsregeln aktualisieren
- **Bash**: Überwachungs-Setup-Befehle ausführen
- **Glob**: Protokollierungsmuster in der Codebasis finden
- **Grep**: Suche nach überwachungsbezogenem Code

## Kernaufgaben

1. Entwerfen Sie eine Observability-Architektur
2. Implementieren Sie eine strukturierte Protokollierung
3. Richten Sie die Metriksammlung ein
4. Erstellen Sie Benachrichtigungsregeln
5. Erstellen Sie Überwachungs-Dashboards
6. Definieren Sie SLOs und Fehlerbudgets
7. Erstellen Sie Runbooks für die Reaktion auf Vorfälle
8. Überwachen Sie den Anwendungszustand
9. Koordinieren Sie die Infrastrukturüberwachung mit AG-DEVOPS
10. Beobachtbarkeitsdokumentation pflegen

## Qualitätsstandards

Vor der Kennzeichnung der Arbeiten als abgeschlossen stellt AG-MONITORING sicher:

– Strukturierte Protokollierung mit Anforderungs-/Trace-IDs implementiert
- Alle kritischen Kennzahlen erfasst und Dashboards erstellt
- ArmaturenbrettEs ist erstellt und tatsächlich nützlich
- Warnregeln mit entsprechenden Schwellenwerten konfiguriert
- SLOs definiert mit berechneten Fehlerbudgets
- Vorfall-Runbooks für häufige Fehlerszenarien erstellt
- Der Endpunkt für die Integritätsprüfung funktioniert und reagiert ordnungsgemäß
– Protokollaufbewahrungsrichtlinie definiert und durchgesetzt
- Keine PII/Passwörter/Tokens in Protokollen
- Alarmweiterleitung getestet und funktioniert

## Protokollebenen

AG-MONITORING verwendet diese Protokollebenen:

- **FEHLER**: Dienst nicht verfügbar, Datenverlust, kritische Fehler
– **WARNUNG**: Beeinträchtigtes Verhalten, unerwartete Bedingungen, Wiederholungsszenarien
- **INFO**: Wichtige Statusänderungen, Bereitstellungen, Feature-Flag-Änderungen
- **DEBUG**: Detaillierte Diagnoseinformationen (nur Entwicklung, nicht Produktion)

## SLO-Definition

Beispiel-SLO-Ziele:

- **Verfügbarkeit**: 99,9 % Betriebszeit (8,7 Stunden Ausfallzeit/Jahr)
- **Latenz**: 95 % der Anfragen unter 200 ms
- **Fehlerrate**: unter 0,1 % fehlgeschlagene Anfragen

Fehlerbudgets bestimmen die Bereitstellungsgeschwindigkeit – wenn das Budget erschöpft ist, konzentrieren Sie sich auf die Stabilität.

## Verwandte Agenten

-[`AG-DEVOPS`](/agents/devops) – Koordinierung der Infrastrukturüberwachung
- [`AG-API`](/agents/api) – Endpunktlatenz und Fehlerraten überwachen
- [`AG-DATABASE`](/agents/database) – Abfragelatenz und Verbindungspool überwachen
- [`AG-PERFORMANCE`](/agents/performance) – Zusammenarbeit bei der Leistungsüberwachung

## Slash-Befehle

AG-MONITORING kann diese Befehle direkt aufrufen:

- `/agileflow:research:ask TOPIC=...` – Best Practices für die Beobachtbarkeit erforschen
– `/agileflow:ai-code-review` – Überprüfen Sie den Überwachungscode auf Best Practices
- `/agileflow:adr-new` - Entscheidungen zur Dokumentenüberwachung und Beobachtbarkeit
– `/agileflow:status STORY=... STATUS=...` – Status der Überwachungsgeschichte aktualisieren

## Health Check-Endpunkt

AG-MONITORING führt Gesundheitschecks wie folgt durch:

```javascript
app.get('/health', async (req, res) => {
  const database = await checkDatabase();
  const cache = await checkCache();
  const external = await checkExternalService();

  const healthy = database && cache && external;
  const status = healthy ? 200 : 503;

  res.status(status).json({
    status: healthy ? 'healthy' : 'degraded',
    timestamp: new Date(),
    checks: { database, cache, external }
  });
});
```

Gibt 200 zurück, wenn es fehlerfrei ist, und 503, wenn eine Abhängigkeit ausgefallen ist.

## Incident Runbook-Format

AG-MONITORING erstellt Runbooks wie folgt:

```markdown
## [Incident Type]

**Detection**:
- Alert: [which alert fires]
- Symptoms: [what users see]

**Diagnosis**:
1. Check [metric 1]
2. Check [metric 2]
3. Verify [dependency]

**Resolution**:
1. [First step]
2. [Second step]
3. [Verification]

**Post-Incident**:
- Incident report
- Root cause analysis
- Preventive actions
```

## Verifizierungsprotokoll

AG-MONITORING folgt dem Session Harness-System, um Funktionsstörungen zu verhindern:

1. **Vorimplementierung**: Überprüft den Status und die Umgebung der Basisüberwachung
2. **Während der Arbeit**: Testet Gesundheitsprüfungen und Warnmeldungen in Echtzeit
3. **Nach der Implementierung**: Überprüft, ob die Überwachung Daten sammelt, bevor sie als abgeschlossen markiert wird
4. **Fertigstellung der Geschichte**: Kann NUR als „in Prüfung“ markiert werden, wenn die Überwachung betriebsbereit ist

Ausführliche Informationen finden Sie im [Session Harness Protocol](/agents/session-harness)].