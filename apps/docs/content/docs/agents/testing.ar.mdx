---
title: اختبار
description: متخصص في اختبار استراتيجية الاختبار وأنماط الاختبار وتحسين التغطية وتصميم مجموعة الاختبار الشاملة.
---
# وكيل الاختبار

وكيل الاختبار (AG-TESTING) هو خبير متخصص في ضمان الجودة يقوم بتصميم إستراتيجيات اختبار شاملة، والتخلص من الأنماط المضادة للاختبار، وتحسين تغطية الاختبار. على عكس إعداد البنية الأساسية لـ CI، يركز هذا الوكيل على الأسئلة "ما يجب اختباره" و"كيفية اختباره".

## القدرات

- **تصميم إستراتيجية الاختبار**: قم بإنشاء خطط اختبار شاملة تغطي الوحدة والتكامل واختبار E2E
- **تحسين التغطية**: تحليل تغطية التعليمات البرمجية وتحديد الثغرات في المسارات الحرجة
- **اختبار اكتشاف الأنماط المضادة**: تحديد الاختبارات غير المستقرة والبطيئة والهشة والقضاء عليها
- **البنية التحتية للاختبار**: إنشاء تجهيزات الاختبار والمصانع والوظائف المساعدة
- **تحليل التغطية**: قياس مقاييس التغطية والإبلاغ عنها باستخدام توصيات قابلة للتنفيذ
- **توثيق نماذج الاختبار**: توثيق أنماط الاختبار القابلة لإعادة الاستخدام وأفضل الممارسات
- **اختبار الأداء**: تصميم معايير الأداء وتنفيذها
- **اختبار الطفرات**: اختبر الاختبارات نفسها لضمان الجودة## متى يستخدم

استخدم وكيل الاختبار عندما:

- بدء ميزة جديدة والحاجة إلى تحديد ما يحتاج إلى اختبار
- نسبة تغطية الاختبار الحالية أقل من 70% وتحتاج إلى تحسين
- الاختبارات غير مستقرة (حالات فشل متقطعة) أو بطيئة (> ثانية واحدة لكل منها)
- الحاجة إلى تصميم تركيبات الاختبار أو المصانع لبيانات الاختبار المعقدة
- إنشاء البنية التحتية للاختبار الآلي
- إنشاء ADRs لقرارات الاختبار
- تنفيذ مجموعات اختبار شاملة للمسارات الحرجة

## كيف يعمل

1. **تحميل المعرفة**: يقرأ الوكيل ملف الخبرة وحالة اختبار المشروع
2. **مراجعة القصة**: يقوم الوكيل بتحليل القصة من أجل متطلبات قابلية الاختبار
3. **تخطيط الاختبار**: يقوم الوكيل بتصميم حالات الاختبار (المسار السعيد، وحالات الخطأ، وحالات الحافة)
4. **إعداد البنية التحتية**: يقوم الوكيل بإنشاء تركيبات اختبار ونماذج ومساعدين
5. **تنفيذ الاختبار**: يكتب الوكيل الاختبارات باتباع نمط AAA (الترتيب-التنفيذ-التأكيد)
6. **قياس التغطية**: يقوم الوكيل بقياس التغطية وتحديد الفجوات
7. **إزالة النمط المضاد**: يقوم الوكيل بتحديد وإصلاح أخطاء flاختبارات آكي/بطيئة/هشة
8. **التحقق**: يقوم الوكيل بتشغيل `/agileflow:verify` لضمان اجتياز جميع الاختبارات
9. **التنسيق**: يقوم الوكيل بتحديث الحالة.json ويتواصل عبر bus/log.jsonl

## مثال

__لا تترجم_0__

## السلوكيات الرئيسية

- **نمط AAA**: تتبع جميع الاختبارات بنية Arrange-Act-Assert من أجل الوضوح
- **اختبار العزل**: تختبر الوحدة التبعيات الوهمية؛ تستخدم اختبارات التكامل التبعيات الحقيقية
- **التركيز على السلوك**: الاختبارات تتحقق من صحة السلوك، وليس تفاصيل التنفيذ
- **التنفيذ السريع**: يتم تشغيل اختبارات الوحدة بالمللي ثانية؛ جناح كامل في دقائق
- **التسمية الواضحة**: تصف أسماء الاختبار بالضبط ما يتم اختباره
- **حدود التغطية**: 70% كحد أدنى، و80%+ للمسارات الحرجة (100% للمصادقة/الدفع)
- **لا توجد اختبارات غير متقلبة**: حالات الفشل المتقطعة هي بمثابة إشارات حمراء؛ تمت إزالة العشوائية والتوقيت
- **الوعي بالأداء**: الاختبارات ليست أبطأ من التعليمات البرمجية التي تختبرها
- **الحفاظ على السياق**: يستخدم السياق المضغوط (الأولوية: عالية) للحفاظ على تركيز الاختبار أثناء المحادثات الطويلة، والحفاظ علىأهداف التغطية والكشف عن الأنماط المضادة من خلال ضغط السياق

## تكوين السياق المضغوط

يستخدم وكيل الاختبار **أولوية عالية** Compact_context لضمان بقاء تغطية الاختبار والجودة موضع التركيز:

__لا تترجم_1__

وهذا يضمن بقاء قواعد الاختبار الحرجة (نمط AAA، والحد الأدنى من التغطية، وممارسات الاختبار المضادة للتقلبات) والحالة الحالية (فجوات التغطية، وأعداد الاختبارات غير المستقرة، وحالة اختبار المسار الحرج) موضع التركيز من خلال ضغط السياق.

## الأدوات المتاحة

- القراءة والكتابة والتحرير (عمليات الملف)
- باش (تشغيل أوامر الاختبار)
- Glob (البحث عن ملفات الاختبار)
- Grep (رمز اختبار البحث)

## تكامل تسخير الجلسة

يتكامل وكيل الاختبار مع أداة الجلسة لضمان الجودة:

__لا تترجم_2__

## فئات الاختبار والأهداف

| الفئة | نسبة | السرعة | النطاق |
|----------|----------|-------|-------|
| اختبارات الوحدة | 80% | أقل من 1 مللي ثانية لكل | دالة واحدة، تبعيات ساخرة |
| اختبارات التكامل | 15% | أبطأ | مكونات متعددة، تبعيات حقيقية |
| اختبارات E2E| 5% | بطيء جداً | سير عمل المستخدم الكامل |
| اختبارات العقد | 0-5% | سريع | التحقق من صحة مخطط API |

## قائمة التحقق من الجودة

قبل وضع علامة على القصة مكتملة:

- [ ] تغطية الاختبار ≥70% (المسارات الحرجة 100%)
- [ ] تم اختبار جميع سيناريوهات المسار السعيد
- [ ] تم اختبار جميع سيناريوهات الخطأ
- [ ] تم تحديد الحالات الطرفية واختبارها
- [ ] لا توجد اختبارات غير مستقرة (تشغيل 10x، كل النجاح)
- [ ] لا توجد اختبارات بطيئة (كل اختبار أقل من 1 ثانية، مجموعة كاملة أقل من 5 دقائق)
- [ ] يختبر السلوك، وليس التنفيذ
- [ ] أسماء الاختبارات تصف بوضوح ما تم اختباره
- [ ] تركيبات الاختبار قابلة لإعادة الاستخدام وموثقة جيدًا
- [ ] تم إنشاء تقرير التغطية ومراجعته
- [ ] test_status: تم التحقق من "النجاح".

## أنماط الاختبار الشائعة

**نموذج AAA (الترتيب-التنفيذ-التأكيد)**:
__لا تترجم_3__

** تركيبات الاختبار (بيانات الاختبار القابلة لإعادة الاستخدام) **:
__لا تترجم_4__

**الاختبارات المعلمية**:
__لا تترجم_5__

## الأنماط المضادة للقضاء عليها

| مكافحة النمط | مشكلة | إصلاح |
|--------------|---------|-----|
| اختبارات قشاري | أعطال متقطعة، لا يمكن التنبؤ بها | إزالة العشوائيةإضافة ينتظر الشروط |
| اختبارات بطيئة | > ثانية واحدة لكل | استخدام المحاكاة، والتوازي، وتحسين الاستعلامات |
| اختبارات هشة | استراحة عند إعادة البناء | سلوك الاختبار وليس تفاصيل التنفيذ |
| المبالغة في السخرية | عزلة غير واقعية | اختبارات وحدة الميزان والتكامل |

## الوكلاء ذوو الصلة

- [`qa`](/agents/qa) - استراتيجية الاختبار وجاهزية الإصدار (نطاق مختلف)
- [`ci`](/agents/ci) - البنية الأساسية للاختبار وإعداد مسار CI
- [`api`](/agents/api) - اختبار واجهة برمجة التطبيقات والتحقق من العقد
- [`ui`](/agents/ui) - اختبار المكونات واختبار تفاعل المستخدم
- [`database`](/agents/database) - اختبار طبقة البيانات وتحسين الاستعلام

## التنسيق

يقوم وكيل الاختبار بالتنسيق مع الوكلاء الآخرين:

- **AG-API**: تأكد من اختبار حالات خطأ واجهة برمجة التطبيقات
- **AG-UI**: التنسيق بشأن المكونات واختبار E2E
- **AG-DATABASE**: اختبار أداء طبقة البيانات والاستعلام
- **AG-CI**: طلب البنية التحتية للاختبار (التنفيذ الموازي، تقارير التغطية)
- **AG-QA**: التوافق مع مقاييس الجودة وأهداف تغطية الاختبار

## أوامر القطع

- `/agileflow:verify US-XXXX` - إجراء اختبارات لقصة معينة
- `/agileflow:research:ask TOPIC=...` - أنماط اختبار البحث
- `/agileflow:ai-code-review` - راجع رمز الاختبار للأنماط المضادة
- `/agileflow:adr-new` - توثيق قرارات الاختبار
- `/agileflow:status STORY=... STATUS=...` - تحديث حالة القصة