---
title: Integraciones
description: Especialista en integración de API de terceros, webhooks, procesadores de pagos, servicios externos y conectividad API.
---
# Especialista en integración

AG-INTEGRACIONES maneja todas las integraciones de servicios de terceros, desde procesadores de pagos y proveedores de autenticación hasta webhooks y sincronización de datos con API externas.

## Capacidades

- **Implementación de cliente API**: Stripe, Twilio, SendGrid, AWS, Google y otros servicios
- **Manejo de webhook**: validación de firma, idempotencia, procesamiento de eventos
- **Proveedores de autenticación**: Auth0, OAuth (Google, GitHub, Facebook), AWS Cognito
- **Procesamiento de pagos**: Stripe, Square, PayPal con manejo de webhook
- **Entrega de correo electrónico**: integraciones de SendGrid, Mailgun y AWS SES
- **Manejo de errores y lógica de reintento**: retroceso exponencial, limitación de velocidad, degradación gradual
- **Controles y monitoreo de estado**: seguimiento del estado del servicio externo

## Cuándo utilizar

Utilice AG-INTEGRACIONES cuando:

- Integración de API de terceros (Stripe, Twilio, SendGrid, etc.)
- Configuración de proveedores de autenticación (Auth0, Google OAuth)
- Implementación de receptores y manejadores de webhooks.
- Proceso de pago del edificioflujos de esencia
- Manejar fallas de servicios externos con gracia
- Implementación de lógica de reintento con retroceso exponencial
- Establecer un seguimiento de la salud de los servicios externos.

## Cómo funciona

1. **Carga de contexto**: lee el archivo de experiencia y las integraciones existentes
2. **Investigación de servicios**: documentación de revisiones, precios, límites de tarifas, autenticación
3. **Implementación del cliente**: crea un cliente API con autenticación adecuada
4. **Manejo de errores**: implementa un manejo integral de errores y una lógica de reintento
5. **Configuración de Webhook**: valida firmas, implementa idempotencia
6. **Pruebas**: Crea pruebas de integración con servicios externos simulados.
7. **Monitoreo**: configura alertas y controles de estado

## Ejemplo

```bash
# Via /babysit
/agileflow:babysit
> "I need to add Stripe payments with webhook handling"

# AG-INTEGRATIONS will:
# 1. Research Stripe API and webhook events
# 2. Implement Stripe API client with authentication
# 3. Create webhook receiver with signature validation
# 4. Implement retry logic for failed charges
# 5. Create integration tests (mocked Stripe)
# 6. Document setup and webhook events
```

## Comportamientos clave

- **Nunca codifica secretos**: siempre utiliza variables de entorno para las claves API
- **Valida Webhooks**: la validación de la firma es obligatoria (evita la suplantación de identidad)
- **Maneja todos los errores**: errores de red, tiempo de espera, límite de velocidad y servicio
- **Implementa la lógica de reintento**: Eretroceso exponencial con jitter
- **Registro seguro**: nunca registra credenciales ni datos confidenciales
- **Degradación elegante**: proporciona respaldo si el servicio externo no está disponible

## Herramientas disponibles

- Leer, escribir, editar, Bash, Glob, Grep
- Acceso a Session Harness para verificación

## Integraciones comunes

**Procesamiento de pagos**:
- Stripe - Pagos, suscripciones, pagos
- Plaza - Punto de venta
- PayPal - Pagos, suscripciones

**Autenticación**:
- Auth0 - Autenticación empresarial
- Google OAuth - Inicio de sesión social
- GitHub OAuth - Inicio de sesión de desarrollador

**Entrega por correo electrónico**:
- SendGrid - Correo electrónico transaccional
- Mailgun - Entrega de correo electrónico
- AWS SES - Correo electrónico rentable

**SMS/Mensajería**:
- Twilio - SMS, voz, mensajería
- AWS SNS - Entrega de mensajes
- Mensajería en la nube de Firebase - Notificaciones push

**Almacenamiento de archivos**:
- AWS S3 - Almacenamiento en la nube
- Almacenamiento en la nube de Google - Almacenamiento en la nube
- Azure Blob Storage - Almacenamiento en la nube

## Patrón de integración

```javascript
// 1. Create client with auth
const client = new StripeClient(process.env.STRIPE_API_KEY);

// 2. Make authenticated request
const payment = await client.payments.create({
  amount: 10000,
  currency: 'usd',
});

// 3. Handle errors
if (payment.error) {
  logger.error('Payment failed', {
    error: payment.error,
    // Never log sensitive data
  });
  // Implement retry or fallback
}
```

## Seguridad del webhook

**Requisito críticosexo**:
- Validar la firma del webhook (evitar la suplantación de identidad)
- Responda con 200 OK inmediatamente (confirmar recibo)
- Procesar de forma asincrónica (no bloquear la respuesta)
- Manejar duplicados (se pueden volver a intentar los webhooks)

## Estrategia de manejo de errores

- Identificar errores recuperables (red, tiempo de espera, 5xx)
- Implementar retroceso exponencial con jitter
- Establecer el recuento máximo de reintentos
- Registrar fallas y alertar si son persistentes.
- Implementar degradación elegante

## Lista de verificación de calidad

Antes de marcar el trabajo de integración completo:

- Autenticación del servicio funcionando.
- Llamadas API probadas y funcionando
- Todos los errores manejados (red, tiempo de espera, límite de velocidad)
- Lógica de reintento con retroceso exponencial implementado
- Webhooks validados (verificación de firma)
- Webhooks idempotentes (manejar duplicados)
- Claves API en variables de entorno (nunca codificadas)
- El registro de errores no expone secretos
- Las pruebas de integración cubren escenarios de camino feliz + error
- Documentación completa (instalación, autenticación, configuración)
- Control de salud o seguimiento implementado
- Pasando pruebasg con test_status: "aprobado"

## Agentes relacionados

- [AG-API](/agents/api) - Integración de la capa de servicio y puntos finales
- [AG-SECURITY](/agents/security) - Gestión segura de credenciales
- [AG-MONITORING](/agents/monitoring) - Comprobaciones de estado y alertas

## Mensajes de coordinación

AG-INTEGRACIONES coordina con otros equipos:

```json
{
  "ts": "2025-10-21T10:00:00Z",
  "from": "AG-INTEGRATIONS",
  "type": "status",
  "story": "US-0040",
  "text": "Stripe integration ready, AG-API can now implement payment endpoint"
}
```

## Comandos de barra diagonal

- `/agileflow:research:ask TOPIC=...` - Mejores prácticas del servicio de investigación
- `/agileflow:ai-code-review` - Revisar el código de integración por seguridad
- `/agileflow:adr-new` - Decisiones de elección de integración de documentos
- `/agileflow:tech-debt` - Manejo de errores de documento faltante
- `/agileflow:status STORY=... STATUS=...` - Actualizar el estado de la historia