---
title: Konfigurationsagenten
description: Spezialisierte Agenten für die Einrichtung und Konfiguration von AgileFlow-Funktionen
---
# Konfigurationsagenten

Konfigurationsagenten sind spezialisierte Agenten, die beim Einrichten und Konfigurieren verschiedener AgileFlow-Funktionen helfen. Sie werden über den Befehl `/agileflow:configure` aufgerufen.

## Übersicht

Wenn Sie `/agileflow:configure` ausführen, wird Ihnen ein Menü mit Konfigurationsoptionen angezeigt. Jede Option erzeugt einen speziellen Konfigurationsagenten, der Sie durch die Einrichtung führt.

```bash
/agileflow:configure
```

## Verfügbare Konfigurationsagenten

### Hakensystem

**Agent**: `configuration-hooks`

Konfiguriert das Hooks-System von Claude Code für die ereignisgesteuerte Automatisierung.

**Was es konfiguriert:**
- SessionStart-Hook – Willkommensanzeige, Projektstatus
- PreCompact-Hook - Kontexterhaltung
– Stop-Hook – Sitzungsabschluss, Warnung zu nicht festgeschriebenen Änderungen
– UserPromptSubmit-Hook – Aktivitätsprotokollierung

**Erstellte Dateien:**
– `.claude/settings.json` – Hooks-Konfiguration
- `scripts/agileflow-welcome.js` - Willkommensanzeige
- `scripts/precompact-context.sh` - Kontexterhaltung
– `scripts/agileflow-stop.sh` – Zusammenfassung der Sitzung
- `scripts/get-env.js` – Umgebungsvariablen-Helfer

---

### PreCompact-Kontext

**Agent**: `configuration-precompact`

Konfiguriert den PreCompact-Hook, um kritischen Kontext beizubehalten, wenn Konversationen komprimiert werden.

**Was es konserviert:**
- Projektversion, Git-Zweig, aktive Geschichten
- Aktive Befehlsregeln (z. B. die AskUserQuestion-Anforderung des Babysitters)
- Wichtige Konventionen von CLAUDE.md
– Aktueller Fortschritt von bus/log.jsonl

**Unterstützung mehrerer Befehle (v2.40.0+):**
Es können mehrere Befehle gleichzeitig aktiv sein. Der PreCompact-Hook liest alle aktiven Befehle von `session-state.json` und behält ihre Verhaltensregeln bei.

---

### Automatische Archivierung

**Agent**: `configuration-archival`

Konfiguriert die automatische Archivierung alter abgeschlossener Storys, um `status.json` klein zu halten.

**Warum es wichtig ist:**
Wenn Projekte wachsen, kann `status.json` das 25.000-Token-Limit von Claude Code überschreiten, was dazu führt, dass Agenten fehlschlagen. Durch die automatische Archivierung werden alte abgeschlossene Geschichten nach `status-archive.json` verschoben.

**Konfigurationsoptionen:**
- 30 Tage (empfohlen)
- 14 Tage
- 7 Tage
- 3 Tage (aggressiv)

**Dateien erstellt:**
– `docs/00-meta/agileflow-metadata.json` – Schwellenwertkonfiguration
- `scripts/archive-completed-stories.sh` - Archivskript
– SessionStart-Hook-Eintrag – Führt die Archivierung automatisch aus

---

### Git-Attribution

**Agent**: `configuration-attribution`

Konfiguriert, ob Claude Code KI-Attribution zu Git-Commits hinzufügt.

**Optionen:**
– **Attribution deaktivieren** – Saubere Commits, keine KI-Fußzeilen (professionelle Nutzung)
- **Namensnennung beibehalten** - Fußzeile „Generiert mit Claude Code“ einschließen

**Was es tut:**
- Erstellt oder aktualisiert `CLAUDE.md` mit der Quellenangaberichtlinie
– Fügt einen kritischen Abschnitt hinzu, dem Claude folgt

---

### Statuszeile

**Agent**: `configuration-status-line`

Konfiguriert die benutzerdefinierte Statusleiste, die in Claude Code angezeigt wird.

**Was es zeigt:**
- Git-Zweig (farbcodiert nach Typ)
- Aktuelle Story-ID und Titel
- WIP-Anzahl (gelb, wenn >1, rot, wenn >3)
- Abschlussprozentsatz

**Beispielausgabe:**
```
[main] US-0007: Status Line | WIP: 2 | Done: 85%
```

---

### CI-Pipeline

**Agent**: `configuration-ci`

Konfiguriert den CI/CD-Workflow für automatisierte Tests und Qualitätsprüfungen.

**Was es schafft:**
-GitHub Actions-Workflow-Datei
- Testbefehle
- Linting-Konfiguration
- Deckungsschwellen

---

### Git-Konfiguration

**Agent**: `configuration-git-config`

Konfiguriert die Initialisierung des Git-Repositorys und die Remote-Einrichtung.

**Was es tut:**
– Initialisiert bei Bedarf das Git-Repository
- Richtet den Remote-Ursprung ein
- Konfiguriert den Standardzweig
– Richtet .gitignore ein

---

### Schadensbegrenzung

**Agent**: `configuration-damage-control`

Konfiguriert das Schadenskontrollsystem zum Schutz vor zerstörerischen Befehlen.

**Schutzstufen:**
- **Standard** – Blockiert häufige destruktive Muster
- **Streng** – Aggressiveres Blocken
- **Permissiv** – Minimale Blockierung

**Was es blockiert:**
- `rm -rf /` und Varianten
- Erzwingen Sie Pushs auf geschützte Zweige
- Datenbank wird ohne Bestätigung gelöscht
- Massenlöschungen von Dateien

Die vollständige Dokumentation finden Sie unter [Damage Control](/features/damage-control).

---

### Konfiguration überprüfen

**Agent**: `configuration-verify`

Überprüft, ob die gesamte AgileFlow-Konfiguration korrekt ist und funktioniert.

**Was überprüft wird:**
- Hakens System richtig konfiguriert
- Erforderliche Verzeichnisse vorhanden
- Skripte sind ausführbar
- JSON-Dateien sind gültig
- Git-Hooks sind installiert

## Nutzung

### Interaktive Konfiguration

```bash
/agileflow:configure
```

Sie sehen Optionen wie:
```
Which feature would you like to configure?

1. Hooks System (Recommended)
2. Auto-Archival
3. Git Attribution
4. Status Line
5. CI Pipeline
6. Damage Control
7. Verify Configuration
```

### Direkter Agentenaufruf

Sie können Konfigurationsagenten auch direkt über das Task-Tool aufrufen:

```javascript
Task(
  description: "Configure hooks system",
  prompt: "Set up the hooks system with SessionStart and PreCompact",
  subagent_type: "configuration-hooks"
)
```

## Konfigurationsdateien

### .claude/settings.json

Haupt-Hooks-Konfigurationsdatei. Dem Git verpflichtet.

```json
{
  "hooks": {
    "SessionStart": [{
      "matcher": "",
      "hooks": [{
        "type": "command",
        "command": "node scripts/agileflow-welcome.js"
      }]
    }],
    "PreCompact": [{
      "matcher": "",
      "hooks": [{
        "type": "command",
        "command": "bash scripts/precompact-context.sh"
      }]
    }]
  }
}
```

### docs/00-meta/agileflow-metadata.json

Funktionskonfiguration und Versionsverfolgung.

```json
{
  "version": "2.78.0",
  "created": "2025-01-01T00:00:00Z",
  "updated": "2025-01-09T00:00:00Z",
  "archival": {
    "threshold_days": 30,
    "enabled": true
  },
  "features": {
    "hooks": {
      "enabled": true,
      "configured_version": "2.41.0"
    },
    "precompact": {
      "enabled": true,
      "configured_version": "2.40.0"
    }
  }
}
```

### .claude/settings.local.json

Benutzerspezifische Überschreibungen. Gitignoriert.

```json
{
  "env": {
    "USER_NAME": "Your Name"
  }
}
```

## Best Practices

### 1. Beginnen Sie mit dem Hooks-System

Das Hakensystem ist grundlegend. Konfigurieren Sie es zuerst und fügen Sie dann weitere Funktionen hinzu.

```bash
/agileflow:configure
# Select: Hooks System
```

### 2. Aktivieren Sie die automatische Archivierung frühzeitig

Aktivieren Sie bei Projekten mit vielen Storys die automatische Archivierung, um zu verhindern, dass status.json zu groß wird.

### 3. Neustart nach der Konfiguration

MosFür Konfigurationsänderungen ist ein Neustart von Claude Code erforderlich:

```
RESTART CLAUDE CODE NOW!
Quit completely (Cmd+Q), wait 5 seconds, restart
Hooks ONLY load on startup!
```

### 4. Überprüfen Sie die Konfiguration

Nachdem Sie Änderungen vorgenommen haben, führen Sie die Überprüfung durch:

```bash
/agileflow:configure
# Select: Verify Configuration
```

### 5. Skripte manuell testen

Bevor Sie sich auf Hooks verlassen, testen Sie Skripte manuell:

```bash
# Test welcome display
node scripts/agileflow-welcome.js

# Test context preservation
bash scripts/precompact-context.sh

# Test session wrap-up
bash scripts/agileflow-stop.sh
```

## Fehlerbehebung

### Hooks werden nicht ausgeführt

1. Stellen Sie sicher, dass `.claude/settings.json` existiert und gültiges JSON ist
2. Überprüfen Sie das Hooks-Array-Format (muss das Format `matcher` + `hooks` verwenden).
3. Starten Sie Claude Code vollständig neu

### Altes Format erkannt

Wenn die Meldung „Altes Hooks-Format erkannt“ angezeigt wird, verwendet Ihre Datei „settings.json“ das veraltete Format. Führen Sie zur Migration `/agileflow:configure` → Hooks System aus.

### Skripte nicht gefunden

Stellen Sie sicher, dass sich die Skripte am richtigen Speicherort befinden:
- `scripts/agileflow-welcome.js`
- `scripts/precompact-context.sh`
- `scripts/get-env.js`

### Berechtigung verweigert

Skripte ausführbar machen:
```bash
chmod +x scripts/*.js scripts/*.sh
```

## Verwandte Dokumentation

– [Hooks System Architecture](/features/hooks-system) – Detaillierte Hooks-Dokumentation
- [Kompakter Kontext](/features/compact-context) - KontextErhaltung
- [Schadenskontrolle](/features/damage-control) - Schutzsystem
- [`/agileflow:configure`](/commands/configure) – Konfigurationsbefehl