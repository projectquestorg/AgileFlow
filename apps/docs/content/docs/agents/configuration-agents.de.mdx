---
title: Konfiguration Agents
description: Spezialisierte Agents für die Einrichtung und Konfiguration von AgileFlow-Funktionen
---

# Konfiguration Agents

Konfiguration Agents sind spezialisierte Agents, die beim Einrichten und Konfigurieren verschiedener AgileFlow-Funktionen helfen. Sie werden über den `/agileflow:configure` Befehl aufgerufen.

## Überblick

Wenn Sie `/agileflow:configure` ausführen, wird Ihnen ein Menü mit Konfigurationsoptionen angezeigt. Jede Option startet einen dedizierten Konfiguration Agent, der Sie durch das Setup führt.

```bash
/agileflow:configure
```

## Verfügbare Konfiguration Agents

### Hooks System

**Agent**: `configuration-hooks`

Konfiguriert Claude Codes Hooks-System für ereignisgesteuerte Automatisierung.

**Was wird konfiguriert:**
- SessionStart Hook - Welcome-Anzeige, Projekt-Status
- PreCompact Hook - Kontext-Erhaltung
- Stop Hook - Session-Abschluss, Warnung für Uncommitted Changes
- UserPromptSubmit Hook - Aktivitäts-Protokollierung

**Erstellte Dateien:**
- `.claude/settings.json` - Hooks-Konfiguration
- `scripts/agileflow-welcome.js` - Welcome-Anzeige
- `scripts/precompact-context.sh` - Kontext-Erhaltung
- `scripts/agileflow-stop.sh` - Session-Abschluss
- `scripts/get-env.js` - Environment-Variablen-Helper

---

### PreCompact Context

**Agent**: `configuration-precompact`

Konfiguriert den PreCompact Hook, um kritischen Kontext bei Gesprächs-Komprimierung zu bewahren.

**Was wird bewahrt:**
- Projekt-Version, Git-Branch, aktive Stories
- Aktive Befehl-Regeln (z. B. Babysit's AskUserQuestion-Anforderung)
- Schlüssel-Konventionen aus CLAUDE.md
- Aktuelle Fortschritte aus bus/log.jsonl

**Multi-Befehl-Unterstützung (v2.40.0+):**
Mehrere Befehle können gleichzeitig aktiv sein. Der PreCompact Hook liest alle aktiven Befehle aus `session-state.json` und bewahrt ihre Verhaltens-Regeln.

---

### Auto-Archivierung

**Agent**: `configuration-archival`

Konfiguriert automatische Archivierung alter abgeschlossener Stories, um `status.json` klein zu halten.

**Warum es wichtig ist:**
Wenn Projekte wachsen, kann `status.json` Claude Codes 25k Token-Limit überschreiten und Agents zum Fehlschlag führen. Auto-Archivierung verschiebt alte abgeschlossene Stories nach `status-archive.json`.

**Konfigurationsoptionen:**
- 30 Tage (empfohlen)
- 14 Tage
- 7 Tage
- 3 Tage (aggressiv)

**Erstellte Dateien:**
- `docs/00-meta/agileflow-metadata.json` - Schwellwert-Konfiguration
- `scripts/archive-completed-stories.sh` - Archivierungs-Script
- SessionStart Hook Eintrag - Führt Archivierung automatisch aus

---

### Git Attribution

**Agent**: `configuration-attribution`

Konfiguriert, ob Claude Code AI-Attribution zu Git-Commits hinzufügt.

**Optionen:**
- **Attribution deaktivieren** - Saubere Commits, keine AI-Footers (professionelle Nutzung)
- **Attribution behalten** - Fügen Sie "Generated with Claude Code" Footer ein

**Was es tut:**
- Erstellt oder aktualisiert `CLAUDE.md` mit Attribution-Richtlinie
- Fügt CRITICAL-Abschnitt hinzu, dem Claude folgt

---

### Status Line

**Agent**: `configuration-status-line`

Konfiguriert die benutzerdefinierte Status-Leiste, die in Claude Code angezeigt wird.

**Was wird angezeigt:**
- Git-Branch (farbcodiert nach Typ)
- Aktuelle Story-ID und Titel
- WIP-Anzahl (gelb, wenn >1, rot, wenn >3)
- Abschluss-Prozentsatz

**Beispiel-Ausgabe:**
```
[main] US-0007: Status Line | WIP: 2 | Done: 85%
```

---

### CI Pipeline

**Agent**: `configuration-ci`

Konfiguriert CI/CD-Workflow für automatisierte Tests und Qualitätsprüfungen.

**Was wird erstellt:**
- GitHub Actions Workflow-Datei
- Test-Befehle
- Linting-Konfiguration
- Coverage-Schwellwerte

---

### Git-Konfiguration

**Agent**: `configuration-git-config`

Konfiguriert Git-Repository-Initialisierung und Remote-Setup.

**Was es tut:**
- Initialisiert Git-Repository, falls benötigt
- Richtet Remote-Origin ein
- Konfiguriert Standard-Branch
- Richtet .gitignore ein

---

### Schadenkontrolle

**Agent**: `configuration-damage-control`

Konfiguriert das Schadenkontroll-System zum Schutz vor destruktiven Befehlen.

**Schutz-Stufen:**
- **Standard** - Blockiert häufige destruktive Muster
- **Strict** - Aggressiveres Blockieren
- **Permissive** - Minimales Blockieren

**Was wird blockiert:**
- `rm -rf /` und Varianten
- Force Pushes zu geschützten Branches
- Datenbankdropps ohne Bestätigung
- Massen-Dateienlöschungen

Siehe [Schadenkontrolle](/features/damage-control) für vollständige Dokumentation.

---

### Konfiguration überprüfen

**Agent**: `configuration-verify`

Überprüft, dass die gesamte AgileFlow-Konfiguration korrekt und funktionsfähig ist.

**Was wird überprüft:**
- Hooks-System ordnungsgemäß konfiguriert
- Erforderliche Verzeichnisse vorhanden
- Scripts sind ausführbar
- JSON-Dateien sind gültig
- Git-Hooks sind installiert

## Verwendung

### Interaktive Konfiguration

```bash
/agileflow:configure
```

Sie sehen Optionen wie:
```
Welche Funktion möchten Sie konfigurieren?

1. Hooks System (empfohlen)
2. Auto-Archivierung
3. Git Attribution
4. Status Line
5. CI Pipeline
6. Schadenkontrolle
7. Konfiguration überprüfen
```

### Direkte Agent-Aufrufe

Sie können Konfiguration Agents auch direkt über das Task Tool aufrufen:

```javascript
Task(
  description: "Configure hooks system",
  prompt: "Set up the hooks system with SessionStart and PreCompact",
  subagent_type: "configuration-hooks"
)
```

## Konfigurationsdateien

### .claude/settings.json

Hauptdatei für Hooks-Konfiguration. Committed zu Git.

```json
{
  "hooks": {
    "SessionStart": [{
      "matcher": "",
      "hooks": [{
        "type": "command",
        "command": "node scripts/agileflow-welcome.js"
      }]
    }],
    "PreCompact": [{
      "matcher": "",
      "hooks": [{
        "type": "command",
        "command": "bash scripts/precompact-context.sh"
      }]
    }]
  }
}
```

### docs/00-meta/agileflow-metadata.json

Funktions-Konfiguration und Versions-Nachverfolgung.

```json
{
  "version": "2.78.0",
  "created": "2025-01-01T00:00:00Z",
  "updated": "2025-01-09T00:00:00Z",
  "archival": {
    "threshold_days": 30,
    "enabled": true
  },
  "features": {
    "hooks": {
      "enabled": true,
      "configured_version": "2.41.0"
    },
    "precompact": {
      "enabled": true,
      "configured_version": "2.40.0"
    }
  }
}
```

### .claude/settings.local.json

Benutzerspezifische Overrides. Gitignored.

```json
{
  "env": {
    "USER_NAME": "Your Name"
  }
}
```

## Best Practices

### 1. Mit Hooks System beginnen

Das Hooks-System ist grundlegend. Konfigurieren Sie es zuerst, dann fügen Sie andere Funktionen hinzu.

```bash
/agileflow:configure
# Select: Hooks System
```

### 2. Auto-Archivierung frühzeitig aktivieren

Aktivieren Sie für Projekte mit vielen Stories Auto-Archivierung, um zu verhindern, dass status.json zu groß wird.

### 3. Nach der Konfiguration neu starten

Die meisten Konfigurationsänderungen erfordern einen Neustart von Claude Code:

```
STARTEN SIE CLAUDE CODE JETZT NEU!
Beenden Sie komplett (Cmd+Q), warten Sie 5 Sekunden, starten Sie neu
Hooks werden NUR beim Start geladen!
```

### 4. Konfiguration überprüfen

Nach Änderungen führen Sie Überprüfung aus:

```bash
/agileflow:configure
# Select: Verify Configuration
```

### 5. Scripts manuell testen

Bevor Sie sich auf Hooks verlassen, testen Sie Scripts manuell:

```bash
# Test welcome display
node scripts/agileflow-welcome.js

# Test context preservation
bash scripts/precompact-context.sh

# Test session wrap-up
bash scripts/agileflow-stop.sh
```

## Troubleshooting

### Hooks werden nicht ausgeführt

1. Überprüfen Sie, dass `.claude/settings.json` existiert und gültiges JSON ist
2. Überprüfen Sie das Hooks-Array-Format (muss `matcher` + `hooks` Format sein)
3. Starten Sie Claude Code komplett neu

### Altes Format erkannt

Wenn Sie "Altes Hooks-Format erkannt" sehen, verwendet Ihre settings.json das veraltete Format. Führen Sie `/agileflow:configure` → Hooks System aus, um zu migrieren.

### Scripts nicht gefunden

Stellen Sie sicher, dass Scripts im korrekten Ort sind:
- `scripts/agileflow-welcome.js`
- `scripts/precompact-context.sh`
- `scripts/get-env.js`

### Genehmigung verweigert

Machen Sie Scripts ausführbar:
```bash
chmod +x scripts/*.js scripts/*.sh
```

## Verwandte Dokumentation

- [Hooks System Architecture](/features/hooks-system) - Ausführliche Hooks-Dokumentation
- [Compact Context](/features/compact-context) - Kontext-Erhaltung
- [Schadenkontrolle](/features/damage-control) - Schutzsystem
- [`/agileflow:configure`](/commands/configure) - Konfiguration Befehl
