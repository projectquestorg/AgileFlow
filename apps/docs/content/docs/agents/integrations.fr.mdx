---
title: Intégrations
description: Spécialiste de l'intégration d'API tierces, de webhooks, de processeurs de paiement, de services externes et de connectivité API.
---
# Spécialiste de l'intégration

AG-INTEGRATIONS gère toutes les intégrations de services tiers, des processeurs de paiement et fournisseurs d'authentification aux webhooks et à la synchronisation des données avec des API externes.

## Capacités

- **Implémentation du client API** : Stripe, Twilio, SendGrid, AWS, Google et d'autres services
- **Webhook Handling** : validation de signature, idempotence, traitement des événements
- **Fournisseurs d'authentification** : Auth0, OAuth (Google, GitHub, Facebook), AWS Cognito
- **Traitement des paiements** : Stripe, Square, PayPal avec gestion des webhooks
- **Diffusion par e-mail** : intégrations SendGrid, Mailgun, AWS SES
- **Gestion des erreurs et logique de nouvelle tentative** : interruption exponentielle, limitation du débit, dégradation progressive
- **Contrôles de santé et surveillance** : suivi de l'état des services externes

## Quand l'utiliser

Utilisez AG-INTEGRATIONS lorsque :

- Intégration d'API tierces (Stripe, Twilio, SendGrid, etc.)
- Mise en place de fournisseurs d'authentification (Auth0, Google OAuth)
- Implémentation de récepteurs et de gestionnaires de webhooks
- Création du processus de paiementflux sortants
- Gérer les pannes de services externes avec élégance
- Implémentation d'une logique de nouvelle tentative avec interruption exponentielle
- Mise en place d'une veille sanitaire pour les services externes

## Comment ça marche

1. **Chargement du contexte** : lit le fichier d'expertise et les intégrations existantes
2. **Recherche de services** : examine la documentation, les prix, les limites de débit, l'authentification
3. **Implémentation client** : crée un client API avec une authentification appropriée
4. **Gestion des erreurs** : implémente une gestion complète des erreurs et une logique de nouvelle tentative
5. **Configuration du Webhook** : valide les signatures, implémente l'idempotence
6. **Tests** : crée des tests d'intégration avec des services externes simulés
7. **Surveillance** : configure des contrôles de santé et des alertes

## Exemple

```bash
# Via /babysit
/agileflow:babysit
> "I need to add Stripe payments with webhook handling"

# AG-INTEGRATIONS will:
# 1. Research Stripe API and webhook events
# 2. Implement Stripe API client with authentication
# 3. Create webhook receiver with signature validation
# 4. Implement retry logic for failed charges
# 5. Create integration tests (mocked Stripe)
# 6. Document setup and webhook events
```

## Comportements clés

- **Ne jamais coder en dur les secrets** : utilise toujours des variables d'environnement pour les clés API
- **Valide les Webhooks** : la validation de la signature est obligatoire (empêche l'usurpation d'identité)
- **Gère toutes les erreurs** : erreurs de réseau, de délai d'attente, de limite de débit et de service
- **Implémente une logique de nouvelle tentative** : Eintervalle xponentiel avec gigue
- **Journalisation sécurisée** : n'enregistre jamais les informations d'identification ni les données sensibles
- **Dégradation gracieuse** : fournit une solution de repli si le service externe n'est pas disponible

## Outils disponibles

- Lire, écrire, modifier, Bash, Glob, Grep
- Accès à Session Harness pour vérification

## Intégrations courantes

**Traitement des paiements** :
- Stripe - Paiements, abonnements, paiements
- Square - Point de vente
- PayPal - Paiements, abonnements

**Authentification** :
- Auth0 - Authentification d'entreprise
- Google OAuth - Connexion sociale
- GitHub OAuth - Connexion développeur

**Envoi par e-mail** :
- SendGrid - E-mail transactionnel
- Mailgun - Envoi d'e-mails
- AWS SES - E-mail économique

**SMS/Messagerie** :
- Twilio - SMS, voix, messagerie
- AWS SNS - Livraison des messages
- Messagerie Cloud Firebase - Notifications push

**Stockage de fichiers** :
-AWS S3-Stockage cloud
- Google Cloud Storage - Stockage cloud
- Stockage Blob Azure - Stockage cloud

## Modèle d'intégration

```javascript
// 1. Create client with auth
const client = new StripeClient(process.env.STRIPE_API_KEY);

// 2. Make authenticated request
const payment = await client.payments.create({
  amount: 10000,
  currency: 'usd',
});

// 3. Handle errors
if (payment.error) {
  logger.error('Payment failed', {
    error: payment.error,
    // Never log sensitive data
  });
  // Implement retry or fallback
}
```

## Sécurité des webhooks

**Exigence critiquesexe :
- Valider la signature du webhook (empêcher l'usurpation d'identité)
- Répondez immédiatement avec 200 OK (confirmer la réception)
- Traiter de manière asynchrone (ne bloque pas la réponse)
- Gérer les doublons (les webhooks peuvent être réessayés)

## Stratégie de gestion des erreurs

- Identifier les erreurs récupérables (réseau, timeout, 5xx)
- Implémenter un recul exponentiel avec gigue
- Définir le nombre maximum de tentatives
- Enregistrer les échecs et alerter en cas de persistance
- Mettre en œuvre une dégradation gracieuse

## Liste de contrôle qualité

Avant de marquer le travail d’intégration terminé :

- L'authentification du service fonctionne
- Appels API testés et fonctionnels
- Toutes les erreurs traitées (réseau, timeout, limite de débit)
- Logique de nouvelle tentative avec interruption exponentielle implémentée
- Webhooks validés (vérification de signature)
- Webhooks idempotents (gérer les doublons)
- Clés API dans les variables d'environnement (jamais codées en dur)
- La journalisation des erreurs n'expose pas les secrets
- Les tests d'intégration couvrent le chemin heureux + les scénarios d'erreur
- Documentation complète (installation, authentification, configuration)
- Bilan de santé ou surveillance en place
- Réussite des testsg avec test_status : "réussite"

## Agents associés

- [AG-API](/agents/api) - Intégration de la couche de service et points de terminaison
- [AG-SECURITY](/agents/security) - Gestion sécurisée des identifiants
- [AG-MONITORING](/agents/monitoring) - Contrôles de santé et alertes

## Messages de coordination

AG-INTEGRATIONS se coordonne avec d’autres équipes :

```json
{
  "ts": "2025-10-21T10:00:00Z",
  "from": "AG-INTEGRATIONS",
  "type": "status",
  "story": "US-0040",
  "text": "Stripe integration ready, AG-API can now implement payment endpoint"
}
```

## Commandes barre oblique

- `/agileflow:research:ask TOPIC=...` – Meilleures pratiques en matière de services de recherche
- `/agileflow:ai-code-review` - Vérifier le code d'intégration pour des raisons de sécurité
- `/agileflow:adr-new` - Documenter les décisions de choix d'intégration
- `/agileflow:tech-debt` - Gestion des erreurs de document manquant
- `/agileflow:status STORY=... STATUS=...` - Mettre à jour le statut de l'histoire