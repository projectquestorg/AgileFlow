---
title: أداء
description: متخصص في الأداء للتحسين والتوصيف وقياس الأداء وقابلية التوسع والميزات المهمة للأداء.
---
# وكيل الأداء

وكيل الأداء (AG-PERFORMANCE) هو متخصص في تحسين الأداء يحدد الاختناقات ويحسن المسارات الحرجة ويضمن تلبية التطبيقات لأهداف الأداء. يركز هذا العامل على تحسين القياس أولاً، وليس على التخمين المبكر.

## القدرات

- **توصيف الأداء**: حدد الاختناقات الفعلية باستخدام أدوات التوصيف
- **إنشاء المعايير**: قياس الأداء قبل وبعد التحسينات
- **تحسين قاعدة البيانات**: إزالة استعلامات N+1، وإضافة الفهارس، وتحسين الاستعلامات
- **استراتيجيات التخزين المؤقت**: تنفيذ التخزين المؤقت في الذاكرة، وRedis، وCDN، وHTTP
- **تحسين الواجهة الأمامية**: تقليل حجم الحزمة، وتقسيم التعليمات البرمجية، والتحميل البطيء
- **تحسين واجهة برمجة التطبيقات**: تقليل أوقات الاستجابة، والتخلص من العمليات باهظة الثمن
- **اختبار التحميل**: اختبار حدود قابلية التوسع والعثور على نقاط التوقف
- **مراقبة الأداء**: قم بإعداد تنبيهات لتراجعات الأداء
- **تحليل قابلية التوسع**: فهم كيفية تحجيم النظام مع الحمل
- ** التوثيقn**: إنشاء ADRs لمقايضات الأداء

## متى يستخدم

استخدم وكيل الأداء عندما:

- أوقات الاستجابة بطيئة وتحتاج إلى التحسين
- استعلامات قاعدة البيانات بطيئة أو توجد مشكلات N+1
- حجم حزمة الواجهة الأمامية كبير
- الحاجة إلى اختبار حدود قابلية التوسع
- استخدام الذاكرة مرتفع أو متزايد
- تتجاوز نقاط نهاية API أهداف الأداء
- الحاجة إلى تنفيذ استراتيجيات التخزين المؤقت
- وضع خطوط الأساس للأداء
- إنشاء مراقبة الأداء والتنبيهات
- الحاجة إلى توثيق قرارات الأداء

## كيف يعمل

1. **تحميل المعرفة**: يقرأ الوكيل أهداف الخبرة والأداء
2. **التحليل**: يقوم الوكيل بمراجعة القصة لمعرفة الآثار المترتبة على الأداء
3. **التوصيف**: يقوم الوكيل بقياس الأداء الحالي باستخدام الأدوات المناسبة
4. **تحديد عنق الزجاجة**: يجد الوكيل المكان الذي يقضي فيه الوقت فعليًا
5. ** تصميم التحسين **: يخطط الوكيل لأساليب تحسين متعددة
6. **التنفيذ**: يقوم الوكيل بتنفيذ التحسين من خلال القياسات
7. **قياس الأداء**: يتحقق الوكيل من التحسينيلبي الهدف
8. **التوثيق**: يقوم الوكيل بإنشاء ADR لتوثيق المقايضات
9. **المراقبة**: يقوم الوكيل بإعداد تنبيهات لتراجعات الأداء

## مثال

__لا تترجم_0__

## السلوكيات الرئيسية

- **القياس أولاً**: رمز الملف الشخصي للعثور على الاختناقات الفعلية (لا تخمن)
- **قياس الأداء قبل/بعد**: قم دائمًا بقياس التحسن
- **لا يوجد تحسين سابق لأوانه**: لا تقم بتحسين التعليمات البرمجية التي نادرًا ما تستخدم
- **الصواب أولاً**: لا تضحي أبدًا بالصواب من أجل الأداء
- **وثيقة المقايضات**: سجل سبب اتخاذ القرارات
- **التحقق من التحميل**: اختبار الأداء تحت الحمل الواقعي

## الأدوات المتاحة

- القراءة والكتابة والتحرير (عمليات الملف)
- باش (تشغيل اختبارات التوصيف/التحميل)
- Glob (ابحث عن الكود البطيء)
- Grep (البحث عن مشكلات الأداء)

## مقاييس الأداء

**المقاييس الرئيسية**:
- **زمن الاستجابة (زمن الوصول)**: ما المدة التي تستغرقها العملية؟
- **الإنتاجية**: كم عدد العمليات في الثانية؟
- **استخدام الموارد**: وحدة المعالجة المركزية، الذاكرة، القرص، الشبكة
- **قابلية التوسع**: كيف يتم قياس الأداء مع الحمل؟

** صأهداف الأداء** (يمكن ضبطها حسب السياق):
- نقاط نهاية API: أقل من 200 مللي ثانية في المتوسط، وأقل من 500 مللي ثانية في صفحة 95
- تحميل صفحة الواجهة الأمامية: أقل من ثانيتين من الطلاء الأول، وأقل من 5 ثوانٍ من التحميل الكامل
- استعلامات قاعدة البيانات: أقل من 10 مللي ثانية في المتوسط، وأقل من 100 مللي ثانية، صفحة 95
- الذاكرة: مستقرة، لا يوجد بها تسريبات، نمو متوقع

## أدوات التنميط

**جافا سكريبت/Node.js**:
- Chrome DevTools: ملف تعريف الأداء المدمج
- ملف تعريف Node.js: `node --prof`
-clinic.js: أداة التنميط المهنية
- المدفع الآلي: اختبار تحميل HTTP
- الرسوم البيانية اللهبية: تصور الوقت الذي يقضيه في كل وظيفة

**بايثون**:
- cProfile: ملف تعريف وحدة المعالجة المركزية
- Memory_profiler: تحليل استخدام الذاكرة
- py-spy: ملف تعريف العينات الإحصائية

**قاعدة البيانات**:
- شرح التحليل: خطة الاستعلام ووقت التنفيذ
- سجل الاستعلام البطيء: التقاط الاستعلامات التي تتجاوز العتبة
- المراقبة: تتبع عدد الاستعلامات والوقت واستخدام الموارد

**الواجهة الأمامية**:
- أدوات تطوير Chrome: الأداء، وعلامات تبويب الشبكة
- المنارة : تدقيق الأداء
- مؤشرات أداء الويب: المقاييس الأساسية (LCP، FID، CLS)

## الاختناقات والحلول الشائعة

| عنق الزجاجة | سبب| الحل |
|------------|------|----------|
| قاعدة بيانات | استعلامات N+1، فهارس مفقودة، | غير محسّنة استخدم JOIN، وأضف الفهارس، وقم بإلغاء تسوية |
| استجابة API | نقاط النهاية بطيئة، مكالمات خارجية | ذاكرة التخزين المؤقت، وتحسين الاستعلامات، وموازاة |
| عرض الواجهة الأمامية | إعادة التدفق، إعادة الطلاء، الحزم الكبيرة | تقسيم الكود، التحميل البطيء، الضغط |
| الذاكرة | تسرب الذاكرة، وهياكل البيانات الكبيرة | إصلاح التسريبات، وترقيم مجموعات البيانات الكبيرة |
| وحدة المعالجة المركزية | خوارزميات باهظة الثمن، عمل غير ضروري | تحسين الخوارزمية، الموازاة |

## تقنيات التحسين

** تحسين قاعدة البيانات **:
__لا تترجم_1__

**استراتيجيات التخزين المؤقت**:
- **ذاكرة التخزين المؤقت في الذاكرة**: حجم سريع ولكن محدود (Redis)
- **ذاكرة التخزين المؤقت لـ CDN**: الأصول الثابتة في مواقع التخزين المؤقت
- **HTTP ذاكرة التخزين المؤقت**: ذاكرة التخزين المؤقت للمتصفح مع ETag، آخر تعديل
- **ذاكرة التخزين المؤقت لقاعدة البيانات**: ذاكرة التخزين المؤقت لنتائج الاستعلام

** تحسين الواجهة الأمامية **:
__لا تترجم_2__

## اختبار التحميل

**سيناريوهات اختبار التحميل**:
- **الرفع**: قم بزيادة الحمل تدريجيًا للعثور على نقطة الانهيار
- **مستدام**: حمل ثابت مع مرور الوقت- **سبايك**: زيادة مفاجئة في الحمل
- **اختبار النقع**: حمل مستمر لفترة طويلة

** المقاييس المراد التقاطها **:
- توزيع وقت الاستجابة (متوسط، ص50، ص95، ص99)
- الإنتاجية (الطلبات/الثانية)
- معدل الخطأ (% من الطلبات الفاشلة)
- استخدام الموارد (وحدة المعالجة المركزية، الذاكرة، الشبكة)

## تحليل قابلية التوسع

نظام الاختبار تحت الحمل المتزايد:

__لا تترجم_3__

## تكامل تسخير الجلسة

يتكامل وكيل الأداء مع Session Harness:

__لا تترجم_4__

## قائمة التحقق من الجودة

قبل وضع علامة على اكتمال العمل:

- [ ] قياس الأداء الحالي وتوثيقه
- [ ] تم تحديد عنق الزجاجة من خلال بيانات ملفات التعريف
- [ ] فهم السبب الجذري
- [ ] توثيق استراتيجية التحسين
- [ ] قبل/بعد أخذ القياسات
- [ ] التحسين يلبي هدف الأداء
- [ ] تم التحقق من الصحة (لا تزال الاختبارات تمر)
- [ ] توثيق المقايضات
- [ ] المراقبة/التنبيهات موجودة
- [ ] تمت إضافة مقاييس الأداء إلى الوثائق

## وضع الخطة (مطلوب للتحسين)

يتطلب تحسين الأداء القياس-التخطيط الأول:

| الوضع | العمل |
|-----------|--------|
| "اجعله أسرع" (غامض) | → EnterPlanMode: الملف الشخصي أولاً! |
| عملية بطيئة معروفة | → EnterPlanMode: تحسين التصميم |
| التخزين المؤقت مطلوب | → EnterPlanMode: إبطال الخطة |
| تحسين الاستعلام | → EnterPlanMode: القياس قبل/بعد |
| مشكلة حجم الحزمة | → EnterPlanMode: تحليل التبعيات |

** سير عمل وضع الخطة **:
1. ملف الأداء الحالي
2. تحديد عنق الزجاجة الفعلي
3. تحسين التصميم باستخدام المعايير
4. خطة استراتيجية التحقق
5. الحصول على الموافقة
6. التنفيذ والقياس والتحقق

## الوكلاء ذوو الصلة

- [`database`](/agents/database) - تحسين الاستعلامات والفهارس
- [`api`](/agents/api) - تحسين وقت استجابة واجهة برمجة التطبيقات
- [`ui`](/agents/ui) - أداء الواجهة الأمامية وتقسيم التعليمات البرمجية
- [`devops`](/agents/devops) - أداء البنية التحتية وتوسيع نطاقها
- [`testing`](/agents/testing) - أتمتة اختبار الأداء

## التنسيق

الأداء أالإحداثيات اللطيفة مع:

- **AG-DATABASE**: تحديد الاستعلامات البطيئة ومراجعة الفهارس
- **AG-API**: أداء نقطة نهاية الملف الشخصي
- **AG-UI**: تحليل اختناقات الواجهة الأمامية
- **AG-DEVOPS**: طلب المراقبة وتنسيق القياس
- **فريق المراقبة**: إعداد تنبيهات الأداء

## أوامر القطع

- `/agileflow:research:ask TOPIC=...` - تقنيات تحسين البحث
- `/agileflow:ai-code-review` - قم بمراجعة التعليمات البرمجية لمشاكل الأداء
- `/agileflow:adr-new` - توثيق قرارات الأداء
- `/agileflow:tech-debt` - توثيق دين الأداء
- `/agileflow:impact-analysis` - تحليل تأثير الأداء
- `/agileflow:status STORY=... STATUS=...` - تحديث حالة القصة

## مبادئ الأداء

- **القياس، لا التخمين**: يكشف التنميط عن الاختناقات الفعلية
- **التحسين المبكر شر**: قم بالتحسين حيثما كان ذلك مهمًا
- **الهدف 80/20**: إصلاح المشكلات التي تؤثر على 80% من التأثير
- **تحسين الأسوأ أولاً**: معالجة أكبر عنق الزجاجة أولاً
- **التحقق مع التحميل**: اختبار في ظل ظروف تحميل واقعية
- **المراقبة دائمًا**: إعداد تنبيهات للتراجعات