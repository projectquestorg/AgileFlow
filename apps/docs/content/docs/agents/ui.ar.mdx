---
title: واجهة المستخدم
description: متخصص في طبقة واجهة المستخدم/العرض التقديمي لتنفيذ مكونات الواجهة الأمامية والتصميم وإمكانية الوصول وتجربة المستخدم.
---

# وكيل واجهة المستخدم

وكيل واجهة المستخدم (AG-UI) هو متخصص الواجهة الأمامية لديك. وهو يطبق المكونات سريعة الاستجابة، وأنظمة التصميم، ورموز التصميم، وميزات إمكانية الوصول (WCAG 2.1 AA)، ويطبق مبادئ علم نفس تجربة المستخدم لإنشاء واجهات جميلة وقابلة للاستخدام.

## القدرات

- إنشاء مكونات سريعة الاستجابة (320 بكسل إلى 1920 بكسل+)
- تنفيذ أنظمة التصميم بالرموز (الألوان، المسافات، الطباعة)
- ضمان إمكانية الوصول إلى WCAG 2.1 AA (التنقل عبر لوحة المفاتيح، وقارئات الشاشة، والتباين)
- تطبيق قوانين تجربة المستخدم (Jakob's، Hick's، Fitts's، Gestalt، Von Restorff، Peak-End، Doherty)
- كتابة اختبارات المكونات (الوحدة، التكامل، إمكانية الوصول باستخدام محور المحور)
- التصميم باستخدام التصميم المحمول أولاً
- التكامل مع نقاط نهاية API
- إنشاء السمات ودعم الوضع المظلم
- الحفاظ على اتساق التصميم عبر التطبيق
- كتابة نسخة مصغرة ونص المساعدة

## متى تستخدم

استخدم وكيل واجهة المستخدم عندما:

- تحتاج إلى تنفيذ مكون أو ميزة جديدة
- تحتاج إلى إنشاء نظام تصميم أو رموز تصميم
- تريد تحسين إمكانية الوصول (التنقل عبر لوحة المفاتيح، قارئات الشاشة)
- تحتاج إلى جعل واجهة المستخدم سريعة الاستجابة عبر نقاط التوقف
- تريد تطبيق أفضل ممارسات تجربة المستخدم والمبادئ النفسية
- تحتاج إلى دمج المكونات مع نقاط نهاية API
- تحتاج إلى كتابة اختبارات المكونات الشاملة
- تريد تحسين الأداء المتصور وتعليقات المستخدمين

## كيف يعمل

1. **Context Loading**: يقرأ الوكيل الخبرة وCLAUDE.md ومستندات نظام التصميم
2. **Design System Check**: يتحقق الوكيل من وجود نظام التصميم (القصة الأولى فقط)
3. **Status Check**: يجد الوكيل قصصًا جاهزة ويتحقق من أدوات حظر واجهة برمجة التطبيقات
4. **Definition of Ready**: يقوم الوكيل بالتحقق من صحة معايير القبول وكعب الاختبار
5. **Plan Mode**: بالنسبة للميزات المعقدة، يقوم الوكيل بتصميم هيكل المكونات
6. **Implementation**: يقوم الوكيل ببناء المكونات باستخدام رموز التصميم
7. **Accessibility**: يضمن الوكيل دعم التنقل في لوحة المفاتيح وقارئ الشاشة
8. **UX Laws**: يطبق الوكيل المبادئ النفسية من أبحاث تجربة المستخدم
9. **Testing**: يقوم الوكيل بكتابة اختبارات الوحدة والتكامل وإمكانية الوصول
10. **Verification**: يجري الوكيل اختبارات لضمان اجتياز خط الأساس

## مثال

```bash
# Via /babysit (recommended)
/agileflow:babysit
> "I need to implement a user profile page"
```

سيقوم وكيل واجهة المستخدم بما يلي:
1. التحقق من نظام التصميم (قم بإنشائه إذا كان مفقودًا)
2. ابحث عن تبعية واجهة برمجة التطبيقات (GET /api/users/:id)
3. مكونات التصميم:
   - بطاقة الملف الشخصي (يعرض معلومات المستخدم)
   - نموذج الملف الشخصي (تحرير معلومات المستخدم)
   - تحميل الصورة الرمزية (تغيير الصورة الرمزية)
4. التنفيذ باستخدام رموز التصميم:
   - الألوان من نظام التصميم (بدون #ألوان مضمنة)
   - التباعد من مقياس الرمز المميز (بدون ترميز 16 بكسل)
   - الطباعة من نظام التصميم
5. ضمان إمكانية الوصول:
   - التنقل عبر لوحة المفاتيح (الانتقال عبر حقول النموذج)
   - قارئ الشاشة (تسميات النماذج المرتبطة)
   - تباين الألوان (4.5:1 للنص)
6. تطبيق قوانين تجربة المستخدم:
   - جاكوب: تخطيط النموذج المألوف
   - الملاءمة: أهداف لمس كبيرة (44 بكسل +)
   - نهاية الذروة: الرسوم المتحركة الناجحة عند الحفظ
7. اختبارات الكتابة (الوحدة + التكامل + إمكانية الوصول)
8. ضع علامة في المراجعة عند اجتياز الاختبارات

أو تفرخ مباشرة:

```text
Task(
  description: "Implement product card component",
  prompt: "Create reusable card for products with image, price, rating. Mobile-first design.",
  subagent_type: "agileflow-ui"
)
```

## السلوكيات الرئيسية

- **Load Expertise First**: يقرأ Expert.yaml قبل أي عمل
- **Design System Proactive**: التحقق من نظام التصميم في القصة الأولى، ويتم إنشاؤه إذا كان مفقودًا
- **Refactor to Tokens**: عروض لترحيل الأنماط المضمنة إلى نظام التصميم
- **Mobile-First**: الأنماط الأساسية للجوال (320 بكسل)، ثم تضيف نقاط توقف للأعلى
- **Accessibility Default**: يتضمن كل مكون دعم التنقل في لوحة المفاتيح وقارئ الشاشة
- **UX Laws Applied**: يستخدم المبادئ النفسية (القرب، التباين، الإمكانيات)
- **Token Usage**: تستخدم جميع الأنماط الرموز المميزة للتصميم، وليس القيم المضمنة أبدًا
- **Session Harness Integration**: التحقق من حالة الاختبار قبل البدء، ويتطلب اجتياز الاختبارات
- **Autonomous Commands**: يستدعي /agileflow مباشرة: تحليل التأثير، /agileflow:adr-new، وما إلى ذلك.
- **Bus Coordination**: يرسل رسالة محظورة إلى AG-API في حالة فقدان نقطة النهاية
- **README Updates**: يقوم بتحديث الوثائق بشكل استباقي بعد إجراء تغييرات كبيرة
- **Context Preservation**: يستخدم Compact_context (الأولوية: عالية) للحفاظ على التركيز أثناء المحادثات الطويلة، والحفاظ على اكتشاف نظام التصميم وتتبع تبعية واجهة برمجة التطبيقات (API) من خلال ضغط السياق

## تكوين السياق المضغوط

يستخدم وكيل واجهة المستخدم **high priority** Compact_context لضمان بقاء تبعيات نظام التصميم وواجهة برمجة التطبيقات (API) موضع التركيز:

```yaml
compact_context:
  priority: high
  preserve_rules:
    - "LOAD EXPERTISE FIRST: Always read packages/cli/src/core/experts/ui/expertise.yaml"
    - "CHECK DESIGN SYSTEM FIRST: Detect if design tokens exist; create if missing"
    - "VERIFY SESSION HARNESS: Check environment.json and test_status baseline"
    - "ONLY in-review if tests pass: test_status:passing required"
    - "CHECK FOR API DEPENDENCIES: Search status.json for blocked UI stories"
    - "APPLY UX LAWS: Jakob's, Hick's, Fitts's, Gestalt, Von Restorff, Peak-End, Doherty"
    - "ACCESSIBILITY REQUIRED: WCAG 2.1 AA minimum"
  state_fields:
    - current_story
    - design_system_status
    - api_dependencies
    - test_status_baseline
```

وهذا يضمن استمرار القواعد المهمة لواجهة المستخدم (الكشف عن نظام التصميم، ومعايير إمكانية الوصول، والتحقق من مانع واجهة برمجة التطبيقات) والحالة الحالية (أي رموز التصميم الموجودة، وما هي نقاط نهاية واجهة برمجة التطبيقات المطلوبة) من خلال ضغط السياق.

## الأدوات المتاحة

هذا الوكيل لديه حق الوصول إلى: القراءة، الكتابة، التحرير، Bash، Glob، Grep

## رموز نظام التصميم

يتضمن النظام المصمم جيدًا ما يلي:

```typescript
// Colors
export const colors = {
  primary: '#3b82f6',
  primaryHover: '#2563eb',
  text: '#1f2937',
  textSecondary: '#6b7280',
  background: '#ffffff',
  error: '#ef4444',
  success: '#10b981',
};

// Spacing (8px scale)
export const spacing = {
  xs: '0.25rem',  // 4px
  sm: '0.5rem',   // 8px
  md: '1rem',     // 16px
  lg: '1.5rem',   // 24px
  xl: '2rem',     // 32px
};

// Typography
export const typography = {
  fontFamily: {
    base: 'system-ui, -apple-system, sans-serif',
    mono: '"Courier New", monospace',
  },
  fontSize: {
    xs: '0.75rem',   // 12px
    sm: '0.875rem',  // 14px
    base: '1rem',    // 16px
    lg: '1.125rem',  // 18px
    xl: '1.25rem',   // 20px
  },
};

// Breakpoints
export const breakpoints = {
  sm: '640px',
  md: '768px',
  lg: '1024px',
  xl: '1280px',
};
```

## قائمة التحقق من إمكانية الوصول

الحد الأدنى WCAG 2.1 AA لجميع المكونات:

**Keyboard Navigation**:
- ترتيب علامات التبويب منطقي ومرئي
- يمكن الوصول إلى جميع العناصر التفاعلية عبر علامة التبويب
- زر الإدخال/المسافة ينشط
- الهروب يغلق الوسائط
- مفاتيح الأسهم تتنقل بين القوائم

**Screen Readers**:
- HTML الدلالي (`<button>`, `<nav>`, `<main>`, `<article>`)
- نص بديل للصور (وصفي، وليس زخرفي)
- تسمية aria لأزرار الأيقونات فقط
- aria-live للتحديثات الديناميكية
- تسميات النماذج المرتبطة (ل= السمة)

**Color & Contrast**:
- تباين النص: 4.5:1 كحد أدنى
- تباين مكونات واجهة المستخدم: 3:1 كحد أدنى
- لا تعتمد على اللون وحده (خطأ = أحمر + أيقونة + نص)
- اختبار مع محاكاة عمى الألوان

## قوانين ومبادئ تجربة المستخدم

**Jakob's Law**: يتوقع المستخدمون أنماطًا مألوفة
- استخدم التنقل القياسي (الشعار في أعلى اليسار، والبحث في أعلى اليمين)
- تخطيطات النموذج والتفاعلات المألوفة
- لا تبتكر على مستوى التفاعل الجزئي

**Hick's Law**: المزيد من الخيارات = قرارات أبطأ
- تصغير الخيارات على الشاشات المهمة
- قسم المهام المعقدة إلى خطوات
- استخدم المرشحات/ابحث عن قوائم كبيرة

**Fitts's Law**: المسافة + الحجم تؤثر على الوقت المستهدف
- اللمس يستهدف الحد الأدنى 44 × 44 بكسل (الجوال)، 40 × 40 بكسل (سطح المكتب)
- مسافة كافية بين العناصر القابلة للنقر
- إجراءات مهمة في متناول اليد على الهاتف المحمول

**Gestalt Principles**: يقوم البشر بتجميع العناصر المرئية
- القرب: مجموعة العناصر المرتبطة ببعضها البعض
- التشابه: نفس اللون/الشكل/الحجم = نفس الفئة
- المنطقة المشتركة: يتم تجميع العناصر الموجودة في الحدود
- الحمل: استخدم أبسط شكل مرئي

**Von Restorff Effect**: العناصر المميزة تبرز
- تبرز عبارة CTA أساسية واحدة لكل شاشة
- الباقي على الطراز الثانوي / العالي
- نمط Netflix: الأزرار الحمراء للإجراءات الأساسية فقط

**Peak-End Rule**: يتذكر المستخدمون القمم والنهايات
- خلق لحظات لا تنسى في حالات النجاح
- اجعل النهايات مبهجة (احتفل بالانتصارات)
- Instagram: الرسوم المتحركة للقلب هي ردود فعل فورية

**Doherty Threshold**: استجابة Sub-400ms تبدو مسببة للإدمان
- تقديم تعليقات مرئية فورية (أقل من 400 مللي ثانية)
- استخدم واجهة المستخدم المتفائلة (إظهار النتيجة قبل تأكيد الخادم)
- شاشات الهيكل العظمي أثناء التحميل
- لا تجعل المستخدمين ينتظرون أبدًا بدون تعليقات

**Tesler's Law**: لا يمكن التخلص من التعقيد، بل يتم نقله فقط
- استيعاب التعقيد في النظام، وليس المستخدم
- تعبئة الحقول تلقائيًا من السياق
- تعمل الإعدادات الافتراضية الذكية على تقليل القرارات
- أقترح على أساس التاريخ

## معايير الاختبار

يحتاج كل مكون إلى اختبارات شاملة:

```typescript
// Unit test (component logic)
test('Button renders with correct label', () => {
  const { getByText } = render(<Button>Click me</Button>);
  expect(getByText('Click me')).toBeInTheDocument();
});

// Integration test (user flow)
test('Form submits with valid data', async () => {
  const { getByLabelText, getByRole } = render(<UserForm />);
  const emailInput = getByLabelText('Email');
  const submitBtn = getByRole('button', { name: /submit/i });

  fireEvent.change(emailInput, { target: { value: 'test@example.com' } });
  fireEvent.click(submitBtn);

  await waitFor(() => {
    expect(mockSubmit).toHaveBeenCalled();
  });
});

// Accessibility test (axe-core)
test('Button meets accessibility standards', async () => {
  const { container } = render(<Button>Click me</Button>);
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

## النهج المحمول الأول

**Base Styles** (الجوال - 320 بكسل):

```css
.card {
  padding: var(--spacing-md);
  font-size: var(--font-size-base);
  grid-template-columns: 1fr; /* Single column */
}
```

**Tablet Breakpoint** (768بكسل+):

```css
@media (min-width: 768px) {
  .card {
    padding: var(--spacing-lg);
    grid-template-columns: 1fr 1fr; /* 2 columns */
  }
}
```

**Desktop Breakpoint** (1024 بكسل+):

```css
@media (min-width: 1024px) {
  .card {
    padding: var(--spacing-xl);
    grid-template-columns: repeat(3, 1fr); /* 3 columns */
  }
}
```

## نقاط التوقف المستجيبة

- **Mobile**: 320 بكسل إلى 639 بكسل (الأنماط الأساسية)
- **Tablet**: 640 بكسل إلى 1023 بكسل (@العرض الأدنى للوسائط: 640 بكسل)
- **Desktop**: 1024 بكسل إلى 1279 بكسل (@العرض الأدنى للوسائط: 1024 بكسل)
- **Large Desktop**: 1280 بكسل + (@ الحد الأدنى لعرض الوسائط: 1280 بكسل)

## الملفات الرئيسية

- **Expertise**: `packages/cli/src/core/experts/ui/expertise.yaml` (ذاكرة الوكيل)
- **Workflow**: `packages/cli/src/core/experts/ui/workflow.md` (الخطة ← البناء ← التحسين الذاتي)
- **Status**: `docs/09-agents/status.json` (تتبع القصة)
- **Bus**: `docs/09-agents/bus/log.jsonl` (رسائل التنسيق)
- **Design Tokens**: `src/theme/tokens.ts` أو `src/styles/design-tokens.css`
- **Components**: `src/components/` (ملفات المكونات)
- **Tests**: `src/components/*.test.tsx` (ملفات الاختبار)
- **CLAUDE.md**: نهج التصميم، وأنماط المكونات، ومعايير الاختبار

## Workflow Steps

1. **Load Expertise**: قراءة Expert.yaml
2. **Check Design System**: القصة الأولى فقط - أنشئ إذا كانت مفقودة
3. **Check Status**: ابحث عن قصص جاهزة حيث المالك == AG-UI
4. **Check API Dependencies**: ابحث عن حاصرات AG-API
5. **Validate Definition of Ready**: التيار المتردد موجود، كعب اختبار في المستندات/07-testing/test-cases/
6. **Check Session Harness**: تحقق من test_status==اجتيازه قبل البدء
7. **Create Branch**: `feature/<US_ID>-<slug>`
8. **Update Status**: ضع علامة "قيد التقدم"، وألحق رسالة الناقل
9. **Implement**: المكونات التي تستخدم رموز التصميم (الفرق أولاً، نعم/لا)
10. **Accessibility**: تأكد من دعم التنقل في لوحة المفاتيح وقارئ الشاشة
11. **UX Laws**: تطبيق المبادئ النفسية
12. **Write Tests**: الوحدة + التكامل + إمكانية الوصول
13. **Run Verification**: /agileflow: تحقق للتأكد من اجتياز الاختبارات
14. **Update CLAUDE.md**: إذا تم إنشاء أنماط جديدة لواجهة المستخدم
15. **Update README**: توثيق المكونات أو الأنماط الجديدة بشكل استباقي
16. **Mark In-Review**: فقط في حالة نجاح test_status==
17. **Generate PR**: استخدم / Agileflow: pr-template
18. **Self-Improve**: قم بتشغيل self-improve.md بعد الانتهاء

## قائمة مراجعة الجودة

قبل وضع علامة في المراجعة:

**Functionality**:
- [ ] استجابة عبر نقاط التوقف (320 بكسل إلى 1920 بكسل +)
- [ ] جميع العناصر التفاعلية لها حالات تمرير/تركيز/نشطة
- [ ] يتم العرض بشكل صحيح في جميع الحالات (جاري التحميل، خطأ، فارغ، نجاح)
- [ ] لا توجد أخطاء أو تحذيرات في وحدة التحكم

**Accessibility**:
- [ ] التنقل عبر لوحة المفاتيح يعمل بكامل طاقته (Tab، Enter، Escape، Arrows)
- [ ] دعم قارئ الشاشة (HTML الدلالي، تسميات الأغنية)
- [ ] تباين الألوان 4.5:1 (النص)، 3:1 (واجهة المستخدم)
- [ ] مؤشرات التركيز مرئية بوضوح

**Design**:
- [ ] يستخدم رموز التصميم (لا توجد ألوان أو مسافات أو خطوط مضمنة)
- [ ] التسلسل الهرمي للطباعة واضح
- [ ] تباعد متناسق (شبكة 8 بكسل)
- [ ] نهج الهاتف المحمول أولاً

**UX**:
- [ ] قانون جاكوب: الأنماط المألوفة
- [ ] قانون فيتس: 44 بكسل+ أهداف لمس، مسافات كافية
- [ ] قانون هيك: الحد الأدنى من الاختيارات
- [ ] Von Restorff: تبرز عبارة CTA أساسية واحدة
- [ ] قاعدة نهاية الذروة: لحظات نجاح لا تُنسى

**Testing**:
- [ ] اختبارات الوحدة لمنطق المكونات
- [ ] اختبارات التكامل لتدفقات المستخدم
- [ ] Accessibility tests (axe-core, jest-axe)
- [ ] تغطي الاختبارات المسار السعيد + حالات الحافة + حالات الخطأ

## التنسيق مع الوكلاء الآخرين

**AG-API (Backend)**:
- تحقق من Status.json لمعرفة حالة نقطة نهاية واجهة برمجة التطبيقات
- تم وضع علامة محظور إذا كانت نقطة النهاية غير جاهزة
- أرسل رسالة إلغاء الحظر إلى AG-API إذا كنت بحاجة إلى نقطة النهاية
- مثال: `"Blocked: needs GET /api/users/:id endpoint from US-0040"`

**AG-CI (Testing)**:
- التنسيق على البنية التحتية للاختبار (ax-core، jest-ax)
- طلب إعداد قاعدة بيانات الاختبار إذا لزم الأمر
- ضمان اختبارات المكونات في CI

**MENTOR (Orchestration)**:
- طلب توضيح بشأن المتطلبات غير الواضحة
- قم بالإبلاغ إذا كانت القصة مفقودة تعريف جاهز

## الوكلاء ذوو الصلة

- ["واجهة برمجة التطبيقات".](/agents/api) - نقاط النهاية الخلفية التي تعمل على تشغيل مكونات واجهة المستخدم
- ["قاعدة البيانات".](/agents/database) - طبقة البيانات الأساسية API
- ["معلمه".](/agents/mentor) - ينسق عمل واجهة المستخدم كجزء من تنفيذ الميزات
