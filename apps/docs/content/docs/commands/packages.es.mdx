---
title: /paquetes
description: Gestione dependencias con actualizaciones y auditorías de seguridad.
---
# /paquetes

Administre de manera integral las dependencias del proyecto con paneles automatizados, auditorías de seguridad, actualizaciones seguras y administración de vulnerabilidades en todos los principales administradores de paquetes.

## Inicio rápido

```bash
/agileflow:packages ACTION=dashboard
```

## Propósito

Este comando proporciona una gestión de dependencia completa mediante:
- Detección de dependencias de proyectos entre npm, pip, cargo y otros administradores de paquetes
- Generación de paneles de dependencia completos con información de estado y vulnerabilidad.
- Ejecución de auditorías de seguridad e identificación de CVE.
- Planificación y aplicación de actualizaciones de dependencia seguras.
- Creación de historias para temas de seguridad.
- Seguimiento e informes sobre el estado del mantenimiento.

## Parámetros

| Parámetro | Requerido | Predeterminado | Descripción |
|-----------|----------|---------|-------------|
| `ACTION` | No | `dashboard` | `dashboard`, `update` o `audit` |
| `SCOPE` | No | `all` | Para actualizaciones: `security`, `major`, `minor`, `patch`, `all` |
| `OUTPUT` | No | `markdown` | Para tablero: `markdown`, `html`, `json`, `csv` |
| `INCLUDE_DEV` | No | `yes` | Incluya dependencias de desarrollo: `yes` o `no` |
| `SAVE_TO` | No | varía | Guardar ubicación del informe (por ejemplo, `docs/08-project/deps.md`) |
| `AUTO_PR` | No | `no` | Crear PR automáticamente para actualizaciones: `yes` o `no` |

## Ejemplos

### Ver panel de dependencia

```bash
/agileflow:packages
```

Muestra un panel completo de todas las dependencias con estado, vulnerabilidades y recomendaciones.

### Exportar panel como HTML

```bash
/agileflow:packages ACTION=dashboard OUTPUT=html
```

Genera un panel HTML interactivo con tablas y gráficos ordenables.

### Sólo auditoría de seguridad

```bash
/agileflow:packages ACTION=audit
```

Ejecuta controles de seguridad e informa vulnerabilidades sin realizar cambios.

### Actualizar vulnerabilidades de seguridad

```bash
/agileflow:packages ACTION=update SCOPE=security
```

Safely updates packages with known security iCuestiona y pide confirmación.

### Actualizar versiones menores

```bash
/agileflow:packages ACTION=update SCOPE=minor
```

Actualiza versiones menores (nuevas funciones, compatible con versiones anteriores).

### Crear relaciones públicas automáticamente para actualizaciones

```bash
/agileflow:packages ACTION=update SCOPE=all AUTO_PR=yes
```

Actualiza todos los paquetes y crea una solicitud de extracción automáticamente.

## Acciones

### ACCIÓN=panel (predeterminado)

Genera un informe de dependencia completo que muestra:
- **Recuento total** - Dependencias de producción y desarrollo
- **Estado de vulnerabilidad** - Crítico, alto, medio, bajo
- **Disponibilidad de actualización** - Versiones principales, menores y de parches
- **Información de licencia** - Para seguimiento del cumplimiento
- **Puntuación de salud** - Estado general de mantenimiento de la dependencia

**Ejemplo de salida**:
```text
# Dependencies Dashboard

Project: my-app
Generated: 2025-12-24 10:00:00 UTC
Total Dependencies: 145 (prod: 98, dev: 47)

## Summary

| Category | Count | Action Needed |
|----------|-------|---------------|
| Critical Vulnerabilities | 2 | Update immediately |
| Major Updates | 12 | Review breaking changes |
| Minor Updates | 28 | Safe to update |
| Up-to-date | 85 | No action |
| Deprecated | 3 | Find alternatives |

## Critical Vulnerabilities

### express@4.16.0
Current: 4.16.0 → Latest: 4.18.2 (+2 major)
Severity: HIGH (CVSS 7.5)
CVE: CVE-2022-24999
Description: ReDoS vulnerability in Express.js routing
Fix: npm install express@4.18.2

[Additional vulnerability details...]

## Maintenance Score: 78/100

Breakdown:
- Security: 60/100 (2 critical vulnerabilities)
- Freshness: 80/100 (most deps recent)
- License compliance: 95/100 (2 GPL warnings)
- Bundle size: 75/100 (some optimization possible)
```

### ACCIÓN=actualizar

Planifica y aplica actualizaciones de dependencias con controles de seguridad:

1. **Detecta paquetes obsoletos** utilizando el administrador de paquetes adecuado
2. **Clasifica por tipo**: seguridad, mayor, menor, parche
3. **Muestra el plan de actualización** con advertencias de cambios importantes
4. **Pide confirmación** antes de presentar la solicitud
5. **Ejecuta pruebas** después de la actualizacióncome (si está disponible)
6. **Crea PR** si se solicita
7. **Genera informe** con todos los cambios

**Administradores de paquetes admitidos**:
- Node.js: npm, hilo, pnpm
- Python: pip, pip-tools, poesía
- Ruby: paquete (Gemfile)
- Ir: ir mod
- Óxido: carga
- Java: Maven, Gradle
- .NET: NuGet

**Las actualizaciones de seguridad** siempre tienen prioridad y se recomiendan de inmediato.

**Actualizaciones importantes** crean historias individuales para su revisión (pueden requerir cambios de código).

**Las actualizaciones menores/de parches** se pueden agrupar de forma segura.

### ACCIÓN=auditoría

Ejecuta auditoría de seguridad únicamente sin actualizar:

Muestra todas las vulnerabilidades conocidas con:
- Niveles de gravedad (crítico, alto, moderado, bajo)
- Identificadores y descripciones CVE
- Versiones de paquetes afectados
- Correcciones recomendadas

Ejemplo:
```text
# Security Audit Report

Generated: 2025-12-24 10:00:00 UTC
Package Manager: npm

## Critical (2)
- express@4.16.0: CVE-2022-24999 (CVSS 7.5)
- lodash@4.17.19: CVE-2021-23337 (CVSS 7.4)

## High (0)
None

## Moderate (3)
[Details...]

Recommendation: Run /agileflow:packages ACTION=update SCOPE=security
```

## Detección del administrador de paquetes

El comando detecta y admite automáticamente:

| Gerente | Archivos | Detección |
|---------|-------|-----------|
| mpn | paquete.json, paquete-lock.json | Proyectos Node.js |
| hilo | hilo.lock | Node.js moderno |
| pnpm | pnpm-lock.yaml | Node.js moderno |
| pipa | requisitos.txt, pyproject.toml | Pitón |
| poesía | poesía.lock | Pitón moderno |
| empaquetador | Archivo de gemas, Archivo de gemas.lock | Rubí/Rieles |
| ir mod | ir.mod, ir.sum | Ir |
| carga | Cargo.toml, Cargo.lock | Óxido |
| experto | pom.xml | Java |
| Gradle | construir.gradle | Java |
| NuGet | *.csproj, paquetes.config | .NET |

## Formatos de salida

### Rebaja (predeterminado)
Informe legible por humanos con tablas, adecuado para documentación:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=markdown
```

###HTML
Panel interactivo con filtrado, clasificación y visualización:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=html
```

### JSON
Datos estructurados para herramientas e integración:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=json
```

### CSV
Formato compatible con hojas de cálculo:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=csv
```

## Ejemplos de flujo de trabajo

### Auditoría de dependencia semanal

```bash
# Run every Monday
/agileflow:packages ACTION=audit
```

Revise todas las vulnerabilidades y planifique las actualizaciones.

### Mantenimiento mensual

```bash
# Update minor and patch versions
/agileflow:packages ACTION=update SCOPE=minor
```

Manténgase actualizado con cambios continuos.

### Actualizaciones importantes trimestrales

```bash
# Review major version upgrades
/agileflow:packages ACTION=update SCOPE=major
```

Planifique y pruebe los cambios importantes con cuidado.

### Parche de seguridad de emergencia

```bash
# Immediately update critical vulnerabilities
/agileflow:packages ACTION=update SCOPE=security
```

Cree relaciones públicas e implemente rápidamente si se superan las pruebas.

## Integración de CI

### Auditoría automatizada en CI

Agregar a acciones de GitHub:
```yaml
- name: Dependency audit
  run: npm audit --audit-level=high

- name: Check outdated
  run: npm outdated || true  # Don't fail, just report
```

### Configuración del robot dependiente

Cree `.github/dependabot.yml`:
```yaml
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10

  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
```

Dependabot creará automáticamente relaciones públicas para las actualizaciones.

### Verificación de dependencia semanal

Agregar flujo de trabajo programado:
```yaml
name: Dependencies
on:
  schedule:
    - cron: '0 9 * * 1'  # Monday 9am

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: /agileflow:packages ACTION=dashboard
```

## Creando historias para vulnerabilidades

Cuando se encuentren problemas de seguridad, cree historias:

**Formato**:
```text
US-XXXX: Fix security vulnerability in [PACKAGE]

Severity: [CRITICAL|HIGH|MEDIUM]
CVE: [CVE-XXXX-XXXXX]
Current: [version]
Fix: [recommended version]

Steps to Fix:
1. Update package: npm install package@latest
2. Run tests: npm test
3. Review changelog for breaking changes
```

## Mejores prácticas

1. **Priorizar la seguridad**: actualice siempre las vulnerabilidades críticas de inmediato

2. **Actualizaciones menores por lotes**: agrupe actualizaciones continuas para mayor eficiencia

3. **Prueba después de las actualizaciones**: ejecute siempre el conjunto de pruebas completo después de las actualizaciones

4. **Revisar cambios importantes**: probar las versiones principales en la etapa de preparación antes de la producción.

5. **Supervisar las obsolescencias**: actuar anticipadamente sobre los paquetes obsoletos

6. **Cumplimiento de licencia**: consulte las licencias para conocer los requisitos corporativos

7. **Tamaño del paquete** - Paquete de monitorTamaño del impacto de las dependencias.

8. **Auditorías automatizadas**: ejecute auditorías semanalmente, no solo durante los lanzamientos.

## Reglas

- Nunca actualice automáticamente paquetes críticos sin aprobación
- Siempre obtenga una vista previa de los cambios antes de aplicarlos (diferencia primero, SÍ/NO)
- Actualizaciones de parches/menores de grupo cuando sea posible
- Advertir de manera destacada sobre cambios importantes
- Enlace a registros de cambios y guías de migración.
- Crea historias para actualizaciones importantes.
- Nunca te saltes las pruebas después de la actualización.
- Confirme siempre los archivos de bloqueo (package-lock.json, Cargo.lock, etc.)

## Comandos relacionados

- [`/setup-tests`](/commands/tests) - Configurar pruebas automatizadas
- [`/ci-setup`](/commands/ci) - Configurar comprobaciones de CI
- [`/setup-deployment`](/commands/deploy) - Configurar la implementación