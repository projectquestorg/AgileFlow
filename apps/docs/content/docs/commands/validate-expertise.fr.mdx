---
title: /valider-expertise
description: Valider les dossiers d'expertise en matière de dérive et d'obsolescence
---
# /valider-expertise

Validez les fichiers d’expertise des agents pour vous assurer qu’ils ne dérivent pas de la base de code et qu’ils restent à jour.

## Démarrage rapide

```bash
/agileflow:validate-expertise
```

Valide tous les dossiers d’expertise. Vous pouvez également valider un domaine spécifique :

```bash
/agileflow:validate-expertise DOMAIN=database
```

## Paramètres

| Paramètre | Obligatoire | Par défaut | Descriptif |
|-----------|----------|---------|-------------|
| `DOMAIN` | Non | (tous) | Valider le fichier d'expertise d'un domaine spécifique (par exemple, `database`, `api`) |

## Contrôles de validation

La commande effectue quatre contrôles de validation critiques sur chaque dossier d'expertise :

### 1. Dérive du chemin du fichier
Vérifie que tous les chemins de fichiers référencés dans le fichier d'expertise existent toujours dans la base de code. Détecte lorsque les fichiers documentés ont été déplacés, renommés ou supprimés.

**Exemple** : si expertise.yaml fait référence à `src/old/database.ts` mais que ce fichier n'existe plus, il le signale comme une dérive.

### 2. Apprentissages périmés
Signale les fichiers d'expertise qui n'ont pas été mis à jour depuis 30 jours ou plus. Une expertise qui n'est pasrégulièrement entretenu devient obsolète et moins fiable.

**Avertissement** : Les fichiers non mis à jour depuis plus de 30 jours sont marqués pour révision et mise à jour.

### 3. Vérification de la taille du fichier
Avertit si un fichier d'expertise dépasse 200 lignes. Les fichiers volumineux sont difficiles à conserver et doivent être divisés en documents plus petits et ciblés.

**Recommandation** : Conservez les fichiers d'expertise sous 200 lignes pour une meilleure maintenabilité.

### 4. Sections obligatoires
Vérifie que le fichier expertise.yaml contient toutes les sections requises :
- `domain` : Identifiant de domaine
- `mental_models` : Au moins un modèle mental (concepts de base)
- `learnings` : Historique d'apprentissage (peut être vide au départ)
- `key_files` : fichiers importants pour ce domaine
- `patterns` : modèles courants et anti-modèles

## Exemples

### Valider tous les dossiers d'expertise

```bash
/agileflow:validate-expertise
```

Exécute la validation sur tous les fichiers d'expertise dans le répertoire `.agileflow/experts/`.

### Valider un domaine spécifique

```bash
/agileflow:validate-expertise DOMAIN=database
```

Valide uniquement le fichier d'expertise du domaine de base de données.

###Vérifier un autre domaine

```bash
/agileflow:validate-expertise DOMAIN=api
```

Valide uniquement le fichier d'expertise du domaine API.

## Format de sortie

La commande produit un rapport de validation détaillé :

```text
======================================
EXPERTISE VALIDATION REPORT
======================================

Validating: database
  [PASS] File exists: expertise.yaml
  [PASS] Required sections present
  [WARN] 2 stale learnings (>30 days)
  [FAIL] DRIFT: src/old/database.ts not found

Validating: api
  [PASS] All checks passed

Validating: frontend
  [WARN] File size: 287 lines (recommend <200)

--------------------------------------
SUMMARY
--------------------------------------
Total domains: 25
Passed: 23
Warnings: 1
Failures: 1

RECOMMENDED ACTIONS:
1. Update database expertise - remove reference to src/old/database.ts
2. Split frontend expertise - reduce from 287 to <200 lines
3. Review stale learnings in database domain
```

## Indicateurs d'état

| Indicateur | Signification | Actions |
|-----------|---------|--------|
| `[PASS]` | Chèque réussi | Aucune action nécessaire |
| `[WARN]` | Problème non critique trouvé | Examinez et envisagez de corriger |
| `[FAIL]` | Problème critique trouvé | Doit être réparé |

## Problèmes courants et solutions

| Problème | Indicateur | Solutions |
|-------|-----------|--------------|
| Le fichier référencé n'existe pas | `[FAIL] DRIFT` | Supprimer ou mettre à jour la référence du chemin de fichier |
| Fichier non mis à jour depuis plus de 30 jours | `[WARN] stale` | Réviser et mettre à jour les apprentissages |
| Dossier d'expertise trop volumineux | `[WARN] File size` | Divisé en fichiers ciblés |
| Sections obligatoires manquantes | `[FAIL] Required sections` | Ajouter les sections manquantes à expertise.yaml |

## Quand exécuter

Exécuter la validation de l'expertise :
- **Après le début de la session** : Optional dans le cadre des vérifications de l'état du système (peut être configuré comme un hook)
- **Avant les versions majeures** : assurez-vous que toute l'expertise est à jour et exacte
- **Après de grands refactors** : vérifiez que les références de fichiers pointent toujours vers des emplacements valides
- **Périodiquement** : exécution mensuelle/trimestrielle pour maintenir l'expertise à jour
- **Lors d'une modification d'expertise** : Valider les modifications avant de s'engager

## Emplacement du fichier d'expertise

Les dossiers d'expertise sont stockés à l'adresse suivante :
```text
.agileflow/experts/{domain}/expertise.yaml
```

Par exemple :
- `.agileflow/experts/database/expertise.yaml`
- `.agileflow/experts/api/expertise.yaml`
- `.agileflow/experts/frontend/expertise.yaml`

## Critères de réussite

Un dossier d’expertise sain doit :
- ✅ Tous les fichiers référencés existent dans la base de code
- ✅ Mis à jour au cours des 30 derniers jours
- ✅ Moins de 200 lignes
- ✅ Contient toutes les sections requises (domaine, modèles_mentaux, apprentissages, fichiers_clés, modèles)

## Intégration avec votre workflow

Vous pouvez configurer la validation d'expertise pour qu'elle s'exécute automatiquement :

```bash
/agileflow:configure --enable=expertise-validation
```

Cela ajoute un hook SessionStart qui valide l'expertise à chaque démarrage de session et vous alerte en cas de problèmes.

## Dérivet Détails de la détection

La dérive du chemin de fichier est le problème le plus critique détecté. La commande recherche les références de fichiers au format :
- `src/...` - Fichiers de code source
- `packages/...` - Forfaits Monorepo
- `lib/...` - Fichiers de bibliothèque

Si ces chemins n’existent plus, ils sont signalés pour une attention et une suppression immédiates.

## Commandes associées

- [`/configure`](/commands/configure) - Configurer la validation pour qu'elle s'exécute automatiquement
- [`/diagnose`](/commands/diagnose) - Exécuter les diagnostics d'intégrité du système
- [`/agent`](/commands/agent) - Intégrer de nouveaux agents (crée des fichiers d'expertise)
- [`/help`](/commands/help) - Afficher toutes les commandes disponibles