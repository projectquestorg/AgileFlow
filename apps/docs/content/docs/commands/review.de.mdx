---
title: /Rezension
description: KI-gest√ºtzte Code√ºberpr√ºfung mit Qualit√§tsvorschl√§gen
---

# /Rezension

F√ºhren Sie eine umfassende KI-gest√ºtzte Code√ºberpr√ºfung bei Pull-Request-√Ñnderungen durch. Review analysiert Code auf Qualit√§t, Sicherheit, Leistung und Best Practices und liefert umsetzbares Feedback mit spezifischen Codebeispielen.

## Schnellstart

```bash
# Review current branch against main
/agileflow:review

# Review specific branch
/agileflow:review BRANCH=feature/auth

# Review with focus on security
/agileflow:review FOCUS=security
```

Der Befehl wird:
1. Code√§nderungen abrufen (git diff)
2. Analysieren Sie in 6 Kategorien (Qualit√§t, Sicherheit, Leistung, Best Practices, Tests, Dokumentation).
3. Erstellen Sie einen detaillierten Bericht mit nach Schweregrad geordneten Problemen
4. Berechnen Sie den Codequalit√§tswert
5. Schlagen Sie automatische Korrekturen und Folgearbeiten vor

## Hauptmerkmale

### Umfassende Analyse

Review untersucht Ihre Code√§nderungen in 6 wichtigen Kategorien:

| Category | Checks |
|----------|--------|
| **Code Quality** | Complexity, duplication, naming, function/file length |
| **Security** | SQL injection, XSS, hardcoded secrets, unsafe deserialization |
| **Performance** | N+1 queries, inefficient algorithms, memory leaks |
| **Best Practices** | Error handling, logging, type safety, async/await |
| **Testing** | Missing tests, test quality, coverage gaps |
| **Documentation** | Missing JSDoc, outdated comments, README updates |

### Schweregradbasierte Priorisierung

Probleme werden nach Auswirkung kategorisiert:

```text
üî¥ CRITICAL - Must fix before merge
üü† HIGH    - Fix before merge (blocks release)
üü° MEDIUM  - Address soon (technical debt)
‚ö™ LOW     - Nice to have (style/consistency)
```

### Code-Qualit√§tsfaktor

Ihre PR erh√§lt eine Punktzahl (0-100) mit Aufschl√ºsselung nach Kategorie:

```text
Code Quality Score: 72/100

Breakdown:
- Security: 40/100 (critical issues found)
- Performance: 75/100 (one N+1 query)
- Maintainability: 80/100 (some complexity)
- Testing: 65/100 (coverage gaps)
- Style: 90/100 (mostly consistent)
```

### Konstruktives Feedback

Jede Ausgabe enth√§lt:
- Wo es ist (Datei, Zeilennummer)
- Warum es wichtig ist (Risiko/Auswirkung)
- So beheben Sie das Problem (spezifische Codebeispiele)
- Beispiel f√ºr ‚ùå SCHLECHTEN Code
- Beispiel f√ºr ‚úÖ GUTEN Code

## Verwendung

### Einfach ‚Äì √úberpr√ºfen Sie den aktuellen Zweig

```bash
/agileflow:review
```

√úberpr√ºft √Ñnderungen am aktuellen Zweig gegen√ºber Main/Master.

### √úberpr√ºfen Sie einen bestimmten Zweig

```bash
/agileflow:review BRANCH=feature/user-auth
```

√úberpr√ºft den benannten Zweig mit dem Hauptzweig.

### √úberpr√ºfung gegen√ºber einer anderen Basis

```bash
/agileflow:review BRANCH=feature/auth BASE=develop
```

Vergleicht mit einem anderen Basiszweig.

### Rezension mit Schwerpunktbereich

```bash
# Security-only review
/agileflow:review FOCUS=security

# Performance-only review
/agileflow:review FOCUS=performance

# Testing coverage review
/agileflow:review FOCUS=tests
```

### Nach Schweregrad filtern

```bash
# Show only critical/high issues
/agileflow:review SEVERITY=high

# Show all issues
/agileflow:review SEVERITY=all
```

## Parameter

| Parameter | Required | Default | Options |
|-----------|----------|---------|---------|
| `BRANCH` | No | Current | Branch name to review |
| `BASE` | No | main/master | Base branch for comparison |
| `FOCUS` | No | all | all, security, performance, style, tests |
| `SEVERITY` | No | all | critical, high, medium, low, all |

## Beispiele

### Typische PR-Rezension

```bash
/agileflow:review

# Output:
# AI Code Review Report
# Branch: feature/user-auth
# Files Changed: 5
# Critical: 1 | High: 3 | Medium: 5 | Low: 2
# Code Quality Score: 72/100
#
# üî¥ CRITICAL ISSUES
# - Hardcoded API key in stripe.ts:15
#
# üü† HIGH ISSUES
# - N+1 query in posts API
# - Missing error handling in login
# ...
```

### Sicherheitsorientierte √úberpr√ºfung

```bash
/agileflow:review FOCUS=security

# Analyzes only for:
# - Hardcoded secrets
# - SQL injection risks
# - XSS vulnerabilities
# - Authentication issues
# - CORS misconfiguration
```

### Leistungsbeurteilung

```bash
/agileflow:review FOCUS=performance

# Checks for:
# - N+1 database queries
# - Inefficient algorithms
# - Missing indexes
# - Memory leaks
# - Bundle size issues
```

## Struktur des √úberpr√ºfungsberichts

### Kopfzeile

```text
# AI Code Review Report

**Branch**: feature/user-auth
**Base**: main
**Files Changed**: 8
**Lines Added**: 245
**Lines Removed**: 32
**Generated**: 2025-10-16T10:30:00Z
```

### Zusammenfassung

```text
## Summary

**Critical**: 2 | **High**: 5 | **Medium**: 12 | **Low**: 8
**Must Fix Before Merge**: 7 issues
```

### Probleme nach Schweregrad

F√ºr jede Ausgabe:

```text
### 1. Hardcoded API Key (SECURITY)
**File**: src/api/payments/stripe.ts:15
**Severity**: CRITICAL

// ‚ùå BAD
const stripeKey = "sk_live_abc123...";

// ‚úÖ GOOD
const stripeKey = process.env.STRIPE_SECRET_KEY;
if (!stripeKey) throw new Error("STRIPE_SECRET_KEY not set");

**Risk**: API key exposed in version control.
**Fix**: Move to environment variable. Rotate immediately.
**Priority**: Block merge
```

### Positive Beobachtungen

```text
## Positive Observations ‚úÖ

- ‚úÖ Good use of TypeScript strict mode
- ‚úÖ Consistent error handling pattern
- ‚úÖ Well-structured component separation
- ‚úÖ Clear commit messages
```

### Aufschl√ºsselung der Codequalit√§t

```text
## Code Quality Score: 72/100

**Breakdown**:
- Security: 40/100 (2 critical issues)
- Performance: 75/100 (1 N+1 query)
- Maintainability: 80/100 (some complexity)
- Testing: 65/100 (coverage gaps)
- Style: 90/100 (mostly consistent)
```

## Anpassung

### Projektspezifische Regeln

Erstellen Sie benutzerdefinierte √úberpr√ºfungsregeln in:
- `.agileflow/review-rules.md`
- `docs/02-practices/code-standards.md`

Beispiel:

```markdown
# Code Review Rules

## Critical
- No console.log in production code
- All API endpoints must have rate limiting
- All database queries must use ORM

## High
- Functions >30 lines should be refactored
- Test coverage must be >85%
```

## Aktionen nach der √úberpr√ºfung

### Probleme automatisch beheben

```text
Review asks: "Fix auto-fixable issues? (YES/NO)"

If YES:
  - Runs npm run lint -- --fix
  - Fixes 8 style issues automatically
  - Shows which issues were fixed
```

### Erstellen Sie Folgegeschichten

```text
Review asks: "Create stories for follow-up work?"

If YES:
  - Creates story for each medium/low issue
  - Adds to your backlog
  - Links to code review report
```

### Blockzusammenf√ºhrung f√ºr kritische Probleme

```text
Review asks: "Block merge for critical/high issues?"

If YES:
  - Marks merge as blocked
  - Provides failure reason
  - Suggests resolution steps
```

### Bericht speichern

Bericht automatisch gespeichert unter:
```text
docs/08-project/code-reviews/<YYYYMMDD>-<BRANCH>.md
```

Beispiel:
```text
docs/08-project/code-reviews/20251016-feature-user-auth.md
```

## Sicherheitskontrollen

Die √úberpr√ºfung pr√ºft automatisch Folgendes:

### Geheimnisse und Referenzen
- Hartcodierte API-Schl√ºssel
- Datenbank-Passw√∂rter
- OAuth-Tokens
- JWT-Geheimnisse
- AWS-Anmeldeinformationen

### H√§ufige Schwachstellen
- SQL-Injection (nicht parametrisierte Abfragen)
- XSS-Angriffe (nicht entkommene Ausgabe)
- Unsichere Deserialisierung
- CSRF-Schwachstellen
- Fehlende CORS-Validierung

### Unsichere Muster
- eval() oder Function()
- Unsichere Zeichenfolgenverkettung
- Fehlende Eingabevalidierung
- Schwache Verschl√ºsselung
- Unsichere Abh√§ngigkeiten

## Leistungspr√ºfungen

Rezension sucht nach:

### Datenbank
- N+1-Abfrageprobleme
- Fehlende Indizes
- Ineffiziente Verkn√ºpfungen
- Unn√∂tige Abfragen

### Algorithmen
- O(n¬≤) wenn O(n) m√∂glich
- Verschachtelte Schleifen, die flach sein k√∂nnten
- Wiederholte Berechnungen
- Nicht optimierte Rekursion

### Erinnerung
- Speicherlecks
- Gro√üe Objekte werden nicht freigegeben
- Zirkelverweise
- Speicherfressende Datenstrukturen

## Testen der Abdeckung

√úberpr√ºfungspr√ºfungen:

### Neuer Code
- Gibt es einen Test f√ºr neue Funktionalit√§t?
- Sind Randf√§lle abgedeckt?
- Ist die Testqualit√§t gut?

### Deckungsl√ºcken
- Ohne Tests hinzugef√ºgte Zeilen
- Funktionen ohne Testabdeckung
- Fehlerpfade nicht getestet

### Testqualit√§t
- Sind Behauptungen sinnvoll?
- Verifizieren Tests das Verhalten?
- Sind Tests wartbar?

## Ausgabe und Empfehlungen

### Sofortige Aktionen (Blockzusammenf√ºhrung)

```text
1. Remove hardcoded API key (critical)
2. Fix SQL injection (critical)
3. Add error handling to login (high)
```

### Vor der Zusammenf√ºhrung

```text
4. Add tests for auth endpoints (high)
5. Fix N+1 query in posts API (high)
6. Reduce complexity in validator.ts (medium)
```

### Follow-up (Geschichten erstellen)

```text
7. Standardize naming conventions (medium)
8. Add ESLint rule for secrets (medium)
9. Set up automated security scanning (low)
```

## Integration mit CI

Schlagen Sie eine Erg√§nzung vor `.github/workflows/pr.yml`:

```yaml
- name: AI Code Review
  run: npx claude-code /agileflow:review BRANCH=${{ github.head_ref }}

- name: Check for critical issues
  run: |
    if grep -q "CRITICAL" code-review-report.md; then
      echo "::error::Critical issues found."
      exit 1
    fi
```

## Tipps

### Bevor Sie PR einreichen

```bash
/agileflow:review
# Fix any CRITICAL or HIGH issues
# Address MEDIUM issues if possible
# Then submit PR with confidence
```

### Iterative Verbesserung

```bash
# After feedback, run review again
/agileflow:review

# See if score improved
# Ensure critical issues fixed
# Check test coverage
```

### Security-First-Ansatz

```bash
# Always check security first
/agileflow:review FOCUS=security

# Fix any CRITICAL security issues
# Then review other categories
```

## Prinzipien

- **Be constructive** - Geben Sie umsetzbares Feedback, nicht nur Kritik
- **Show examples** - F√ºgen Sie ‚ùå SCHLECHTEN und ‚úÖ GUTEN Code hinzu
- **Prioritize** - Kritische Themen zuerst, Stil zuletzt
- **Celebrate** - Beziehen Sie positive Beobachtungen ein
- **Suggest fixes** - Identifizieren Sie nicht nur Probleme
- **No force commits** - Fragen Sie vor der automatischen Reparatur immer nach

## Verwandte Befehle

- [`/pr`](/commands/pr) - PR-Beschreibung erstellen (√úberpr√ºfung vor dem Absenden)
- [`/impact`](/commands/impact) - Analysieren Sie die Auswirkungen von √Ñnderungen
- [`/babysitten`](/commands/babysit) - Implementierungsanleitung (f√ºhrt √úberpr√ºfung vor PR durch)
- [`/verify`](/commands/verify) - √úberpr√ºfen Sie, ob die Tests bestanden wurden
- [`/baseline`](/commands/baseline) - Erstellen Sie einen verifizierten Kontrollpunkt
