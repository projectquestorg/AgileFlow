---
title: /Geschichte
description: Erstellen Sie eine User Story mit Akzeptanzkriterien
---

# /Geschichte

Erstellen Sie eine neue User Story mit Akzeptanzkriterien, Test-Stubs und Statusverfolgung.

## Schnellstart

```bash
/agileflow:story EPIC=<EP-ID> STORY=<US-ID> TITLE=<text> OWNER=<id>
```

## Parameter

| Parameter | Required | Default | Description |
|-----------|----------|---------|-------------|
| `EPIC` | Yes | - | Parent epic ID (e.g., EP-0001) |
| `STORY` | Yes | - | Story identifier (e.g., US-0001) |
| `TITLE` | Yes | - | Story title describing the feature |
| `OWNER` | Yes | - | Owner name or agent ID (e.g., AG-UI, AG-API) |
| `ESTIMATE` | No | `0.5d` | Time estimate (e.g., `0.5d`, `1d`, `2d`) |
| `AC` | No | - | Acceptance criteria in Given/When/Then format |
| `DEPENDENCIES` | No | - | Comma-separated list of dependent story IDs (e.g., `US-0001,US-0002`) |
| `TDD` | No | Smart default | Enable TDD mode to generate test stubs from acceptance criteria |

## Beispiele

### Grundlegende Story-Erstellung

```bash
/agileflow:story EPIC=EP-0010 STORY=US-0001 TITLE="User registration form" OWNER=AG-UI
```

Erstellt eine Story-Datei unter `docs/06-stories/EP-0010/US-0001-user-registration-form.md` mit Standardschätzung (0,5 Tage) und Status (bereit).

### Geschichte mit Akzeptanzkriterien

```bash
/agileflow:story EPIC=EP-0010 STORY=US-0002 TITLE="Validate email address" OWNER=AG-API ESTIMATE=1d AC="Given a valid email, When form submitted, Then confirmation email sent"
```

Erstellt die Story mit spezifischen Akzeptanzkriterien, die die Entwicklung und Tests leiten.

### Geschichte mit Abhängigkeiten

```bash
/agileflow:story EPIC=EP-0010 STORY=US-0003 TITLE="Password reset flow" OWNER=AG-API ESTIMATE=1d DEPENDENCIES=US-0001,US-0002
```

Erstellt die Story und markiert sie als abhängig von vorherigen Storys. Diese Abhängigkeiten werden in visualisiert `/deps` Befehl.

### Story mit TDD-Modus

```bash
/agileflow:story EPIC=EP-0010 STORY=US-0004 TITLE="User login" OWNER=AG-API AC="Given user on login page, When valid credentials entered, Then dashboard shown"
```

Für Codebesitzer wie AG-API wird der TDD-Modus automatisch aktiviert. Dadurch wird eine Testdatei unter generiert `__tests__/US-0004.test.ts` mit anstehenden Tests, die aus den Akzeptanzkriterien abgeleitet werden.

## TDD-Modus

Der TDD-Modus (Test-Driven Development) generiert Framework-spezifische Test-Stubs aus Ihren Akzeptanzkriterien. Tests werden erstellt **before** Implementierung nach dem Prinzip, das Tests haben sollten **specify** Verhalten, nicht nur überprüfen.

### Intelligente Standardeinstellungen

Der TDD-Modus verwendet intelligente Standardeinstellungen basierend auf dem Story-Eigentümer:

| Owner Type | TDD Default | Rationale |
|------------|-------------|-----------|
| AG-API, AG-UI, AG-DATABASE | `true` | Code-focused, tests critical |
| AG-TESTING, AG-SECURITY, AG-PERFORMANCE | `true` | Quality-focused |
| AG-DOCUMENTATION, AG-RESEARCH, AG-PRODUCT | `false` | Non-code work |
| AG-DEVOPS, AG-CI | `false` | Infrastructure, config |

Sie können die Standardeinstellung jederzeit überschreiben:
- `TDD=true` - TDD-Modus erzwingen
- `TDD=false` - TDD-Modus ausschalten

### Generierte Teststruktur

Für Jest/Vitest (TypeScript):
```typescript
describe('US-0004: User login', () => {
  // AC1: valid login shows dashboard
  describe('valid login shows dashboard', () => {
    it.skip('should dashboard shown', () => {
      // Given: user on login page
      // When: valid credentials entered
      // Then: dashboard shown
      expect(true).toBe(true); // TODO: Implement
    });
  });
});
```

### TDD-Workflow

1. **Create story with TDD** - Tests werden aus Akzeptanzkriterien generiert
2. **Clear context** - Starten Sie eine neue Claude-Sitzung
3. **Implement to pass tests** - Sagen Sie dem Agenten: „Machen Sie alle Tests durch.“ `__tests__/US-0004.test.ts` passieren"
4. **Agent implements blindly** - Ohne zu wissen, wie Tests erstellt wurden
5. **Tests validate behavior** - Die Umsetzung entspricht tatsächlich den Anforderungen

Diese Trennung stellt sicher, dass Tests das Verhalten wirklich spezifizieren und nicht nur überprüfen, was geschrieben wurde.

## Ausgabe

Der Befehl erstellt:

1. **Story file** (`docs/06-stories/EP-XXXX/US-XXXX-<slug>.md`)
   - Story-Metadaten (ID, Epic, Eigentümer, Schätzung, Status)
   - Beschreibung und Akzeptanzkriterien
   - Architekturkontext (während der Entwicklung befüllt)
   - Teststrategie
   - TDD-Abzeichen (wenn der TDD-Modus aktiviert ist)

2. **Test stub** (`docs/07-testing/test-cases/US-XXXX.md`)
   - Teststruktur abgestimmt auf Akzeptanzkriterien
   - Platzhalter für Testdurchführung
   - Links zur Geschichte für den Kontext

3. **TDD test file** (wenn der TDD-Modus aktiviert ist)
   - Scherz/Vitest: `__tests__/US-XXXX.test.ts`
   - pytest: `tests/test_US-XXXX.py`
   - Gehen: `<package>/US-XXXX_test.go`

4. **Status tracking** (`docs/09-agents/status.json`)
   - Story-Eintrag mit Eigentümer, Kostenvoranschlag und Status
   - Abhängigkeitslinks zu anderen Geschichten
   - Epischer Auftrag
   - TDD-Modus-Flag und Testdateipfad (falls TDD aktiviert)

5. **Agent communication** (`docs/09-agents/bus/log.jsonl`)
   - Zuweisungsnachricht mit der erstellten und zugewiesenen Story

## Arbeitsablauf

1. **Create the story** - Laufen `/story` mit Epos, ID, Titel und Besitzer
2. **Add acceptance criteria** - Verwenden `/story-validate` AC zu verfeinern und zu testen
3. **Validate completeness** - Laufen `/story-validate STORY=<US-ID>` vor der Entwicklung
4. **Develop the story** - Eigentümer implementiert nach Abnahmekriterien
5. **Run tests** - Verwenden `/verify` um automatisierte Tests durchzuführen
6. **Request review** - Status aktualisieren auf `in-review` wenn es fertig ist

## Format der Akzeptanzkriterien

Verwenden Sie das Format „Gegeben/Wann/Dann“ für klare, überprüfbare Kriterien:

```markdown
- **Given** a user on the registration page
  **When** they enter valid email and password
  **Then** an account is created and confirmation email sent

- **Given** they submit an invalid email
  **When** they click submit
  **Then** form shows "Invalid email" error
```

Akzeptanzkriterien sollten sein:
- **Specific**: Referenzieren Sie tatsächliche Felder und Werte
- **Testable**: Kann mit automatisierten oder manuellen Tests überprüft werden
- **Independent**: Jedes Kriterium testet eine Sache
- **Complete**: Behandeln Sie Happy Path- und Major-Edge-Fälle

## Story-Schätzungen

Verwenden Sie diese Standardschätzungen:

| Estimate | When to Use |
|----------|------------|
| `0.5d` | Simple CRUD, basic UI component, quick fix |
| `1d` | Standard feature with validation and basic tests |
| `1.5d` | Complex logic, multiple validations, or integration |
| `2d` | Significant refactoring or major feature component |
| `>2d` | Break into smaller stories |

## Integration mit anderen Befehlen

- **After story creation**: Verwenden `/story-validate` Bereitschaft sicherzustellen
- **Before development**: Verwenden `/babysit` für interaktive Hilfe bei der Umsetzung
- **During development**: Verwenden `/verify` um Tests durchzuführen
- **For code review**: Verwenden `/review` für KI-gestützte Vorschläge
- **For pull requests**: Verwenden `/pr` um eine PR-Beschreibung automatisch zu generieren

## Best Practices

- **One story = one feature** - Sorgen Sie dafür, dass die Geschichten fokussiert und unabhängig darstellbar sind
- **Write clear acceptance criteria** - Diese Anleitungen für Entwicklung und Tests
- **Use TDD for code stories** - Lassen Sie Tests das Verhalten vor der Implementierung spezifizieren
- **Clear context before implementing TDD tests** - Starten Sie neu, damit der Agent die Tests nicht „kennt“.
- **Estimate realistically** - Berücksichtigen Sie Komplexität und Teamerfahrung
- **Link dependencies explicitly** - Hilft bei der Sprintplanung und Risikobewertung
- **Validate before development** - Verwenden `/story-validate` um Probleme frühzeitig zu erkennen

## Verwandte Befehle

- [`/episch`](/commands/epic) - Erstellen Sie das übergeordnete Epos
- [`/story-validate`](/commands/story-validate) - Überprüfen Sie die Vollständigkeit der Geschichte vor der Entwicklung
- [`/sprint`](/commands/sprint) - Wählen Sie Storys für die Sprintplanung aus
- [`/auto`](/commands/auto) - Generieren Sie automatisch Storys aus PRDs oder Spezifikationen
- [`/babysitten`](/commands/babysit) - Erhalten Sie interaktive Hilfe bei der Implementierung
- [`/verify`](/commands/verify) - Führen Sie Tests durch und aktualisieren Sie den Teststatus
- [`/tests`](/commands/tests) - Testinfrastruktur für den TDD-Workflow einrichten
