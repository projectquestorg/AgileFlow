---
title: /diagnosticar
description: Diagn√≥stico de salud del sistema
---
# /diagnosticar

Ejecute comprobaciones integrales del estado del sistema AgileFlow para identificar problemas potenciales antes de que causen fallas.

## Inicio r√°pido

```bash
/agileflow:diagnose
```

Esto realiza un conjunto de diagn√≥stico completo sin necesidad de argumentos.

## Par√°metros

Este comando no requiere par√°metros: ejecuta autom√°ticamente todas las comprobaciones de diagn√≥stico.

## Qu√© comprueba

El sistema de diagn√≥stico valida toda su instalaci√≥n de AgileFlow:

### 1. Validaci√≥n de archivos JSON
- Valida todos los archivos JSON cr√≠ticos (status.json, metadatos, configuraci√≥n)
- Comprueba el formato y la estructura del archivo.
- Tama√±os de archivos de informes en KB
- Advierte si status.json supera los 100 KB (se recomienda archivarlo)
- Muestra recuentos de historias en archivos activos y archivados.

### 2. Integridad de la estructura del archivo
- Verifica que existan los directorios requeridos (docs/, .agileflow/, .claude/)
- Comprueba archivos cr√≠ticos (metadata.json, status.json)
- Distingue entre archivos cr√≠ticos y opcionales.

### 3. Sistema de archivo autom√°tico
- Comprueba si el script de archivo existe y es ejecutable.
- Verifica la configuraci√≥n del gancho in .claude/settings.json
- Umbral de archivo de informes a partir de metadatos.
- Identifica componentes faltantes o mal configurados

### 4. Sistema de ganchos
- Valida la estructura .claude/settings.json
- Cuenta los ganchos SessionStart, UserPromptSubmit y Stop
- Informa problemas de configuraci√≥n
- Comprueba la ejecutabilidad del gancho.

### 5. An√°lisis del tama√±o del archivo
- Supervisa el tama√±o de status.json con umbrales
- Muestra recuentos de historias activas y archivadas.
- Recomienda archivar cuando sea necesario.
- Proporciona recomendaciones basadas en el tama√±o.

## Ejemplos

### Diagn√≥stico b√°sico

```bash
/agileflow:diagnose
```

Ejecuta una verificaci√≥n completa del estado del sistema y muestra los resultados.

### Indicadores de salida

El diagn√≥stico utiliza estos indicadores de estado:
- **‚úÖ** (marca de verificaci√≥n): control de salud aprobado
- **‚ùå** (cruz): Fall√≥ la verificaci√≥n de estado
- **‚ö†Ô∏è** (advertencia): Se encontr√≥ un problema no cr√≠tico
- **‚ÑπÔ∏è** (info): Estado informativo

## Salida t√≠pica

```text
üîç AgileFlow System Diagnostics
================================

üìã JSON File Validation
----------------------
  ‚úÖ docs/00-meta/agileflow-metadata.json (42KB)
  ‚úÖ docs/09-agents/status.json (28KB, 12 stories)
  ‚ÑπÔ∏è  docs/09-agents/status-archive.json - not found (optional)
  ‚úÖ .claude/settings.json (5KB)

üì¶ Auto-Archival System
----------------------
  ‚úÖ Archive script exists and is executable
  ‚úÖ Auto-archival hook configured
  ‚úÖ Archival threshold: 7 days

ü™ù Hooks System
---------------
  ‚úÖ .claude/settings.json is valid JSON
  ‚ÑπÔ∏è  SessionStart hooks: 2
  ‚ÑπÔ∏è  UserPromptSubmit hooks: 1
  ‚ÑπÔ∏è  Stop hooks: 1

üìè File Size Analysis
---------------------
  status.json: 28KB (12 stories)
  ‚úÖ status.json size is healthy

üìä Diagnostic Summary
=====================
‚úÖ All checks passed! System is healthy.
```

## Problemas comunes detectados

| Problema | Indicador | Soluci√≥n |
|-------|-----------|----------|
| Sintaxis JSON no v√°lida | ‚ùå | Reparar JSON usando `jq . <file>` para identificar errores |
| Estado.json grande (>100 KB) | ‚ö†Ô∏è | Ejecute el archivo para reducir el tama√±o del archivo |
| Faltan archivos cr√≠ticos | ‚ùå | Ejecute `npx agileflow setup` para recrear |
| Script de archivo no ejecutable | ‚ö†Ô∏è | Ejecute `chmod +x scripts/archive-completed-stories.sh` |
| Gancho de archivo no configurado | ‚ùå | Ejecute `/agileflow:configure --enable=archival` |
| .claude/settings.json no v√°lido | ‚ùå | Ejecute `/agileflow:configure --migrate` para corregir el formato |

## Cu√°ndo correr

Ejecutar diagn√≥stico:
- **Despu√©s de la configuraci√≥n**: Verifique que la instalaci√≥n de AgileFlow se haya completado correctamente
- **Antes de operaciones importantes**: verifique el estado del sistema antes de cambios importantes
- **Peri√≥dicamente**: se ejecuta mensualmente/trimestralmente para mantener el estado del sistema.
- **Despu√©s de los cambios de configuraci√≥n**: Verifique que los cambios surtieron efecto correctamente
- **Al iniciar**: si tiene problemas, comience aqu√≠ para solucionarlos

## C√≥digos de salida

- **0**: todas las comprobaciones pasaron, el sistema est√° en buen estado
- **1**: Se encontraron uno o m√°s problemas que necesitan atenci√≥n.

Esto permite que el comando se utilice en canalizaciones de CI/CD y scripts automatizados.

## Acciones recomendadas

Si los problemas son foy, sigue estos pasos:

1. **JSON no v√°lido**: use `jq . <file>` para identificar y corregir errores de sintaxis manualmente
2. **Archivos grandes**: Ejecute el archivo: `bash scripts/archive-completed-stories.sh`
3. **Archivos faltantes**: Reinstalar: `npx agileflow setup`
4. **Problemas de formato**: Ejecutar migraci√≥n: `/agileflow:configure --migrate`
5. **Vuelva a ejecutar el diagn√≥stico**: verifique que los problemas est√©n resueltos

## Comandos relacionados

- [`/configure`](/commands/configure) - Configurar funciones de AgileFlow
- [`/validate-expertise`](/commands/validate-expertise) - Validar archivos de experiencia
- [`/compress`](/commands/compress) - Comprime status.json y reduce el tama√±o del archivo