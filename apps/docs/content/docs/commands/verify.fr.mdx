---
title: /v√©rifier
description: Ex√©cuter des tests de projet et mettre √† jour le statut des tests de story
---

# /v√©rifier

Ex√©cutez les tests de votre projet et mettez automatiquement √† jour le statut des tests d'histoire dans votre syst√®me de suivi. Verify est un composant essentiel de l'exploitation de session d'AgileFlow qui garantit la validation des tests tout au long de votre flux de travail de d√©veloppement.

## D√©marrage rapide

```bash
# Run all tests and update all in-progress stories
/agileflow:verify

# Run tests and update specific story
/agileflow:verify US-0042
```

La commande va¬†:
1. Configuration de test de charge √† partir de votre projet
2. Ex√©cuter la suite de tests
3. Analyser les r√©sultats des tests
4. Mettre √† jour le statut du test d'histoire (r√©ussite/√©chec)
5. Afficher un rapport clair avec des indicateurs visuels

## Principales fonctionnalit√©s

### Analyse de test automatique

Verify d√©tecte et analyse automatiquement les r√©sultats des tests de¬†:

| Framework | Example Output |
|-----------|-----------------|
| Jest/Vitest (Node.js) | `Tests: 42 passed, 42 total` |
| Pytest (Python) | `42 passed in 2.5s` |
| Cargo (Rust) | `test result: ok. 42 passed` |
| Go Test | `ok github.com/user/project` |

Si l'analyse √©choue, elle revient au code de sortie (0 = r√©ussite, diff√©rent de z√©ro = √©chec).

### Mises √† jour du statut de l'histoire

Les r√©sultats des tests sont automatiquement enregistr√©s dans vos stories¬†:

```json
{
  "story_id": "US-0042",
  "test_status": "passing",
  "test_results": {
    "last_run": "2025-12-06T10:30:00Z",
    "command": "npm test",
    "passed": 42,
    "failed": 0,
    "exit_code": 0,
    "output_summary": "All tests passed (42/42)"
  }
}
```

### Suivi sur plusieurs √©tages

Sans identifiant d'histoire sp√©cifique, v√©rifiez toutes les mises √† jour `in_progress` histoires:

```bash
/agileflow:verify
# Updates test_status for:
# - US-0042: passing
# - US-0043: passing
# - US-0044: failing
```

## Usage

### Ex√©cutez tous les tests

```bash
/agileflow:verify
```

Ex√©cute votre suite de tests et met √† jour toutes les histoires en cours avec les r√©sultats.

### Ex√©cuter des tests pour une histoire sp√©cifique

```bash
/agileflow:verify US-0042
```

Ex√©cute des tests et met √† jour uniquement l'√©tat des tests de l'US-0042. Utile lorsque vous travaillez sur une seule histoire.

### Param√®tres

| Parameter | Required | Default | Description |
|-----------|----------|---------|-------------|
| `STORY` | No | All in-progress | Story ID to update (e.g., US-0042) |

## Exemples

### Flux de travail de d√©veloppement typique

```bash
# Make code changes...

# Verify tests still pass
/agileflow:verify

# Output:
# ‚úÖ PASSED | npm test | 42 passed, 0 failed | 12.3s
# Updated stories:
# - US-0042: passing
# - US-0043: passing
```

### Les tests √©chouent - corrigez-les

```bash
/agileflow:verify

# Output:
# ‚ùå FAILED | npm test | 40 passed, 2 failed | 8.7s
#
# Failed tests:
#   ‚ùå auth.test.ts:42 - Expected redirect
#   ‚ùå api.test.ts:67 - Session token not persisting
#
# Updated stories:
# - US-0042: failing
# - US-0043: failing
```

### Avant de cr√©er une ligne de base

```bash
# Ensure all tests pass before marking a milestone
/agileflow:verify

# If passing:
/agileflow:baseline "Sprint 3 complete"

# If failing:
# (Fix tests first, then baseline)
```

## Format de sortie

### Rapport de r√©ussite

```text
üß™ Test Verification Complete

Command: npm test
Duration: 12.3s
Result: ‚úÖ PASSED

Tests: 42 passed, 0 failed, 42 total

Updated stories:
- US-0042: passing
- US-0043: passing

All in-progress stories have passing tests ‚úÖ
```

### Rapport d'√©chec

```text
üß™ Test Verification Complete

Command: npm test
Duration: 8.7s
Result: ‚ùå FAILED

Tests: 40 passed, 2 failed, 42 total

Failed tests:
  ‚ùå auth.test.ts:42
     Expected redirect to /dashboard
     Got redirect to /login

  ‚ùå api.test.ts:67
     Session token not persisting
     Cookie not set after login

Updated stories:
- US-0042: failing
- US-0043: failing

‚ö†Ô∏è  WARNING: 2 stories now have failing tests
```

### Temps mort

```text
üß™ Test Verification Failed

Command: npm test
Result: ‚è±Ô∏è  TIMEOUT (60s)

The test suite did not complete within 60 seconds.

Updated stories:
- US-0042: failing (timeout)

Consider:
1. Increase test_timeout_ms in environment.json
2. Optimize slow tests
3. Run specific test suites instead of all tests
```

## Configuration

V√©rifier utilise les param√®tres de `docs/00-meta/environment.json`:

```json
{
  "test_command": "npm test",
  "test_timeout_ms": 60000,
  "project_type": "nodejs"
}
```

Pour personnaliser le comportement du test¬†:

1. Modifier `docs/00-meta/environment.json`
2. Changement `test_command` √† votre commande
3. Changement `test_timeout_ms` au d√©lai d'attente souhait√©
4. Ex√©cutez √† nouveau la v√©rification

## Conditions pr√©alables

La v√©rification n√©cessite¬†:

- **Session harness initialized** - Courir `/agileflow:session:init` d'abord
- **docs/00-meta/environment.json** - Tester le fichier de configuration
- **docs/09-agents/status.json** - Suivi de l'histoire
- **Working tests** - Votre projet doit avoir une suite de tests

### Initialiser le harnais de session

Si vous obtenez une erreur ¬´¬†Harnais de session non initialis√©¬†¬ª¬†:

```bash
/agileflow:session:init
```

Cela va¬†:
- D√©tectez votre type de projet
- Cr√©er un environnement.json avec la configuration de test
- Configurer la v√©rification des tests pour toutes les histoires

## Int√©gration avec d'autres commandes

Verify est utilis√© automatiquement par¬†:

| Command | When |
|---------|------|
| `/babysit` | After implementing code changes |
| `/baseline` | Before creating verified checkpoints |
| `/session:resume` | At start of work session |
| `/pr` | Can include test status in PR description |

Vous pouvez √©galement ex√©cuter la v√©rification manuellement √† tout moment pour v√©rifier l'√©tat.

## Sc√©narios courants

### ¬´ Est-ce que mes tests r√©ussissent ?

```bash
/agileflow:verify
# Shows immediate pass/fail status with counts
```

### "Corriger les tests qui √©chouent"

```bash
# See which tests failed
/agileflow:verify

# Fix the failing tests in your code editor
# Then verify again
/agileflow:verify
# Should show ‚úÖ PASSED now
```

### "Une histoire √©choue, d'autres passent"

```bash
# Check which story has failing tests
/agileflow:verify

# Review that story's test_status in output
# Focus on fixing just that story's tests

# Run verify with specific story to confirm fix
/agileflow:verify US-0042
```

### ¬´ Les tests sont lents ‚Äì prennent trop de temps ¬ª

```bash
# Timeout occurred
/agileflow:verify

# Options:
# 1. Increase timeout in environment.json
# 2. Run subset of tests: npm test -- --testPathPattern=auth
# 3. Optimize slow tests

# Increase timeout and try again
```

## D√©pannage

### "Le harnais de session n'est pas initialis√©"

**Error:**
```text
‚ö†Ô∏è  Session harness not initialized
Run /agileflow:session:init to set up test verification
```

**Fix:**
```bash
/agileflow:session:init
```

### "Tests introuvables"

**Error:**
```text
‚ùå Test Command Failed
Command: npm test
Error: npm: command not found
```

**Fix:**
- Installer les d√©pendances¬†: `npm install`
- V√©rifiez que la commande de test dans environnement.json correspond √† votre configuration
- V√©rifiez que PATH inclut les outils requis

### "Histoire introuvable"

**Error:**
```text
‚ö†Ô∏è  Story US-0099 not found in status.json
Available in_progress stories:
- US-0042
- US-0043
```

**Fix:**
- V√©rifiez que l'ID de l'histoire est correct (v√©rifiez status.json)
- Ex√©cuter sans ID de story pour v√©rifier toutes les stories en cours

### "Statut.json invalide"

**Error:**
```text
‚ùå Cannot Update Status
File docs/09-agents/status.json is invalid or missing.
```

**Fix:**
```bash
# Re-initialize AgileFlow setup
/agileflow:setup
```

## Conseils

### Ex√©cutez des tests fr√©quemment

```bash
# After every major change
/agileflow:verify

# Before committing
/agileflow:verify

# Before creating PR
/agileflow:verify

# Before baseline
/agileflow:verify
```

### D√©tecter les r√©gressions t√¥t

Verify suit automatiquement l'√©tat des tests par histoire, afin que vous puissiez¬†:
- Voir quand les tests s'interrompent (test_status change)
- Identifiez quelle histoire a introduit l'√©chec
- R√©soudre les probl√®mes avant qu‚Äôils ne s‚Äôaccumulent

### Utiliser avec la ligne de base

```bash
# Ensure all tests pass
/agileflow:verify

# If all passing:
/agileflow:baseline "Milestone complete"

# If any failing:
# (Fix first, then baseline)
```

## Commandes associ√©es

- [`/garde d'enfants`](/commands/babysit) - Mentor d'impl√©mentation (les ex√©cutions sont v√©rifi√©es automatiquement)
- [`/ligne de base`](/commands/baseline) - Cr√©er des points de contr√¥le v√©rifi√©s (n√©cessite la r√©ussite des tests)
- [`/session:init`](/commands/session-init) - Initialiser le harnais de session
- [`/session:reprendre`](/commands/session-resume) - Reprendre la session (ex√©cute la v√©rification)
- [`/pr`](/commands/pr) - G√©n√©rer une demande d'extraction (affiche l'√©tat du test)
