---
title: /ci-setup
description: Bootstrap CI/CD-Workflow mit Tests und Qualitätsprüfungen
---
# /ci-setup

Erstellen Sie einen minimalen CI/CD-Workflow mit automatisierten Tests und Qualitätsprüfungen, die in GitHub-Aktionen und Code-Eigentumsregeln integriert sind.

## Schnellstart

```bash
/agileflow:ci-setup OWNERS=@username,@team
```

## Zweck

Dieser Befehl richtet eine vollständige CI/CD-Grundlage für Ihr Projekt ein, indem er:
- Erstellen eines GitHub Actions-Workflows mit Lint-, Typecheck- und Testjobs
- Festlegen des Code-Eigentums über eine CODEOWNERS-Datei
- Konfigurieren von Berechtigungen und Parallelitätskontrollen
- Bereitstellung von Anleitungen zur Aktivierung erforderlicher Prüfungen

## Parameter

| Parameter | Erforderlich | Standard | Beschreibung |
|-----------|----------|---------|-------------|
| `OWNERS` | Ja | - | GitHub-Benutzernamen oder Team-Handles (durch Kommas getrennt, z. B. `@alice,@team-backend`) |

## Beispiele

### Grundlegende Verwendung

```bash
/agileflow:ci-setup OWNERS=@alice,@bob
```

Richtet CI mit Alice und Bob als Codebesitzer ein.

### Mehrere Team-Handles

```bash
/agileflow:ci-setup OWNERS=@frontend-team,@devops-team,@maintainer
```

Weist mehrere Teams als Codebesitzer für Codeüberprüfungsanforderungen zu.

## Arbeitsablauf

Der Befehl folgt einem konsistenten Arbeitsablauf:

1. **ParsenEigentümereingabe** – Validiert und normalisiert GitHub-Handles
2. **CI-Workflow generieren** – Erstellt `.github/workflows/ci.yml` mit drei Jobs:
   - **Lint Job** – Platzhalter für ESLint, Prettier oder ähnliches
   - **Typecheck-Job** – Platzhalter für TypeScript, Flow, mypy oder ähnliches
   - **Testjob** – Platzhalter für Jest, Pytest, Cargo Test oder ähnliches
3. **CODEEIGENTÜMER generieren** – Erstellt Eigentumszuordnungen:
   - `/src/` → zugewiesene Eigentümer
   - `/docs/03-decisions/` → zugewiesene Eigentümer
4. **Vorschau anzeigen** – Zeigt beide generierten Dateien zur Überprüfung an
5. **Bestätigung abwarten** – Sie werden gefragt: „Diese Dateien erstellen? (JA/NEIN)“
6. **Dateien erstellen** – Schreibt CI-Workflow und CODEOWNERS, sofern genehmigt
7. **Nächste Schritte anzeigen** – Zeigt, wie erforderliche Prüfungen in GitHub aktiviert werden

## Ausgabedateien

Der Befehl erstellt zwei Dateien:

**`.github/workflows/ci.yml`** – GitHub Actions-Workflow mit:
– Läuft auf: push- und pull_request-Ereignissen
- Drei Jobs: Lint, Typecheck, Test (minimale Berechtigungen)
- Parallelitätskontrolle (bricht laufende r abuns)
- Allgemeine Jobbefehle zur individuellen Anpassung

**`CODEOWNERS`** – Code-Besitzkonfiguration:
```text
/src/ @owners
/docs/03-decisions/ @owners
```

## CI-Jobs

Jeder Job ist als Platzhalter für die Anpassung konfiguriert:

### Fusseljob
- Läuft auf: ubuntu-latest
- Zweck: Codestil- und Qualitätsprüfungen
- Anpassen mit: `npm run lint`, `eslint .`, `prettier --check` usw.

### Typecheck-Job
- Läuft auf: ubuntu-latest
- Zweck: Überprüfung der Typensicherheit
- Anpassen mit: `tsc --noEmit`, `flow check`, `mypy` usw.

### Testjob
- Läuft auf: ubuntu-latest
- Zweck: Automatisierte Testdurchführung
- Anpassen mit: `npm test`, `pytest`, `cargo test` usw.

## Nächste Schritte

Nach Abschluss der Einrichtung müssen Sie Folgendes tun:

1. **Auftragsbefehle anpassen**
   - Bearbeiten `.github/workflows/ci.yml`
   - Ersetzen Sie generische Befehle durch die tatsächlichen Befehle Ihres Projekts

2. **Zweigstellenschutz aktivieren**
   - Gehen Sie zu den GitHub-Repository-Einstellungen
   - Navigieren Sie zu Zweigstellen → Zweigschutzregeln
   - Regel erstellen für `main` Zweig

3. **Erforderliche Statusprüfungen hinzufügen**
   - Aktivieren Sie in den Zweigschutzeinstellungen Folgendes:
     - ✓ Zum Bestehen sind Statusprüfungen erforderlich
     - ✓ Erfordern, dass Zweige auf dem neuesten Stand sind
     - ✓ Administratoren einbeziehen
   - Wählen Sie aus, welche Prüfungen erforderlich sind (Lint, Typecheck, Test)

4. **Codeüberprüfung konfigurieren**
   - Aktivieren: Pull-Request-Überprüfungen erfordern
   - Anzahl der Gutachter festlegen (z. B. 1 oder 2)
   – Verwerfen Sie veraltete Pull-Request-Genehmigungen
   - Code-Eigentümer-Überprüfungen erforderlich (verwendet die CODEOWNERS-Datei)

5. **Optional: Warteschlange zusammenführen**
   – Aktivieren Sie die GitHub-Merge-Warteschlange für sicherere Bereitstellungen
   - Automatische Zusammenführung, nachdem alle Prüfungen bestanden wurden

## Anpassung

Die generierten Workflow-Dateien sind Ausgangspunkte. Sie sollten Folgendes anpassen:

**In `.github/workflows/ci.yml`**:
```yaml
# Change these commands to match your project
- run: npm run lint  # ESLint, Prettier, stylelint, etc.
- run: npm run typecheck  # TypeScript, Flow, mypy, etc.
- run: npm test  # Jest, pytest, cargo test, etc.
```

**In `CODEOWNERS`**:
```text
# Add more specific paths as your project grows
/src/api/ @api-team
/src/ui/ @frontend-team
/docs/ @documentation-team
*.md @maintainers
```

## Verwandte Befehle

- [`/setup-deployment`](/commands/deploy) – Bereitstellungspipelines konfigurieren
- [`/setup-tests`](/commands/tests) – Testinfrastruktur einrichten
- [`/agileflow:status`](/commands/status) – CI-Status prüfen