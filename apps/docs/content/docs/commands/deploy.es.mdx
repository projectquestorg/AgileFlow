---
title: /configuración-implementación
description: Configurar el proceso de implementación automatizado
---

# /configuración-implementación

Detecte automáticamente su tipo de proyecto y configure un proceso de implementación completo con configuraciones específicas de la plataforma, flujos de trabajo de CI/CD y administración del entorno.

## Inicio rápido

```bash
/agileflow:setup-deployment PLATFORM=auto ENV=both AUTO_DEPLOY=no
```

## Objetivo

Este comando configura de forma inteligente la infraestructura de implementación mediante:
- Detección automática de su tipo de proyecto (estático, full-stack, sin servidor, móvil, contenedores)
- Recomendar la plataforma de implementación óptima
- Generar archivos de configuración específicos de la plataforma
- Crear flujos de trabajo de implementación de GitHub Actions
- Configuración de plantillas de variables de entorno y gestión de secretos
- Proporcionar pasos siguientes claros para la implementación

## Parámetros

| Parameter | Required | Default | Description |
|-----------|----------|---------|-------------|
| `PLATFORM` | No | `auto` | `auto`, `vercel`, `netlify`, `heroku`, `aws`, `gcp`, `docker`, `eas` |
| `ENV` | No | `both` | `staging`, `production`, or `both` |
| `AUTO_DEPLOY` | No | `no` | `yes` or `no` - trigger deployment automatically on push |

## Ejemplos

### Detectar todo automáticamente

```bash
/agileflow:setup-deployment
```

Detecta el tipo de proyecto y recomienda la mejor plataforma automáticamente.

### Especificar la plataforma explícitamente

```bash
/agileflow:setup-deployment PLATFORM=vercel ENV=both
```

Configura la implementación de Vercel tanto para la puesta en escena como para la producción.

### Implementación de Docker en Fly.io

```bash
/agileflow:setup-deployment PLATFORM=docker ENV=production
```

Configura la implementación basada en Docker (funciona con Fly.io, AWS, GCP).

### Aplicación móvil con EAS

```bash
/agileflow:setup-deployment PLATFORM=eas ENV=production
```

Configura los servicios de aplicaciones de Expo para la implementación de React Native/Expo.

## Detección de proyectos

El comando analiza su proyecto para recomendar plataformas:

### Sitios estáticos
**Detected By**: HTML/CSS/JS, React/Vue/Angular SPA (sin backend)
- Recomendado: Vercel o Netlify
- Ideal para: Sitios de marketing, SPA, documentación.

### Aplicaciones web de pila completa
**Detected By**: Servidor Node.js, rutas API Express/Fastify/Next.js
- Recomendado: Vercel (Next.js) o Railway
- Ideal para: aplicaciones web con lógica backend

### Aplicaciones móviles (React Native / Expo)
**Detected By**: `expo` configuración, `react-native` dependencia
- Recomendado: EAS (Servicios de aplicaciones de Expo)
- Ideal para: aplicaciones móviles iOS/Android

### Aplicaciones basadas en contenedores
**Detected By**: `Dockerfile` presente
- Recomendado: Fly.io
- Ideal para: implementaciones personalizadas de Docker, microservicios

### Funciones sin servidor
**Detected By**: Funciones Lambda, configuración de API Gateway
- Recomendado: Funciones AWS Lambda o Vercel
- Ideal para: Cargas de trabajo de pago por ejecución impulsadas por eventos

## Archivos de salida

El comando crea varios archivos de configuración:

### Configuración de la plataforma
- **Vercel**: `vercel.json`
- **Netlify**: `netlify.toml`
- **Heroku**: `Procfile`, `app.json`
- **Docker**: `Dockerfile`, `.dockerignore`, `fly.toml`
- **EAS**: `eas.json`
- **AWS Lambda**: `serverless.yml`

### Flujo de trabajo de CI/CD
- `.github/workflows/deploy.yml` - Flujo de trabajo de implementación automatizado
- Apoya la puesta en escena → promoción de la producción.
- Se ejecuta al enviar a las ramas provisionales/principales.

### Gestión Ambiental
- `.env.example` - Plantilla para variables de entorno (segura de confirmar)
- `docs/02-practices/secrets-management.md` - Guía de gestión de secretos.
- `docs/02-practices/deployment.md` - Documentación de implementación

## Plataformas

### Vercel (recomendado para Next.js/React)
Ideal para: implementaciones de Next.js, React y SPA
- Construcciones automáticas en git push
- CDN global
- Funciones sin servidor integradas
- Interfaz de usuario de gestión del entorno
- Vista previa de implementaciones en relaciones públicas

**Next Steps**:
```bash
vercel link              # Connect your GitHub repo
vercel env add DATABASE_URL production
git push origin main     # Trigger deployment
```

### Netlify (recomendado para sitios estáticos)
Ideal para: sitios estáticos, JAMstack, SPA generales
- Construcciones automáticas desde git
- Análisis y formularios integrados
- Funciones sin servidor
- Integración de Netlify CMS
- Gestión de dominio personalizada

### Heroku (servidores Node.js/Python)
Ideal para: aplicaciones de servidor tradicionales
- Implementación simple basada en slugs
- PostgreSQL, complementos de Redis
- Gestión de variables de entorno.
- Funciones de colaboración en equipo

**Next Steps**:
```bash
heroku login
heroku create my-app
heroku addons:create heroku-postgresql:hobby-dev
git push heroku main
```

### Fly.io (implementación de Docker)
Ideal para: contenedores Docker, microservicios y tiempos de ejecución personalizados
- Implementación global con enrutamiento anycast
- soporte IPv6
- Escalado automático
- Volúmenes persistentes
- PostgreSQL incluido

**Next Steps**:
```bash
fly auth login
fly launch
fly deploy
```

### AWS (Lambda/ECS/Elastic Beanstalk)
Ideal para: aplicaciones escalables, microservicios
- Múltiples opciones de implementación (Lambda, ECS, Beanstalk)
- Rentable a escala
- Integración con el ecosistema de AWS
- Control de acceso detallado

### EAS (Expo/Reaccionar nativo)
Ideal para: aplicaciones móviles (iOS/Android)
- Construcciones nativas en la nube
- Envíos a App Store/Play Store
- Actualizaciones OTA
- Construcciones de clientes de desarrollo

## Flujo de trabajo

La configuración sigue un proceso consistente:

1. **Detect Project Type** - Analiza dependencias y archivos.
2. **Recommend Platform** - Sugiere alojamiento óptimo
3. **Generate Configuration** - Crea archivos específicos de la plataforma
4. **Create Workflow** - Configura acciones de GitHub para su implementación.
5. **Environment Setup** - Crea `.env.example` y documentos
6. **Show Preview** - Muestra todos los archivos para su revisión
7. **Create Files** - Escribe en el disco después de la confirmación SÍ/NO
8. **Display Next Steps** - Finalización de la configuración de las guías.

## Gestión Ambiental

### Puesta en escena versus producción

El comando puede configurar uno o ambos entornos:

```yaml
# Example: Two-branch deployment
Staging:
  - Branch: staging
  - URL: staging.example.com
  - Environment: development-like

Production:
  - Branch: main
  - URL: example.com
  - Environment: live
```

### Gestión de secretos

**Never commit secrets to git**. En cambio:

1. Usar `.env.example` como plantilla
2. Almacene secretos reales en la plataforma (Vercel, Heroku, etc.)
3. GitHub Actions proporciona `${{ secrets.NAME }}`
4. Leer `docs/02-practices/secrets-management.md` para detalles

**Common Secrets**:
- Cadenas de conexión de base de datos
- Claves API (Stripe, SendGrid, etc.)
- Credenciales de AWS
- Tokens de servicio de terceros

## Ejemplos por plataforma

### Implementación de Vercel

```bash
/agileflow:setup-deployment PLATFORM=vercel
```

Crea:
- `vercel.json` con configuración de compilación
- `.github/workflows/deploy.yml` para implementación automática
- `.env.example` con nombres de variables de Vercel
- Documentos de implementación

### Heroku con PostgreSQL

```bash
/agileflow:setup-deployment PLATFORM=heroku ENV=production
```

Crea:
- `Procfile` (web: inicio de npm)
- `app.json` con configuración de paquete de compilación
- Documentos de configuración de PostgreSQL
- Flujo de trabajo de implementación

### Docker a Fly.io

```bash
/agileflow:setup-deployment PLATFORM=docker
```

Crea:
- `Dockerfile` con construcción de varias etapas
- `.dockerignore` para una imagen limpia
- `fly.toml` con configuración de región y volumen
- Flujo de trabajo de implementación

## Opción de implementación automática

De forma predeterminada, las implementaciones requieren activación manual. Para habilitar la implementación automática en cada inserción:

```bash
/agileflow:setup-deployment AUTO_DEPLOY=yes
```

**Important**: Usar con precaución en producción. Considerar:
- Exija siempre que CI pase primero
- Utilice la puesta en escena → proceso de promoción principal
- Implementar indicadores de funciones para implementaciones graduales
- Supervisar el seguimiento de errores después de las implementaciones

## Siguientes pasos después de la configuración

1. **Add Platform Connection**
   ```bash
   vercel link
   # or
   fly auth login
   fly launch
   ```

2. **Configure Secrets**
   ```bash
   vercel env add DATABASE_URL production
   # or
   fly secrets set DATABASE_URL=postgresql://...
   ```

3. **Test Deployment**
   ```bash
   git push origin staging
   # Check deployment logs on platform dashboard
   ```

4. **Set Custom Domain** (Opcional)
   ```bash
   vercel domains add example.com
   # Follow platform-specific DNS setup
   ```

5. **Enable Auto-Deploy** (Opcional)
   - Después de probar la puesta en escena, habilite la implementación automática de producción
   - Configurar reglas de protección de sucursales

## Comandos relacionados

- [`/ci-configuración`](/commands/ci) - Configurar pruebas y controles de CI/CD
- [`/pruebas de configuración`](/commands/tests) - Configurar el marco de prueba.
- [`/generar-registro de cambios`](/commands/changelog) - Crear notas de la versión
