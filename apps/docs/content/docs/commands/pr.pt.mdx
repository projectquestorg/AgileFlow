---
title: /pr
description: Gere a descrição da solicitação pull da história
---
# /pr

Gere descrições de pull request completas e prontas para colar diretamente de suas histórias de usuário e evidências de teste. O comando PR garante que suas solicitações pull sejam bem documentadas, vinculadas a trabalhos relevantes e incluam todos os detalhes necessários para os revisores.

## Início rápido

```bash
# Generate PR from story with title
/agileflow:pr STORY=US-0042 TITLE="Add user profile"

# Generate PR with test evidence
/agileflow:pr STORY=US-0042 TITLE="Add user profile" TEST_EVIDENCE="All unit tests pass, E2E tested login→profile flow"
```

O comando irá:
1. Carregue a história de __NOTRASLATE_27__
2. Extraia critérios de aceitação, dependências e contexto
3. Crie uma descrição completa de RP com todas as seções
4. Saída de marcação pronta para colagem para GitHub/GitLab
5. Sugira uma mensagem de commit convencional para mesclagens de squash

## Principais recursos

### Contexto automático da história

A descrição do PR inclui automaticamente:

- **Referência épica** - A qual recurso este pertence
- **Resumo da história** - O que foi implementado
- **Dependências** - Outras histórias das quais isso depende
- **Critérios de aceitação** - Todos os AC com estados de caixa de seleção
- **Evidência de teste** - Seus resultados de teste e verificação
- **Avaliação de riscos** - Impactos potenciais e plano de reversão
- **Proprietários de código** - From arquivo CODEOWNERS

### Gerenciamento de lista de verificação

Os critérios de aceitação tornam-se uma lista de verificação de relações públicas:

```markdown
## Checklist

- [x] AC1: User can login with email and password
- [x] AC2: Login errors show validation feedback
- [ ] AC3: 2FA support (scope creep - skipped)
- [x] AC4: Session persists across page reloads
```

### Integração de evidências de teste

Inclua resultados de testes e verificação diretamente:

```markdown
## Test Evidence

### Unit Tests
- ✅ 42 tests passing, 0 failing
- Coverage: 87% (auth module)

### Integration Tests
- ✅ Login flow end-to-end verified
- ✅ Session persistence confirmed
- ✅ Tested with Chrome, Firefox, Safari

### Manual Testing
- ✅ Tested on desktop and mobile
- ✅ Accessibility check passed (WCAG AA)
```

### Confirmações Convencionais

Sugere mensagens de commit adequadas para mesclagens de squash:

__NOTRADUZIR_3__

## Uso

### Descrição básica de relações públicas

__NÃOTRADUZIR_4__

Gera PR com:
- Resumo da história de US-0042.md
- Todos os critérios de aceitação
- Problemas vinculados (história + dependências)
- Avaliação de risco
- Proprietários de código

### PR com evidências de teste

__NOTRADUZIR_5__

Adiciona seção de resultados de teste ao PR.

### PR com status de critérios de aceitação

__NOTRADUZIR_6__

Mostra quais AC foram concluídos ou ignorados.

### PR com notas adicionais

__NÃOTRADUZIR_7__

Adiciona notas personalizadas à descrição.

## Parâmetros

| Parâmetro | Obrigatório | Padrão | Descrição |
|-----------|----------|---------|------------|
| `STORY` | Sim | - | ID da história (por exemplo, US-0042) |
| `TITLE` | Sim | - | Título curto de relações públicas (1-5 palavras) |
| `TEST_EVIDENCE` | Não | "" | Resultados de testes, cobertura, notas de testes manuais |
| `AC_CHECKED` | Não | - | Situação dos critérios de aceitação (✓/✗ para cada) |
| `NOTES` | Não | "" | Contexto adicional ou notas de coordenação |

## Exemplos

### PR simples da história

__NÃOTRADUZIR_8__

### PR com evidência de teste completa

__NOTRADUZIR_9__

### PR com conclusão parcial de AC

__NOTRADUZIR_10__

### Notas de coordenação da equipe

__NOTRADUZIR_11__

## Estrutura de descrição de PR

### Seção de cabeçalho

```markdown
## Summary

[Generated from story summary + optional NOTES]
Explains what was built and why at a high level.

### Linked Issues

- Implements #US-0042
- Depends on #US-0039 (User schema)
- Relates to #EP-0005 (Authentication epic)

### Checklist

- [x] AC1: Users can login with email/password
- [x] AC2: Invalid credentials show error
- [x] AC3: Sessions persist across page reloads
- [x] AC4: Logout clears session and token
```

### Seção de teste

__NÃOTRADUZIR_13__

## Formato de commit convencional

O comando PR sugere uma mensagem de commit seguindo os commits convencionais:

__NOTRADUZIR_14__

### Exemplos

**Recurso**:
__NÃOTRADUZIR_15__

**Corrigir**:
__NOTRADUZIR_16__

**Documentos**:
```text
docs(api): add authentication API documentation

Documents JWT token generation, validation, and
refresh token flow.

Related to #US-0042
```

## Seções de modelo

Cada descrição de PR inclui:

1. **Resumo** – O que foi construído
2. **Problemas vinculados** - História + dependências
3. **Lista de verificação** - Status dos critérios de aceitação
4. **Evidência de teste** - Como foiconforme verificado
5. **Capturas de tela/GIFs** – Prova visual (se aplicável)
6. **Avaliação de riscos** – Impactos potenciais + plano de reversão
7. **Proprietários do código** – Quem deve revisar

## Quando usar

### Depois de completar uma história

__NÃOTRADUZIR_18__

### Enviando para revisão

__NOTRADUZIR_19__

### Múltiplas histórias dependentes

```bash
# Story with several dependencies
/agileflow:pr STORY=US-0044 TITLE="..."

# PR will show all linked stories
# Reviewers can see dependency chain
```

## Dicas

### Gere PR primeiro e depois envie

```bash
1. Complete implementation and testing
2. Run /agileflow:pr to generate description
3. Review the output
4. Create PR on GitHub/GitLab
5. Paste the generated description
6. Submit PR
```

### Incluir evidências de testes abrangentes

Melhores evidências de teste = revisão mais rápida:

```text
TEST_EVIDENCE="
- Unit Tests: 45/45 passing
- Integration Tests: Login flow, session management
- E2E: Desktop and mobile browsers
- Coverage: 89%
- Manual: Accessibility audit, performance check
"
```

### Vincule todos os trabalhos relacionados

PR encontrará automaticamente:
- História sendo implementada
- Dependências (outras histórias)
- Épico relacionado
- Proprietários de código para revisão

### Use para documentação

Mantenha as descrições de PR como documentação:
- Futuros desenvolvedores entendem o recurso
- Pode fazer referência em documentos de arquitetura
- Mostra estratégia de teste
- Documenta decisões de risco

## Integração com outros comandos

| Comando | Integração |
|--------|-------------|
| `/babysit` | Babysit gera relações públicas no final da implementação || `/review` | Run review before PR to catch issues |
| `/impact` | Include impact analysis notes |
| `/verify` | Include test results in test evidence section |
| `/baseline` | PR marks feature ready for baseline/release |

## Workflow Example

```bash
# 1. Work on story with babysit
/agileflow:babysit
# → Choose US-0042
# → Implement with guidance
# → Tests passing

# 2. Verify tests before PR
/agileflow:verify US-0042
# → Confirms: test_status: passing

# 3. Generate PR description
/agileflow:pr STORY=US-0042 TITLE="User authentication" TEST_EVIDENCE="42/42 tests passing, E2E verified"
# → Copy output

# 4. Review code quality
/agileflow:review
# → Fix any issues

# 5. Submit PR with generated description
# → Paste PR output to GitHub
# → Submit for review

# 6. After merge, mark as done
# → Update status.json: status=completed
```

## Troubleshooting

### "Story not found"

**Error**: Story file does not exist

**Fix**: Verify story ID is correct:
```bash
/agileflow:pr STORY=US-0042 TITLE="..."
# Check that docs/06-stories/US-0042.md exists
```

### "Acceptance criteria formatting issue"

**Fix**: Ensure AC_CHECKED format matches AC count:
```bash
# BAD - Wrong number of items
AC_CHECKED="✓ AC1, ✓ AC2"

# GOOD - One per AC in story
AC_CHECKED="✓ AC1, ✓ AC2, ✓ AC3, ✗ AC4"
```

### "Test evidence too long"

**Fix**: Summarize test evidence:
```bash
# Instead of full test output, provide summary
TEST_EVIDENCE="
- Unit tests: 45/45 passing
- Integration: Login flow verified
- E2E: Chrome, Firefox tested
- Coverage: 89%
"
```

## Related Commands

- [`/babysit`](/commands/babysit) - Implementation mentor (uses pr at end)
- [`/story`](/commands/story) - Create stories with AC that pr references
- [`/review`](/commands/review) - Code review before PR
- [`/verify`](/commands/verify) - Run tests for evidence
- [`/impact`](/commands/impact) - Analyze Impacto de relações públicas
- [`/baseline`](/commands/baseline) - Marcar recurso como concluído após mesclagem