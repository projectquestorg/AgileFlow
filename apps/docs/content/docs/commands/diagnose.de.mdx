---
title: "/diagnostizieren"
description: Diagnose des Systemzustands
---

# /diagnose

F√ºhren Sie umfassende AgileFlow-Systemzustandspr√ºfungen durch, um potenzielle Probleme zu identifizieren, bevor sie zu Ausf√§llen f√ºhren.

## Schnellstart

```bash
/agileflow:diagnose
```

Dadurch wird eine vollst√§ndige Diagnosesuite ausgef√ºhrt, ohne dass Argumente erforderlich sind.

## Parameters

Dieser Befehl ben√∂tigt keine Parameter ‚Äì er f√ºhrt automatisch alle Diagnosepr√ºfungen durch.

## Was es pr√ºft

Das Diagnosesystem validiert Ihre gesamte AgileFlow-Installation:

### 1. JSON-Dateivalidierung
- Validiert alle kritischen JSON-Dateien (status.json, Metadaten, Einstellungen)
- √úberpr√ºft Dateiformat und -struktur
- Gibt Dateigr√∂√üen in KB an
- Warnt, wenn status.json 100 KB √ºberschreitet (empfohlen Archivierung)
- Zeigt die Anzahl der Storys in aktiven und archivierten Dateien an

### 2. Integrit√§t der Dateistruktur
- √úberpr√ºft, ob die erforderlichen Verzeichnisse vorhanden sind (docs/, .agileflow/, .claude/).
- Pr√ºft auf kritische Dateien (metadata.json, status.json)
- Unterscheidet zwischen kritischen und optionalen Dateien

### 3. Automatisches Archivierungssystem
- √úberpr√ºft, ob ein Archivskript vorhanden und ausf√ºhrbar ist
- √úberpr√ºft die Hook-Konfiguration in .claude/settings.json
- Meldet den Archivierungsschwellenwert aus Metadaten
- Identifiziert fehlende oder falsch konfigurierte Komponenten

### 4. Hakensystem
- Validiert die .claude/settings.json-Struktur
- Z√§hlt SessionStart-, UserPromptSubmit- und Stop-Hooks
- Meldet Konfigurationsprobleme
- √úberpr√ºft die Ausf√ºhrbarkeit des Hooks

### 5. Analyse der Dateigr√∂√üe
- √úberwacht die Gr√∂√üe von status.json mit Schwellenwerten
- Zeigt die Anzahl der aktiven und archivierten Storys an
- Empfiehlt bei Bedarf die Archivierung
- Bietet gr√∂√üenbasierte Empfehlungen

## Beispiele

### Grundlegende Diagnose

```bash
/agileflow:diagnose
```

F√ºhrt eine vollst√§ndige Systemzustandspr√ºfung durch und zeigt die Ergebnisse an.

### Ausgabeindikatoren

Die Diagnose verwendet diese Statusindikatoren:
- **‚úÖ** (H√§kchen): Gesundheitspr√ºfung bestanden
- **‚ùå** (Kreuz): Gesundheitspr√ºfung fehlgeschlagen
- **‚ö†Ô∏è** (Warnung): Unkritisches Problem gefunden
- **‚ÑπÔ∏è** (Info): Informationsstatus

## Typische Ausgabe

```text
üîç AgileFlow System Diagnostics
================================

üìã JSON File Validation
----------------------
  ‚úÖ docs/00-meta/agileflow-metadata.json (42KB)
  ‚úÖ docs/09-agents/status.json (28KB, 12 stories)
  ‚ÑπÔ∏è  docs/09-agents/status-archive.json - not found (optional)
  ‚úÖ .claude/settings.json (5KB)

üì¶ Auto-Archival System
----------------------
  ‚úÖ Archive script exists and is executable
  ‚úÖ Auto-archival hook configured
  ‚úÖ Archival threshold: 7 days

ü™ù Hooks System
---------------
  ‚úÖ .claude/settings.json is valid JSON
  ‚ÑπÔ∏è  SessionStart hooks: 2
  ‚ÑπÔ∏è  UserPromptSubmit hooks: 1
  ‚ÑπÔ∏è  Stop hooks: 1

üìè File Size Analysis
---------------------
  status.json: 28KB (12 stories)
  ‚úÖ status.json size is healthy

üìä Diagnostic Summary
=====================
‚úÖ All checks passed! System is healthy.
```

## H√§ufige Probleme erkannt

| Issue | Indicator | Solution |
|-------|-----------|----------|
| Invalid JSON syntax | ‚ùå | Fix JSON using `jq . <file>` to identify errors |
| Large status.json (>100KB) | ‚ö†Ô∏è | Run archival to reduce file size |
| Missing critical files | ‚ùå | Run `npx agileflow setup` to recreate |
| Archive script not executable | ‚ö†Ô∏è | Run `chmod +x scripts/archive-completed-stories.sh` |
| Archival hook not configured | ‚ùå | Run `/agileflow:configure --enable=archival` |
| Invalid .claude/settings.json | ‚ùå | Run `/agileflow:configure --migrate` to fix format |

## Wann laufen?

Diagnose ausf√ºhren:
- **After setup**: √úberpr√ºfen Sie, ob die AgileFlow-Installation erfolgreich abgeschlossen wurde
- **Before major operations**: √úberpr√ºfen Sie den Systemzustand vor gro√üen √Ñnderungen
- **Periodically**: Monatlich/viertelj√§hrlich ausf√ºhren, um den Systemzustand aufrechtzuerhalten
- **After configuration changes**: √úberpr√ºfen Sie, ob die √Ñnderungen korrekt wirksam wurden
- **On startup**: Wenn Probleme auftreten, beginnen Sie hier mit der Fehlerbehebung

## Exit-Codes

- **0**: Alle Pr√ºfungen bestanden, das System ist fehlerfrei
- **1**: Es wurden ein oder mehrere Probleme gefunden, die Ihrer Aufmerksamkeit bed√ºrfen

Dadurch kann der Befehl in CI/CD-Pipelines und automatisierten Skripten verwendet werden.

## Empfohlene Aktionen

Wenn Probleme gefunden werden, gehen Sie folgenderma√üen vor:

1. **Invalid JSON**: Verwenden `jq . <file>` um Syntaxfehler manuell zu identifizieren und zu beheben
2. **Large files**: Archivierung ausf√ºhren: `bash scripts/archive-completed-stories.sh`
3. **Missing files**: Neu installieren: `npx agileflow setup`
4. **Format issues**: Migration ausf√ºhren: `/agileflow:configure --migrate`
5. **Re-run diagnostics**: √úberpr√ºfen Sie, ob die Probleme behoben sind

## Verwandte Befehle

- [`/configure`](/commands/configure) - Konfigurieren Sie AgileFlow-Funktionen
- [`/validate-expertise`](/commands/validate-expertise) - Validieren Sie Fachwissensdateien
- [`/komprimieren`](/commands/compress) - Komprimieren Sie status.json und reduzieren Sie die Dateigr√∂√üe
