---
title: /diagnostizieren
description: Diagnose des Systemzustands
---
# /diagnose

F√ºhren Sie umfassende AgileFlow-Systemzustandspr√ºfungen durch, um potenzielle Probleme zu identifizieren, bevor sie zu Ausf√§llen f√ºhren.

## Schnellstart

```bash
/agileflow:diagnose
```

Dadurch wird eine vollst√§ndige Diagnosesuite ausgef√ºhrt, ohne dass Argumente erforderlich sind.

## Parameter

Dieser Befehl ben√∂tigt keine Parameter ‚Äì er f√ºhrt automatisch alle Diagnosepr√ºfungen durch.

## Was es pr√ºft

Das Diagnosesystem validiert Ihre gesamte AgileFlow-Installation:

### 1. JSON-Dateivalidierung
- Validiert alle kritischen JSON-Dateien (status.json, Metadaten, Einstellungen)
- √úberpr√ºft Dateiformat und -struktur
- Meldet Dateigr√∂√üen in KB
‚Äì Warnt, wenn status.json 100 KB √ºberschreitet (empfohlen Archivierung)
- Zeigt die Anzahl der Storys in aktiven und archivierten Dateien an

### 2. Integrit√§t der Dateistruktur
‚Äì √úberpr√ºft, ob die erforderlichen Verzeichnisse vorhanden sind (docs/, .agileflow/, .claude/)
- Pr√ºft auf kritische Dateien (metadata.json, status.json)
- Unterscheidet zwischen kritischen und optionalen Dateien

### 3. Auto-Archivierungssystem
- √úberpr√ºft, ob ein Archivskript vorhanden und ausf√ºhrbar ist
- √úberpr√ºft die Hook-Konfiguration in .claude/settings.json
‚Äì Meldet den Archivierungsschwellenwert anhand von Metadaten
- Identifiziert fehlende oder falsch konfigurierte Komponenten

### 4. Hakensystem
‚Äì Validiert die .claude/settings.json-Struktur
‚Äì Z√§hlt SessionStart-, UserPromptSubmit- und Stop-Hooks
- Meldet Konfigurationsprobleme
- √úberpr√ºft die Ausf√ºhrbarkeit des Hooks

### 5. Dateigr√∂√üenanalyse
‚Äì √úberwacht die Gr√∂√üe von status.json mit Schwellenwerten
- Zeigt die Anzahl der aktiven und archivierten Storys an
- Empfiehlt bei Bedarf die Archivierung
- Bietet gr√∂√üenbasierte Empfehlungen

## Beispiele

### Grundlegende Diagnose

```bash
/agileflow:diagnose
```

F√ºhrt eine vollst√§ndige Systemzustandspr√ºfung durch und zeigt die Ergebnisse an.

### Ausgabeindikatoren

Die Diagnose verwendet diese Statusindikatoren:
- **‚úÖ** (H√§kchen): Gesundheitspr√ºfung bestanden
- **‚ùå** (Kreuz): Gesundheitspr√ºfung fehlgeschlagen
- **‚ö†Ô∏è** (Warnung): Unkritisches Problem gefunden
- **‚ÑπÔ∏è** (Info): Informationsstatus

## Typische Ausgabe

```text
üîç AgileFlow System Diagnostics
================================

üìã JSON File Validation
----------------------
  ‚úÖ docs/00-meta/agileflow-metadata.json (42KB)
  ‚úÖ docs/09-agents/status.json (28KB, 12 stories)
  ‚ÑπÔ∏è  docs/09-agents/status-archive.json - not found (optional)
  ‚úÖ .claude/settings.json (5KB)

üì¶ Auto-Archival System
----------------------
  ‚úÖ Archive script exists and is executable
  ‚úÖ Auto-archival hook configured
  ‚úÖ Archival threshold: 7 days

ü™ù Hooks System
---------------
  ‚úÖ .claude/settings.json is valid JSON
  ‚ÑπÔ∏è  SessionStart hooks: 2
  ‚ÑπÔ∏è  UserPromptSubmit hooks: 1
  ‚ÑπÔ∏è  Stop hooks: 1

üìè File Size Analysis
---------------------
  status.json: 28KB (12 stories)
  ‚úÖ status.json size is healthy

üìä Diagnostic Summary
=====================
‚úÖ All checks passed! System is healthy.
```

## H√§ufige Probleme erkannt

| Problem | Indikator | L√∂sung |
|-------|-----------|----------|
| Ung√ºltige JSON-Syntax | ‚ùå | Korrigieren Sie JSON mit `jq . <file>` zur Fehlererkennung |
| Gro√üe status.json (>100 KB) | ‚ö†Ô∏è | F√ºhren Sie die Archivierung aus, um die Dateigr√∂√üe zu reduzieren |
| Fehlende kritische Dateien | ‚ùå | F√ºhren Sie `npx agileflow setup` aus, um | neu zu erstellen
| Archivskript nicht ausf√ºhrbar | ‚ö†Ô∏è | F√ºhren Sie `chmod +x scripts/archive-completed-stories.sh` | aus
| Archivierungs-Hook nicht konfiguriert | ‚ùå | F√ºhren Sie `/agileflow:configure --enable=archival` | aus
| Ung√ºltige .claude/settings.json | ‚ùå | F√ºhren Sie `/agileflow:configure --migrate` aus, um das Format zu korrigieren |

## Wann ausgef√ºhrt werden soll

Diagnose ausf√ºhren:
- **Nach der Einrichtung**: √úberpr√ºfen Sie, ob die AgileFlow-Installation erfolgreich abgeschlossen wurde
- **Vor gr√∂√üeren Operationen**: √úberpr√ºfen Sie den Systemzustand vor gro√üen √Ñnderungen
- **Periodisch**: Monatlich/viertelj√§hrlich ausf√ºhren, um den Systemzustand aufrechtzuerhalten
- **Nach Konfigurations√§nderungen**: √úberpr√ºfen Sie, ob die √Ñnderungen korrekt wirksam wurden
- **Beim Start**: Wenn Probleme auftreten, beginnen Sie hier mit der Fehlerbehebung

## Exit-Codes

- **0**: Alle Pr√ºfungen bestanden, das System ist fehlerfrei
- **1**: Es wurden ein oder mehrere Probleme gefunden, die Ihrer Aufmerksamkeit bed√ºrfen

Dadurch kann der Befehl in CI/CD-Pipelines und automatisierten Skripten verwendet werden.

## Empfohlene Aktionen

Wenn Probleme auftretenund, folgen Sie diesen Schritten:

1. **Ung√ºltiges JSON**: Verwenden Sie `jq . <file>`, um Syntaxfehler manuell zu identifizieren und zu beheben
2. **Gro√üe Dateien**: Archivierung ausf√ºhren: `bash scripts/archive-completed-stories.sh`
3. **Fehlende Dateien**: Neuinstallation: `npx agileflow setup`
4. **Formatprobleme**: Migration ausf√ºhren: `/agileflow:configure --migrate`
5. **Diagnose erneut ausf√ºhren**: √úberpr√ºfen Sie, ob die Probleme behoben sind

## Verwandte Befehle

- [`/configure`](/commands/configure) ‚Äì AgileFlow-Funktionen konfigurieren
- [`/validate-expertise`](/commands/validate-expertise) ‚Äì Gutachtendateien validieren
- [`/compress`](/commands/compress) ‚Äì Status.json komprimieren und Dateigr√∂√üe reduzieren