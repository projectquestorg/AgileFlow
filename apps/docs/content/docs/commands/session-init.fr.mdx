---
title: "/session:initialisation"
description: Initialiser le harnais de session avec vérification des tests
---

# /session:initialisation

Initialisez ou vérifiez le système de gestion de session. Cette commande configure l'infrastructure de suivi de session.

## Démarrage rapide

```bash
/agileflow:session:init
```

## Ce qu'il fait

1. Crée `.agileflow/sessions/` répertoire s'il manque
2. Initialise `registry.json` avec schéma
3. Enregistre le répertoire actuel en tant que session
4. Crée un fichier de verrouillage avec l'ID de processus actuel
5. Affiche l'état de la session

## Exemple de sortie

### Première configuration

```
✓ Session initialized

  Session ID: 1
  Path: /home/user/myproject
  Branch: main

No other active sessions detected.
```

### Déjà initialisé

```
✓ Session already active

  Session ID: 1
  Path: /home/user/myproject
  Branch: main
```

### Autres sessions actives

```
✓ Session initialized

  Session ID: 1 (current)
  Path: /home/user/myproject
  Branch: main

⚠️ 2 other session(s) active in this repo.
   Run /agileflow:session:status to see all sessions.
   Run /agileflow:session:new to create isolated workspace.
```

## Quand est-ce qu’on l’appelle ?

### Automatique (recommandé)

Le hook SessionStart l'appelle automatiquement au démarrage de Claude Code :

```json
// .claude/settings.json
{
  "hooks": {
    "SessionStart": {
      "command": "node scripts/agileflow-welcome.js"
    }
  }
}
```

Le script de bienvenue enregistre la session et affiche l'état.

### Manuel

Exécutez manuellement pour :
- Vérifier que le système de session fonctionne
- Ré-inscrire après des problèmes de système
- Problèmes de session de débogage

```bash
/agileflow:session:init
```

## Fichiers créés

### Fichier de registre

`.agileflow/sessions/registry.json`:

```json
{
  "schema_version": "1.0.0",
  "next_id": 2,
  "project_name": "myproject",
  "sessions": {
    "1": {
      "path": "/home/user/myproject",
      "branch": "main",
      "created": "2025-12-26T10:00:00Z",
      "is_main": true
    }
  }
}
```

### Verrouiller le fichier

`.agileflow/sessions/1.lock`:

```
pid=12345
started=1703588400
```

## Dépannage

### Session non détectée

```bash
# Check if registry exists
ls .agileflow/sessions/

# Re-initialize
/agileflow:session:init
```

### Avertissement de verrouillage obsolète

Si vous voyez des verrous obsolètes, la commande init les nettoie :

```
✓ Session initialized
  Cleaned 1 stale session(s)
```

### Problèmes d'autorisation

Assurez-vous d'avoir un accès en écriture à `.agileflow/`:

```bash
ls -la .agileflow/
# Should show your user as owner
```

## Intégration avec le script de bienvenue

Le script de bienvenue AgileFlow inclut la détection de session :

```
╭──────────────────────┬────────────────────────────────────╮
│ agileflow v2.53.0   main (cc45511)                        │
├──────────────────────┼────────────────────────────────────┤
│ Sessions             │ ✓ Session 1 (only)                 │
╰──────────────────────┴────────────────────────────────────╯
```

Ou avec des conflits :

```
│ Sessions             │ ⚠️ 2 other active                   │

⚠️  Other Claude session(s) active in this repo.
```

## Commandes associées

- [`/session:statut`](/commands/session-status) - Voir toutes les séances
- [`/session:nouveau`](/commands/session-new) - Créer une session parallèle
- [`/session:fin`](/commands/session-end) - Terminer la session en cours
