---
title: / خط الأساس
description: وضع علامة على الحالة الحالية كخط أساس تم التحقق منه
---

# / خط الأساس

قم بإنشاء نقاط تفتيش تم التحقق منها تمثل الحالات المعروفة الجيدة لمشروعك. تستخدم الخطوط الأساسية علامات git وتتبع البيانات التعريفية لإنشاء نقاط إعادة تعيين آمنة، ومقارنة نتائج الاختبار بمرور الوقت، وتتبع التراجعات من الحالات التي تم التحقق منها.

## بداية سريعة

```bash
# Create baseline (requires passing tests)
/agileflow:baseline

# Create with custom message
/agileflow:baseline "Sprint 3 complete - all features tested"

# Create for epic completion
/agileflow:baseline "EP-0005: User authentication complete"
```

الأمر سوف:
1. التحقق من اجتياز الاختبارات
2. تحقق من أن شجرة عمل git نظيفة
3. إنشاء علامة git مع الطابع الزمني
4. تحديث البيانات الوصفية (baseline_commit، baseline_history)
5. قم بتمييز القصص على أنها تم التحقق منها في هذا الأساس
6. عرض تقرير التحقق النهائي

## الميزات الرئيسية

### التحقق من السلامة

قبل إنشاء خط الأساس، تحقق مما يلي:

- ✅ **Tests passing** - يجب اجتياز جميع الاختبارات (0 رسوب)
- ✅ **Clean git** - لا توجد تغييرات غير ملتزم بها
- ✅ **Story tests passing** - جميع القصص قيد التقدم لديها اختبارات النجاح
- ✅ **Session initialized** - بيئة.json موجودة

إذا فشل أي فحص، فسيتم حظر إنشاء خط الأساس بتعليمات واضحة.

### العلامات ذات الطابع الزمني

تقوم الخطوط الأساسية بإنشاء علامات git ذات طوابع زمنية دقيقة:

```text
agileflow-baseline-20251222-143000
                    YYYYMMDD-HHMMSS
```

استخدم هذه العلامات من أجل:
- إعادة التعيين إلى نقطة التفتيش المحددة: `git checkout agileflow-baseline-...`
- مقارنة الإصدارات: `git diff agileflow-baseline-20251206... agileflow-baseline-20251215...`
- شارك مع الفريق: `git push origin agileflow-baseline-...`

### تتبع البيانات الوصفية

جميع المعلومات الأساسية المخزنة في:

```text
docs/00-meta/environment.json
  ├─ baseline_commit: "abc123def456"
  └─ baseline_established: "2025-12-06T14:30:00Z"

docs/09-agents/session-state.json
  └─ baseline_history: [
       {
         "tag": "agileflow-baseline-20251206-143000",
         "commit": "abc123def456",
         "created_at": "2025-12-06T14:30:00Z",
         "message": "Sprint 3 complete",
         "test_count": 42,
         "stories_verified": ["US-0043", "US-0044", "US-0045"]
       }
     ]

docs/06-stories/US-0042.md (frontmatter)
  └─ verified_at_baseline: "agileflow-baseline-20251206-143000"
```

### التاريخ الأساسي

عرض جميع خطوط الأساس التي تم إنشاؤها:

```text
Baselines (most recent first):

1. agileflow-baseline-20251206-143000
   Date: 2025-12-06 14:30:00
   Message: Sprint 3 complete - all features tested
   Tests: 42/42 passing
   Stories: US-0043, US-0044, US-0045

2. agileflow-baseline-20251130-103000
   Date: 2025-11-30 10:30:00
   Message: Before auth refactor
   Tests: 38/38 passing
   Stories: US-0040, US-0041
```

## الاستخدام

### خط الأساس الأساسي

```bash
/agileflow:baseline
```

إنشاء خط الأساس بالرسالة الافتراضية "خط الأساس - اجتياز جميع الاختبارات"

### مع رسالة مخصصة

```bash
/agileflow:baseline "Sprint 3 complete - 15 stories done"
```

تساعدك الرسائل الهادفة على تذكر ما يمثله خط الأساس هذا.

### رسالة متعددة الأسطر

```bash
/agileflow:baseline "
Release v1.0 - Ready for production

All features tested and approved
Security audit passed
Performance benchmarks met
Documentation complete
"
```

## حدود

| Parameter | Required | Default | Description |
|-----------|----------|---------|-------------|
| `MESSAGE` | No | "Baseline - all tests passing" | Descriptive message for this baseline |

## أمثلة

### بعد الانتهاء الملحمي

```bash
# All stories in EP-0005 are done and tested
/agileflow:baseline "EP-0005: User authentication complete"

# Output:
# ✅ Baseline Established
#
# Tag: agileflow-baseline-20251206-143000
# Commit: abc123def456
# Message: EP-0005: User authentication complete
# Tests: 42/42 passing
# Stories: US-0039, US-0040, US-0041, US-0042
#
# Epic is now marked as verified baseline!
```

### قبل إعادة البناء المحفوفة بالمخاطر

```bash
# Take safety checkpoint before refactoring
/agileflow:baseline "Before auth system refactor"

# Make changes...
# If something breaks, reset with:
# git checkout agileflow-baseline-20251206-143000
```

### الانتهاء من السباق

```bash
/agileflow:baseline "Sprint 12 complete - 15 stories finished, 58 tests passing"

# Sprint checkpoint created
# Can track progress across sprints
```

### جاهز للإصدار

```bash
/agileflow:baseline "v1.0 release candidate - all tests passing, security audit done"

# Release checkpoint saved
# Can reference later if issues arise
```

## سير العمل

### فحوصات ما قبل الرحلة

```bash
1. Check session harness initialized
   └─ docs/00-meta/environment.json exists

2. Verify tests passing
   └─ Run: npm test (or configured test command)
   └─ Exit code must be 0

3. Check git working tree clean
   └─ No uncommitted changes
   └─ No untracked files

4. Verify story test status
   └─ All in_progress stories have test_status: passing
```

### إنشاء خط الأساس

```bash
1. Generate tag name with timestamp
   └─ agileflow-baseline-YYYYMMDD-HHMMSS

2. Get baseline message (from arg or user input)
   └─ Default: "Baseline - all tests passing"

3. Create git annotated tag
   └─ git tag -a "agileflow-baseline-..." -m "message"

4. Update environment.json
   └─ baseline_commit: commit SHA
   └─ baseline_established: ISO timestamp

5. Update session-state.json
   └─ Add to baseline_history array

6. Update story metadata
   └─ Each verified story gets verified_at_baseline tag

7. Display final report
```

## الإخراج

### تقرير النجاح

```text
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ Baseline Established
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Tag: agileflow-baseline-20251206-143000
Commit: abc123def456
Message: Sprint 3 complete - all features tested
Timestamp: 2025-12-06 14:30:00

Verification Status:
  ✅ Tests: 42/42 passing
  ✅ Stories: 3 verified (US-0043, US-0044, US-0045)
  ✅ Git: Clean working tree
  ✅ Branch: main

This baseline can be used to:
  • Reset to known-good state (git checkout <tag>)
  • Compare test results over time
  • Track regression from this point
  • Verify deployment readiness

Baseline saved in:
  • Git tag: agileflow-baseline-20251206-143000
  • environment.json: baseline_commit updated
  • session-state.json: baseline history
  • Story metadata: verified_at_baseline

To push baseline to remote:
  git push origin agileflow-baseline-20251206-143000

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### الفشل: عدم اجتياز الاختبارات

```text
❌ Cannot Create Baseline - Tests Failing

Command: npm test
Result: 2/42 tests failed

Failed tests:
  ❌ auth.test.ts:42 - Session timeout handling
  ❌ api.test.ts:15 - Rate limiting check

Baselines require all tests passing.

Options:
  1. Fix failing tests
  2. Skip failing tests (creates PARTIAL baseline)
  3. Cancel baseline creation

Run /agileflow:verify to see full details
Then fix the tests and try again.
```

### الفشل: البوابة القذرة

```text
❌ Cannot Create Baseline - Uncommitted Changes

Working tree changes:
  M src/components/Profile.tsx
  M src/api/auth.ts
  ?? temp/debug.log

Baselines require clean git state.

Options:
  1. Commit changes first
  2. Stash changes and create baseline
  3. Cancel baseline creation

Commit your changes and try again.
```

### الفشل: لم تتم التهيئة

```text
⚠️  Session Harness Not Initialized

The baseline command requires session harness configuration.

Run /agileflow:session:init to:
1. Detect your project type
2. Create environment.json
3. Enable baseline creation

Or manually create docs/00-meta/environment.json
```

## متى يتم إنشاء خطوط الأساس

### أفضل الأوقات

| When | Message |
|------|---------|
| After epic completion | "EP-0005: User authentication complete" |
| After sprint ends | "Sprint 12 complete - 15 stories finished" |
| Before risky refactor | "Before auth system refactor" |
| Before major update | "Before updating TensorFlow" |
| At release milestone | "v1.0 release candidate" |

### فوائد

- **Reset point**: `git checkout agileflow-baseline-...` للعودة
- **Regression detection**: قارن الاختبارات الحالية بخط الأساس
- **Progress tracking**: إظهار التطور مع مرور الوقت
- **Release safety**: وضع علامة على الحالة القابلة للنشر التي تم التحقق منها
- **Team sharing**: دفع العلامات للوصول إلى الفريق

## الميزات المتقدمة

### قارن بخط الأساس

عرض ما تغير منذ خط الأساس:

```bash
# Show commits since baseline
git log agileflow-baseline-20251206-143000..HEAD

# Show code changes since baseline
git diff agileflow-baseline-20251206-143000..HEAD
```

### قائمة كافة خطوط الأساس

```bash
# Show all baseline tags
git tag -l "agileflow-baseline-*" --sort=version:refname
```

### استعادة من خط الأساس

```bash
# Create safety backup first
git checkout -b backup/pre-restore

# Restore to specific baseline
git checkout agileflow-baseline-20251206-143000

# Or restore to latest baseline
git checkout $(git tag -l "agileflow-baseline-*" --sort=version:refname | tail -1)
```

### ادفع إلى الفريق

```bash
# Push specific baseline to remote
git push origin agileflow-baseline-20251206-143000

# Push all baselines
git push origin "refs/tags/agileflow-baseline-*"
```

## التكامل مع الأوامر الأخرى

| Command | Integration |
|---------|-------------|
| `/verify` | Baseline requires passing tests (runs verify) |
| `/babysit` | Babysit guides to baseline at feature completion |
| `/pr` | PR can reference baseline in description |
| `/session:init` | Initializes baseline capability |
| `/session:resume` | Checks baseline status at session start |

## تدفق التنمية النموذجي

```text
Start Sprint
  ↓
Work on stories with /agileflow:babysit
  ↓
Verify tests with /agileflow:verify
  ↓
Code review with /agileflow:review
  ↓
Create PR with /agileflow:pr
  ↓
Merge PR
  ↓
Sprint complete - Run /agileflow:baseline
  ↓
Next sprint
```

## نصائح

### إنشاء بشكل متكرر

```bash
# Weekly baselines
/agileflow:baseline "Week 50 complete"

# Per-epic baselines
/agileflow:baseline "EP-0005 complete"

# Pre-risky-change baselines
/agileflow:baseline "Before major refactor"
```

### استخدم رسائل ذات معنى

**Good messages**:
```text
"Sprint 12 complete - user auth feature"
"v1.0 release candidate"
"Before TensorFlow upgrade"
"Payment integration verified"
```

**Bad messages**:
```text
"baseline"
"checkpoint"
"test"
```

### ادفع إلى جهاز التحكم عن بعد للفريق

```bash
# Share baselines with team
git push origin agileflow-baseline-20251206-143000

# Team can check out shared baseline
git checkout agileflow-baseline-20251206-143000
```

### تتبع خطوط الأساس مع مرور الوقت

```bash
# See progression of baselines
git log --all --oneline --decorate | grep baseline

# Useful for tracking progress through project
```

## الأوامر ذات الصلة

- [`/التحقق`](/commands/verify) - تشغيل الاختبارات (مطلوب لخط الأساس)
- [`/ جليسة الأطفال`](/commands/babysit) - التنفيذ (ينتهي باقتراح خط الأساس)
- [`/ الجلسة: init`](/commands/session-init) - تهيئة القدرة الأساسية
- [`/ الجلسة: استئناف`](/commands/session-resume) - ابدأ الجلسة بفحص خط الأساس
- [`/العلاقات العامة`](/commands/pr) - إنشاء العلاقات العامة (خط الأساس المرجعي إذا كان ذلك مناسبًا)
