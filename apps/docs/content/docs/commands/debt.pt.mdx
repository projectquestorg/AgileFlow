---
title: /dívida
description: Rastreie e priorize itens de dívida técnica
---
# /dívida

Rastreie e visualize dívidas técnicas em toda a base de código. Identifique, classifique e priorize o trabalho de refatoração com pontuação baseada em dados.

## Início rápido

```bash
/agileflow:debt
```

Executa uma verificação rápida e gera um relatório de dívida com configurações padrão.

Ou com opções personalizadas:

```bash
/agileflow:debt SCAN=full OUTPUT=report THRESHOLD=medium
```

## Parâmetros

| Parâmetro | Obrigatório | Padrão | Descrição |
|-----------|----------|---------|------------|
| `SCAN` | Não | `quick` | Profundidade da varredura: `quick` (somente áreas sinalizadas) ou `full` (base de código inteira) |
| `OUTPUT` | Não | `report` | Tipo de saída: `report`, `stories` ou `both` |
| `THRESHOLD` | Não | `medium` | Gravidade mínima: `high`, `medium` ou `low` |

## O que detecta

O scanner de dívidas identifica vários tipos de dívida técnica:

### Sinais de qualidade de código
- Comentários TODO/FIXME/HACK
- Funções longas (>50 linhas)
- Alto complexo ciclomático(>10)
- Blocos de código duplicados
- Arquivos grandes (>500 linhas)
- Aninhamento profundo (>4 níveis)
- Objetos de Deus (> 10 métodos)
- Baixa cobertura de teste (menos de 70%)

### Dívida baseada em histórias
Pesquisa histórias marcadas com __NOTRASLATE_30__ ou com "refactor" ou "cleanup" no título.

### Dívida de Arquitetura
Verifica as ADRs em busca de decisões obsoletas ou consequências negativas documentadas.

### Análise do histórico do Git
- Arquivos com alta rotatividade (modificados frequentemente)
- Arquivos com muitos autores (propriedade pouco clara)
- Filiais antigas ainda não fundidas

### Saída do linter
Analisa a saída de ESLint, TypeScript, Pylint, SonarQube e relatórios de cobertura.

## Categorias de dívida

A dívida técnica está organizada em sete categorias:

| Categoria | Descrição | Exemplos |
|----------|-------------|----------|
| **Arquitetura** | Abstrações erradas, acoplamento forte, padrões ausentes | Acoplamento de serviços, dependências circulares |
| **Qualidade do código** | Duplicação, complexidade, estilo inconsistente | Código copiar e colar, alta complexidade |
| **Documentação** |Documentos ausentes, desatualizados ou incompletos | APIs não documentadas, guias obsoletos |
| **Testes** | Baixa cobertura, testes instáveis, falta E2E | Sem testes unitários, faltando testes de integração |
| **Segurança** | Deps desatualizados, segredos expostos, autenticação fraca | Pacotes vulneráveis ​​a CVE, tokens codificados |
| **Desempenho** | Consultas N+1, vazamentos de memória, operações lentas | Algoritmos ineficientes, excesso de memória |
| **Dependências** | Pacotes desatualizados, bibliotecas sem manutenção | Bibliotecas antigas, projetos abandonados |

## Fórmula de pontuação

Cada item da dívida recebe uma pontuação de 0 a 100:

```text
Score = (Severity × Scope × Pain) / 10

Severity: 1-10 (impact level)
Scope:    1-10 (files affected)
Pain:     1-10 (developer frustration)
```

### Níveis de gravidade
- **Baixo** (1-3): Problema menor, não bloqueia nada
- **Médio** (4-6): Problema moderado, retarda o desenvolvimento
- **Alto** (7-9): Problema significativo, bloqueia recursos ou causa bugs
- **Crítico** (10): Urgente, causa problemas de produção ou bloqueia o trabalho

## Exemplos

### Verificação rápida (padrão)

__NOTRADUZIR_3__

Verifica áreas marcadas com TODO/FIXME e histórias marcadas. Gera relatório.

### Verificação completa da base de código

```bash
/agileflow:debt SCAN=full
```

Varredura profunda de toda a base de código, incluindo análise de complexidade, detecção de duplicação e análise de cobertura.

### Gerar histórias para dívidas críticas

__NOTRADUZIR_5__

Encontra itens de dívida críticos e, opcionalmente, cria histórias para eles.

### Gere relatórios e histórias

__NOTRADUZIR_6__

Cria relatório de dívida e gera histórias para itens de dívida acima de gravidade média.

## Exemplo de saída

__NÃOTRADUZIR_7__

## Fluxo de trabalho

Depois de gerar um relatório de dívida, você pode:

### 1. Revise o relatório
Entenda que dívida existe e onde ela está.

### 2. Gerar histórias (opcional)
__NÃOTRADUZIR_8__

Cria histórias para itens críticos de dívida com:
- Critérios de aceitação focados no estado “antes/depois”
- Análise de impacto
- Esforço estimado
- Referências aos recursos afetados

### 3. Salvar na documentação
__NOTRADUZIR_9__

Salva o relatório em __NOTRASLATE_31__ e atualiza o README com um link.

### 4. Crie uma dívida épica
Se existirem muitos itens críticos, cria um épico:
- EP-XXXX: Redução da Dívida Técnican
- Histórias dos 5 principais itens críticos
- Acompanha o progresso da redução da dívida

## Usando informações de dívida

### Planejar sprints
Reserve 10-20% de cada sprint para redução de dívidas:

__NOTRADUZIR_10__

### Retrospectivas
Acompanhe a redução da dívida em retrospectivas:

__NOTRADUZIR_11__

### Painel
Crie um painel de dívida que seja atualizado semanalmente:

```text
docs/08-project/debt-dashboard.md

# Debt Dashboard (Weekly)

Week 52: 42 items (↑ from 39)
Week 51: 39 items (↓ from 43)

Critical: 3 items (target: reduce to 1 this sprint)
```

## Melhores práticas

1. **Seja honesto sobre as estimativas**: erre exageradamente
2. **Link para recursos**: Priorize novos trabalhos com bloqueio de dívidas
3. **Comemore as reduções**: reconheça o pagamento da dívida retroativamente
4. **Evitar acumulação**: aplique testes em CI para novo código
5. **Revise regularmente**: execute uma verificação de dívidas mensal ou trimestralmente

## Prevenção de dívidas

Adicione revisão de dívida ao seu CI/CD:

__NÃOTRADUZIR_13__

## Integração com Desenvolvimento

Ao implementar recursos, verifique se eles geram dívidas:

__NOTRADUZIR_14__

## Modelo de história para dívida

Ao criar histórias para itens de dívida:

__NÃOTRADUZIR_15__

## Comandos Relacionados

- [`/diagnose`](/commands/diagnose) -Sistematem diagnósticos de saúde
- [`/metrics`](/commands/metrics) - Painel de análises e métricas
- [`/story`](/commands/story) - Crie histórias para itens de dívida
- [`/epic`](/commands/epic) - Crie um épico de redução de dívidas
- [`/retro`](/commands/retro) - Incluir análise de dívida em retrospectivas
- [__NOTRASLATE_37____NOTRASLATE_43__ - Veja histórias relacionadas a dívidas a bordo