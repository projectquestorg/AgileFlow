---
title: /base
description: Marcar el estado actual como línea base verificada
---
# /línea base

Cree puntos de control verificados que representen los buenos estados conocidos de su proyecto. Baselines use git tags and metadata tracking to create safe reset points, compare test results over time, and track regressions from verified states.

## Inicio rápido

```bash
# Create baseline (requires passing tests)
/agileflow:baseline

# Create with custom message
/agileflow:baseline "Sprint 3 complete - all features tested"

# Create for epic completion
/agileflow:baseline "EP-0005: User authentication complete"
```

El comando:
1. Verificar que las pruebas estén pasando
2. Verifique que el árbol de trabajo de git esté limpio
3. Crea una etiqueta git con marca de tiempo
4. Actualizar metadatos (baseline_commit, baseline_history)
5. Marque las historias como verificadas en esta línea de base.
6. Mostrar informe de verificación final

## Características clave

### Verificación de seguridad

Antes de crear una línea base, verifique:

- ✅ **Pruebas aprobadas** - Todas las pruebas deben pasar (0 fallas)
- ✅ **Clean git** - No hay cambios no confirmados
- ✅ **Pruebas de historia aprobadas** - Todas las historias en progreso tienen pruebas de aprobación
- ✅ **Sesión inicializada** - Environment.json existe

Si alguna verificación falla, la creación de la línea base se bloquea con instrucciones claras.

### Etiquetas con marca de tiempo

Las líneas de base crean etiquetas git con marcas de tiempo precisas:

```text
agileflow-baseline-20251222-143000
                    YYYYMMDD-HHMMSS
```

Utilice estas etiquetas para:
- Restablecer el punto de control exacto: `git checkout agileflow-baseline-...`
- Comparar versiones: `git diff agileflow-baseline-20251206... agileflow-baseline-20251215...`
- Compartir con el equipo: `git push origin agileflow-baseline-...`

### Seguimiento de metadatos

Toda la información de referencia almacenada en:

```text
docs/00-meta/environment.json
  ├─ baseline_commit: "abc123def456"
  └─ baseline_established: "2025-12-06T14:30:00Z"

docs/09-agents/session-state.json
  └─ baseline_history: [
       {
         "tag": "agileflow-baseline-20251206-143000",
         "commit": "abc123def456",
         "created_at": "2025-12-06T14:30:00Z",
         "message": "Sprint 3 complete",
         "test_count": 42,
         "stories_verified": ["US-0043", "US-0044", "US-0045"]
       }
     ]

docs/06-stories/US-0042.md (frontmatter)
  └─ verified_at_baseline: "agileflow-baseline-20251206-143000"
```

### Historial de referencia

Ver todas las líneas base creadas:

```text
Baselines (most recent first):

1. agileflow-baseline-20251206-143000
   Date: 2025-12-06 14:30:00
   Message: Sprint 3 complete - all features tested
   Tests: 42/42 passing
   Stories: US-0043, US-0044, US-0045

2. agileflow-baseline-20251130-103000
   Date: 2025-11-30 10:30:00
   Message: Before auth refactor
   Tests: 38/38 passing
   Stories: US-0040, US-0041
```

## Uso

### Línea de base básica

```bash
/agileflow:baseline
```

Crea una línea de base con el mensaje predeterminado "Línea de base: todas las pruebas pasan"

### Con mensaje personalizado

```bash
/agileflow:baseline "Sprint 3 complete - 15 stories done"
```

Los mensajes significativos le ayudan a recordar lo que representa esta línea de base.

### Mensaje multilínea

```bash
/agileflow:baseline "
Release v1.0 - Ready for production

All features tested and approved
Security audit passed
Performance benchmarks met
Documentation complete
"
```

## Parámetros

| Parámetro | Requerido | Predeterminado | Descripción |
|-----------|----------|---------|-------------|
| `MESSAGE` | No | "Línea de base: todas las pruebas pasan" | Mensaje descriptivo para esta línea base |

## Ejemplos

### Después de una finalización épica

```bash
# All stories in EP-0005 are done and tested
/agileflow:baseline "EP-0005: User authentication complete"

# Output:
# ✅ Baseline Established
#
# Tag: agileflow-baseline-20251206-143000
# Commit: abc123def456
# Message: EP-0005: User authentication complete
# Tests: 42/42 passing
# Stories: US-0039, US-0040, US-0041, US-0042
#
# Epic is now marked as verified baseline!
```

### Antes de una refactorización arriesgada

```bash
# Take safety checkpoint before refactoring
/agileflow:baseline "Before auth system refactor"

# Make changes...
# If something breaks, reset with:
# git checkout agileflow-baseline-20251206-143000
```

### Finalización del sprint

```bash
/agileflow:baseline "Sprint 12 complete - 15 stories finished, 58 tests passing"

# Sprint checkpoint created
# Can track progress across sprints
```

### Listo para su lanzamiento

```bash
/agileflow:baseline "v1.0 release candidate - all tests passing, security audit done"

# Release checkpoint saved
# Can reference later if issues arise
```

## Flujo de trabajo

### Pre-flcheques correctos

```bash
1. Check session harness initialized
   └─ docs/00-meta/environment.json exists

2. Verify tests passing
   └─ Run: npm test (or configured test command)
   └─ Exit code must be 0

3. Check git working tree clean
   └─ No uncommitted changes
   └─ No untracked files

4. Verify story test status
   └─ All in_progress stories have test_status: passing
```

### Crear línea base

```bash
1. Generate tag name with timestamp
   └─ agileflow-baseline-YYYYMMDD-HHMMSS

2. Get baseline message (from arg or user input)
   └─ Default: "Baseline - all tests passing"

3. Create git annotated tag
   └─ git tag -a "agileflow-baseline-..." -m "message"

4. Update environment.json
   └─ baseline_commit: commit SHA
   └─ baseline_established: ISO timestamp

5. Update session-state.json
   └─ Add to baseline_history array

6. Update story metadata
   └─ Each verified story gets verified_at_baseline tag

7. Display final report
```

## Salida

### Informe de éxito

```text
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ Baseline Established
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Tag: agileflow-baseline-20251206-143000
Commit: abc123def456
Message: Sprint 3 complete - all features tested
Timestamp: 2025-12-06 14:30:00

Verification Status:
  ✅ Tests: 42/42 passing
  ✅ Stories: 3 verified (US-0043, US-0044, US-0045)
  ✅ Git: Clean working tree
  ✅ Branch: main

This baseline can be used to:
  • Reset to known-good state (git checkout <tag>)
  • Compare test results over time
  • Track regression from this point
  • Verify deployment readiness

Baseline saved in:
  • Git tag: agileflow-baseline-20251206-143000
  • environment.json: baseline_commit updated
  • session-state.json: baseline history
  • Story metadata: verified_at_baseline

To push baseline to remote:
  git push origin agileflow-baseline-20251206-143000

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### Fallo: Pruebas que no pasan

```text
❌ Cannot Create Baseline - Tests Failing

Command: npm test
Result: 2/42 tests failed

Failed tests:
  ❌ auth.test.ts:42 - Session timeout handling
  ❌ api.test.ts:15 - Rate limiting check

Baselines require all tests passing.

Options:
  1. Fix failing tests
  2. Skip failing tests (creates PARTIAL baseline)
  3. Cancel baseline creation

Run /agileflow:verify to see full details
Then fix the tests and try again.
```

### Fallo: Git sucio

```text
❌ Cannot Create Baseline - Uncommitted Changes

Working tree changes:
  M src/components/Profile.tsx
  M src/api/auth.ts
  ?? temp/debug.log

Baselines require clean git state.

Options:
  1. Commit changes first
  2. Stash changes and create baseline
  3. Cancel baseline creation

Commit your changes and try again.
```

### Fallo: no inicializado

```text
⚠️  Session Harness Not Initialized

The baseline command requires session harness configuration.

Run /agileflow:session:init to:
1. Detect your project type
2. Create environment.json
3. Enable baseline creation

Or manually create docs/00-meta/environment.json
```

## Cuándo crear líneas de base

### Mejores tiempos

| Cuando | Mensaje |
|------|---------|
| Después de una finalización épica | "EP-0005: Autenticación de usuario completada" |
| Después de que finalice el sprint | "Sprint 12 completo - 15 pisos terminados" |
| Antes de una refactorización arriesgada | "Antes de la refactorización del sistema de autenticación" |
| Antes de una actualización importante | "Antes de actualizar TensorFlow" |
| En el hito del lanzamiento | "Candidato a versión v1.0" |

### Beneficios

- **Punto de reinicio**: `git checkout agileflow-baseline-...` para volver
- **Detección de regresión**: compare las pruebas actuales con la línea de base
- **Seguimiento del progreso**: muestra la evolución a lo largo del tiempo
- **Seguridad de liberación**: marcar el estado desplegable verificado
- **Compartir en equipo**: etiquetas push para acceso del equipo

## Funciones avanzadas

### Comparar con el valor inicial

Ver lo que ha cambiado el pecadolínea de base ce:

```bash
# Show commits since baseline
git log agileflow-baseline-20251206-143000..HEAD

# Show code changes since baseline
git diff agileflow-baseline-20251206-143000..HEAD
```

### Listar todas las líneas base

```bash
# Show all baseline tags
git tag -l "agileflow-baseline-*" --sort=version:refname
```

### Restaurar desde la línea base

```bash
# Create safety backup first
git checkout -b backup/pre-restore

# Restore to specific baseline
git checkout agileflow-baseline-20251206-143000

# Or restore to latest baseline
git checkout $(git tag -l "agileflow-baseline-*" --sort=version:refname | tail -1)
```

### Enviar al equipo

```bash
# Push specific baseline to remote
git push origin agileflow-baseline-20251206-143000

# Push all baselines
git push origin "refs/tags/agileflow-baseline-*"
```

## Integración con otros comandos

| Comando | Integración |
|---------|-------------|
| `/verify` | Baseline requires passing tests (runs verify) |
| `/babysit` | Guías de cuidado de niños hasta el punto de referencia al finalizar la función |
| `/pr` | PR puede hacer referencia a la línea de base en la descripción |
| `/session:init` | Inicializa la capacidad de referencia |
| `/session:resume` | Comprueba el estado inicial al inicio de la sesión |

## Flujo de desarrollo típico

```text
Start Sprint
  ↓
Work on stories with /agileflow:babysit
  ↓
Verify tests with /agileflow:verify
  ↓
Code review with /agileflow:review
  ↓
Create PR with /agileflow:pr
  ↓
Merge PR
  ↓
Sprint complete - Run /agileflow:baseline
  ↓
Next sprint
```

## Consejos

### Crea con frecuencia

```bash
# Weekly baselines
/agileflow:baseline "Week 50 complete"

# Per-epic baselines
/agileflow:baseline "EP-0005 complete"

# Pre-risky-change baselines
/agileflow:baseline "Before major refactor"
```

### Utilice mensajes significativos

**Buenos mensajes**:
```text
"Sprint 12 complete - user auth feature"
"v1.0 release candidate"
"Before TensorFlow upgrade"
"Payment integration verified"
```

**Malos mensajes**:
```text
"baseline"
"checkpoint"
"test"
```

### Empujar a control remoto para el equipo

```bash
# Share baselines with team
git push origin agileflow-baseline-20251206-143000

# Team can check out shared baseline
git checkout agileflow-baseline-20251206-143000
```

### Realizar un seguimiento de las líneas de base a lo largo del tiempo

```bash
# See progression of baselines
git log --all --oneline --decorate | grep baseline

# Useful for tracking progress through project
```

## Comandos relacionados

- [`/verify`](/commands/verify) - Ejecutar pruebas (requeridas para la línea base)
- [`/babysit`](/commands/babysit) - Implementación (finaliza con una sugerencia de referencia)
- [`/session:init`](/commands/session-init) - Inicializar capacidad de referencia
- [`/session:resume`](/commands/session-resume) - Iniciar sesión con verificación de referencia
- [`/pr`](/commands/pr) - Generar PR (línea base de referencia si es relevante)