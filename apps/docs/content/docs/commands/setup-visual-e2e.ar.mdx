---
title: / Agileflow:الإعداد:visual-e2e
description: قم بإعداد البنية الأساسية لاختبار Visual E2E باستخدام Playwright والتحقق من لقطة الشاشة
---
# /agileflow:setup:visual-e2e

قم بإعداد البنية الأساسية لاختبار Visual E2E باستخدام Playwright وسير عمل التحقق من لقطة الشاشة.

## بداية سريعة

__لا تترجم_0__

## الغرض

يقوم بإعداد بنية أساسية كاملة لاختبار Visual E2E بما في ذلك:

- تثبيت الكاتب المسرحي مع تبعيات المتصفح
- `playwright.config.ts` مع التشغيل التلقائي لخادم الويب
- مثال لاختبار E2E مع التقاط لقطة للشاشة
- دليل لقطات الشاشة للتحقق البصري
- البرامج النصية npm لإجراء الاختبارات

## لماذا Visual E2E؟

**المشكلة**: نجحت الاختبارات ولكن واجهة المستخدم معطلة.

الاختبارات الوظيفية تتحقق من السلوك ولكن ليس المظهر البصري. يمكن للزر "العمل" ولكنه يكون:
- لون خاطئ
- موقف خاطئ
- تداخل العناصر الأخرى
- مفقود تمامًا (تم استبداله بحالة الخطأ)

يكتشف Visual E2E مع التحقق من لقطة الشاشة هذه المشكلات.

## ما الذي يتم إنشاؤه

### playwright.config.ts

تكوين الكاتب المسرحي مع webServer لبدء تشغيل خادم التطوير الخاص بك تلقائيًا:

__لا تترجم_1__

### مثال للاختبار

__لا تترجم_19__:

__لا تترجم_2__

### دليل سهيكل

__لا تترجم_3__

### البرامج النصية npm

تمت الإضافة إلى `package.json`:

__لا تترجم_4__

## خطوات الإعداد

يقوم الأمر بتنفيذ الخطوات الثمانية التالية:

1. **تحقق من package.json** - تحقق من أن المشروع يحتوي على إعداد npm
2. **تثبيت الكاتب المسرحي** - `npm install --save-dev @playwright/test`
3. **تثبيت المتصفح** - `npx playwright install --with-deps chromium`
4. **إنشاء التكوين** - `playwright.config.ts` باستخدام خادم الويب
5. **إنشاء دليل اختبار** - `tests/e2e/`
6. **إنشاء دليل لقطات الشاشة** - `screenshots/`
7. **إنشاء نموذج اختبار** - اختبار باستخدام لقطة شاشة
8. **إضافة نصوص npm** - `test:e2e` نصوص برمجية
9. **تشغيل التحقق** - تنفيذ اختبار نموذجي

## سير عمل التحقق المرئي

بعد إجراء الاختبارات، تحتاج لقطات الشاشة إلى مراجعة مرئية:

### 1. إجراء الاختبارات

__لا تترجم_5__

تنشئ الاختبارات لقطات شاشة في الدليل `screenshots/`.

### 2. مراجعة لقطات الشاشة

يقوم كلود بمراجعة كل لقطة شاشة للتأكد من أن واجهة المستخدم تبدو صحيحة.

### 3. التحقق وإعادة التسمية

تتم إعادة تسمية لقطات الشاشة المعتمدة بالبادئة `verified-`:

__لا تترجم_6__### 4. تشغيل أداة التحقق

__لا تترجم_7__

وهذا يضمن مراجعة جميع لقطات الشاشة قبل وضع علامة على اكتمال العمل.

## التكامل مع وضع الحلقة

يتكامل Visual E2E مع [Loop Mode](/features/loop-mode) لتطوير واجهة المستخدم المستقلة:

__لا تترجم_8__

في الوضع المرئي، تتحقق الحلقة مما يلي:
1. اجتياز الاختبارات
2. تحتوي جميع لقطات الشاشة على البادئة `verified-`
3. تم إكمال نسختين على الأقل

وهذا يمنع الانتهاء المبكر من عمل واجهة المستخدم.

## المعلمات

| المعلمة | الافتراضي | الوصف |
|-----------|--------|-------------|
| DEV_CMD | __غير مترجم_30__ | أمر خادم التطوير |
| ميناء | __غير مترجم_31__ | منفذ خادم التطوير |
| المتصفح | __غير مترجم_32__ | المتصفح المراد تثبيته (الكروم هو الأصغر حجمًا، حوالي 300 ميجابايت) |

## تشغيل الاختبارات

بعد الإعداد:

__لا تترجم_9__

## أفضل الممارسات

### 1. التقاط صفحات كاملة

للتحقق البصري، التقط الصفحات الكاملة:

__لا تترجم_10__

### 2. التقاط المكونات

للاختبارات الخاصة بالمكونات:

__لا تترجم_11__

### 3. قم بتسمية لقطات الشاشة بشكل وصفي

__نأوترانسلات_12__

### 4. اختبار الدول المختلفة

__لا تترجم_13__

## استكشاف الأخطاء وإصلاحها

### لم يتم العثور على المتصفح

إذا لم يتمكن الكاتب المسرحي من العثور على المتصفح:

__لا تترجم_14__

### خادم التطوير لا يبدأ

تحقق من أن `package.json` يحتوي على أمر التطوير الصحيح:

__لا تترجم_15__

### دليل لقطات الشاشة مفقود

تأكد من وجود الدليل قبل تشغيل الاختبارات:

__لا تترجم_16__

### مهلة الاختبارات

زيادة مهلة خادم الويب في التكوين:

__لا تترجم_17__

## ذات صلة

- [الوضع المرئي](/features/visual-mode) - نظام التحقق من لقطة الشاشة
- [وضع الحلقة ](/features/loop-mode) - معالجة القصة المستقلة
- [`/agileflow:verify`](/commands/verify) - إجراء الاختبارات والتحقق
- [`/agileflow:tests`](/commands/tests) - اختبار إعداد البنية الأساسية