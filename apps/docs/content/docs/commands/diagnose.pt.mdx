---
title: /diagnosticar
description: Diagn√≥stico de integridade do sistema
---
# /diagnosticar

Execute verifica√ß√µes abrangentes de integridade do sistema AgileFlow para identificar poss√≠veis problemas antes que causem falhas.

## In√≠cio r√°pido

```bash
/agileflow:diagnose
```

Isso executa um conjunto completo de diagn√≥sticos sem a necessidade de argumentos.

## Par√¢metros

Este comando n√£o utiliza par√¢metros - ele executa automaticamente todas as verifica√ß√µes de diagn√≥stico.

## O que verifica

O sistema de diagn√≥stico valida toda a instala√ß√£o do AgileFlow:

### 1. Valida√ß√£o de arquivo JSON
- Valida todos os arquivos JSON cr√≠ticos (status.json, metadados, configura√ß√µes)
- Verifica o formato e a estrutura do arquivo
- Relata tamanhos de arquivo em KB
- Avisa se status.json ultrapassar 100 KB (recomenda arquivamento)
- Mostra contagens de hist√≥rias em arquivos ativos e arquivados

### 2. Integridade da estrutura de arquivos
- Verifica a exist√™ncia de diret√≥rios necess√°rios (docs/, .agileflow/, .claude/)
- Verifica arquivos cr√≠ticos (metadata.json, status.json)
- Distingue entre arquivos cr√≠ticos e opcionais

### 3. Sistema de arquivamento autom√°tico
- Verifica se o script de arquivo existe e √© execut√°vel
- Verifica a configura√ß√£o do gancho in.claude/settings.json
- Limite de arquivamento de relat√≥rios de metadados
- Identifica componentes ausentes ou mal configurados

### 4. Sistema de Ganchos
- Valida a estrutura .claude/settings.json
- Conta os ganchos SessionStart, UserPromptSubmit e Stop
- Relata problemas de configura√ß√£o
- Verifica a executabilidade do gancho

### 5. An√°lise do tamanho do arquivo
- Monitora o tamanho do status.json com limites
- Mostra contagens de hist√≥rias ativas e arquivadas
- Recomenda arquivamento quando necess√°rio
- Fornece recomenda√ß√µes baseadas em tamanho

## Exemplos

### Diagn√≥stico B√°sico

```bash
/agileflow:diagnose
```

Executa uma verifica√ß√£o completa da integridade do sistema e exibe os resultados.

### Indicadores de resultados

O diagn√≥stico usa estes indicadores de status:
- **‚úÖ** (marca de sele√ß√£o): Exame de sa√∫de aprovado
- **‚ùå** (cruzado): falha na verifica√ß√£o de integridade
- **‚ö†Ô∏è** (aviso): problema n√£o cr√≠tico encontrado
- **‚ÑπÔ∏è** (informa√ß√µes): Status informativo

## Sa√≠da t√≠pica

```text
üîç AgileFlow System Diagnostics
================================

üìã JSON File Validation
----------------------
  ‚úÖ docs/00-meta/agileflow-metadata.json (42KB)
  ‚úÖ docs/09-agents/status.json (28KB, 12 stories)
  ‚ÑπÔ∏è  docs/09-agents/status-archive.json - not found (optional)
  ‚úÖ .claude/settings.json (5KB)

üì¶ Auto-Archival System
----------------------
  ‚úÖ Archive script exists and is executable
  ‚úÖ Auto-archival hook configured
  ‚úÖ Archival threshold: 7 days

ü™ù Hooks System
---------------
  ‚úÖ .claude/settings.json is valid JSON
  ‚ÑπÔ∏è  SessionStart hooks: 2
  ‚ÑπÔ∏è  UserPromptSubmit hooks: 1
  ‚ÑπÔ∏è  Stop hooks: 1

üìè File Size Analysis
---------------------
  status.json: 28KB (12 stories)
  ‚úÖ status.json size is healthy

üìä Diagnostic Summary
=====================
‚úÖ All checks passed! System is healthy.
```

## Problemas comuns detectados

| Edi√ß√£o | Indicador | Solu√ß√£o |
|-------|-----------|----------|
| Sintaxe JSON inv√°lida | ‚ùå | Corrija JSON usando __NOTRASLATE_3__ para identificar erros |
| Status.json grande (>100 KB) | ‚ö†Ô∏è | Execute o arquivamento para reduzir o tamanho do arquivo |
| Arquivos cr√≠ticos ausentes | ‚ùå | Execute __NOTRASLATE_4__ para recriar |
| Script de arquivo n√£o execut√°vel | ‚ö†Ô∏è | Execute `chmod +x scripts/archive-completed-stories.sh` |
| Gancho de arquivamento n√£o configurado | ‚ùå | Execute `/agileflow:configure --enable=archival` |
| .claude/settings.json inv√°lido | ‚ùå | Execute __NOTRASLATE_7__ para corrigir o formato |

## Quando correr

Execute o diagn√≥stico:
- **Ap√≥s a configura√ß√£o**: Verifique se a instala√ß√£o do AgileFlow foi conclu√≠da com sucesso
- **Antes de opera√ß√µes importantes**: verifique a integridade do sistema antes de grandes altera√ß√µes
- **Periodicamente**: execute mensalmente/trimestralmente para manter a integridade do sistema
- **Ap√≥s altera√ß√µes na configura√ß√£o**: verifique se as altera√ß√µes entraram em vigor corretamente
- **Na inicializa√ß√£o**: se tiver problemas, comece aqui para solucionar problemas

## C√≥digos de sa√≠da

- **0**: Todas as verifica√ß√µes foram aprovadas, o sistema est√° √≠ntegro
- **1**: um ou mais problemas encontrados que precisam de aten√ß√£o

Isso permite que o comando seja usado em pipelines de CI/CD e scripts automatizados.

## A√ß√µes recomendadas

Se os problemas foreme, siga estas etapas:

1. **JSON inv√°lido**: Use `jq . <file>` para identificar e corrigir erros de sintaxe manualmente
2. **Arquivos grandes**: Execute o arquivo: `bash scripts/archive-completed-stories.sh`
3. **Arquivos ausentes**: Reinstale: `npx agileflow setup`
4. **Problemas de formato**: Execute a migra√ß√£o: __NOTRASLATE_11__
5. **Execute novamente o diagn√≥stico**: verifique se os problemas foram resolvidos

## Comandos Relacionados

- [`/configure`](/commands/configure) - Configurar recursos do AgileFlow
- [`/validate-expertise`](/commands/validate-expertise) - Validar arquivos de expertise
- [`/compress`](/commands/compress) - Compactar status.json e reduzir o tamanho do arquivo