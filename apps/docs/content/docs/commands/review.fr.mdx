---
title: /revoir
description: R√©vision de code bas√©e sur l'IA avec suggestions de qualit√©
---
# /avis

Effectuez une r√©vision compl√®te du code bas√©e sur l‚ÄôIA sur les modifications des demandes d‚Äôextraction. Review analyse le code pour en v√©rifier la qualit√©, la s√©curit√©, les performances, les meilleures pratiques et fournit des commentaires exploitables avec des exemples de code sp√©cifiques.

## D√©marrage rapide

```bash
# Review current branch against main
/agileflow:review

# Review specific branch
/agileflow:review BRANCH=feature/auth

# Review with focus on security
/agileflow:review FOCUS=security
```

La commande va¬†:
1. Obtenez les modifications de code (git diff)
2. Analysez selon 6 cat√©gories (Qualit√©, S√©curit√©, Performance, Meilleures pratiques, Tests, Documentation)
3. G√©n√©rez un rapport d√©taill√© avec les probl√®mes class√©s par gravit√©
4. Calculer le score de qualit√© du code
5. Sugg√©rer des correctifs automatiques et des travaux de suivi

## Principales fonctionnalit√©s

### Analyse compl√®te

La r√©vision examine les modifications de votre code dans 6 cat√©gories importantes¬†:

| Cat√©gorie | Ch√®ques |
|--------------|--------|
| **Qualit√© du code** | Complexit√©, duplication, d√©nomination, fonction/longueur du fichier |
| **S√©curit√©** | Injection SQL, XSS, secrets cod√©s en dur, d√©s√©rialisation non s√©curis√©e |
| **Performances** | Requ√™tes N+1, algorithmes inefficaces, fuites m√©moire |
| **Meilleures pratiques** | Gestion des erreurs, journalisation, s√©curit√© de type, async/awail |
| **Tests** | Tests manquants, qualit√© des tests, lacunes de couverture |
| **Documentations** | JSDoc manquant, commentaires obsol√®tes, mises √† jour README |

### Priorisation bas√©e sur la gravit√©

Les probl√®mes sont class√©s par impact¬†:

```text
üî¥ CRITICAL - Must fix before merge
üü† HIGH    - Fix before merge (blocks release)
üü° MEDIUM  - Address soon (technical debt)
‚ö™ LOW     - Nice to have (style/consistency)
```

### Niveau de qualit√© du code

Votre PR obtient une note (0-100) avec r√©partition par cat√©gorie¬†:

```text
Code Quality Score: 72/100

Breakdown:
- Security: 40/100 (critical issues found)
- Performance: 75/100 (one N+1 query)
- Maintainability: 80/100 (some complexity)
- Testing: 65/100 (coverage gaps)
- Style: 90/100 (mostly consistent)
```

### Commentaires constructifs

Chaque num√©ro comprend¬†:
- O√π il se trouve (fichier, num√©ro de ligne)
- Pourquoi c'est important (risque/impact)
- Comment le r√©parer (exemples de code sp√©cifiques)
- Exemple de ‚ùå MAUVAIS code
- Exemple de ‚úÖ BON code

## Utilisation

### Basic - examiner la branche actuelle

```bash
/agileflow:review
```

Examine les modifications sur la branche actuelle par rapport √† main/master.

### Examiner une branche sp√©cifique

```bash
/agileflow:review BRANCH=feature/user-auth
```

Examine la branche nomm√©e par rapport √† main.

### Examen par rapport √† une base diff√©rente

```bash
/agileflow:review BRANCH=feature/auth BASE=develop
```

Compare avec une branche de base diff√©rente.

### R√©vision avec domaine d'intervention

```bash
# Security-only review
/agileflow:review FOCUS=security

# Performance-only review
/agileflow:review FOCUS=performance

# Testing coverage review
/agileflow:review FOCUS=tests
```

### Filtrer par gravit√©

```bash
# Show only critical/high issues
/agileflow:review SEVERITY=high

# Show all issues
/agileflow:review SEVERITY=all
```

## Param√®tres

| Param√®tre | Obligatoire | Par d√©faut | Options |
|---------------|----------|---------|---------|
| `BRANCH` | Non | Actuel | Nom de la succursale √† revoir |
| `BASE` | Non | principal/ma√Ætre | Branche de base pour comparaison |
| `FOCUS` | Non | tout | tout, s√©curit√©, performances, style, tests |
| `SEVERITY` | Non | tout | critique, √©lev√©, moyen, faible, tous |

## Exemples

### Examen typique des relations publiques

```bash
/agileflow:review

# Output:
# AI Code Review Report
# Branch: feature/user-auth
# Files Changed: 5
# Critical: 1 | High: 3 | Medium: 5 | Low: 2
# Code Quality Score: 72/100
#
# üî¥ CRITICAL ISSUES
# - Hardcoded API key in stripe.ts:15
#
# üü† HIGH ISSUES
# - N+1 query in posts API
# - Missing error handling in login
# ...
```

### Examen ax√© sur la s√©curit√©

```bash
/agileflow:review FOCUS=security

# Analyzes only for:
# - Hardcoded secrets
# - SQL injection risks
# - XSS vulnerabilities
# - Authentication issues
# - CORS misconfiguration
```

### √âvaluation des performances

```bash
/agileflow:review FOCUS=performance

# Checks for:
# - N+1 database queries
# - Inefficient algorithms
# - Missing indexes
# - Memory leaks
# - Bundle size issues
```

## Examiner la structure du rapport

### En-t√™te

```text
# AI Code Review Report

**Branch**: feature/user-auth
**Base**: main
**Files Changed**: 8
**Lines Added**: 245
**Lines Removed**: 32
**Generated**: 2025-10-16T10:30:00Z
```

### R√©sum√©

```text
## Summary

**Critical**: 2 | **High**: 5 | **Medium**: 12 | **Low**: 8
**Must Fix Before Merge**: 7 issues
```

### Probl√®mes par gravit√©

Pour chaque num√©ro :

```text
### 1. Hardcoded API Key (SECURITY)
**File**: src/api/payments/stripe.ts:15
**Severity**: CRITICAL

// ‚ùå BAD
const stripeKey = "sk_live_abc123...";

// ‚úÖ GOOD
const stripeKey = process.env.STRIPE_SECRET_KEY;
if (!stripeKey) throw new Error("STRIPE_SECRET_KEY not set");

**Risk**: API key exposed in version control.
**Fix**: Move to environment variable. Rotate immediately.
**Priority**: Block merge
```

### Observations positives

```text
## Positive Observations ‚úÖ

- ‚úÖ Good use of TypeScript strict mode
- ‚úÖ Consistent error handling pattern
- ‚úÖ Well-structured component separation
- ‚úÖ Clear commit messages
```

### R√©partition de la qualit√© du code

```text
## Code Quality Score: 72/100

**Breakdown**:
- Security: 40/100 (2 critical issues)
- Performance: 75/100 (1 N+1 query)
- Maintainability: 80/100 (some complexity)
- Testing: 65/100 (coverage gaps)
- Style: 90/100 (mostly consistent)
```

## Personnalisation

### R√®gles sp√©cifiques au projet

Cr√©ez des r√®gles de r√©vision personnalis√©es dans¬†:
- `.agileflow/review-rules.md`
- `docs/02-practices/code-standards.md`

Exemple¬†:

```markdown
# Code Review Rules

## Critical
- No console.log in production code
- All API endpoints must have rate limiting
- All database queries must use ORM

## High
- Functions >30 lines should be refactored
- Test coverage must be >85%
```

## Actions apr√®s examen

### Probl√®mes de r√©solution automatique

```text
Review asks: "Fix auto-fixable issues? (YES/NO)"

If YES:
  - Runs npm run lint -- --fix
  - Fixes 8 style issues automatically
  - Shows which issues were fixed
```

### Cr√©er des histoires de suivi

```text
Review asks: "Create stories for follow-up work?"

If YES:
  - Creates story for each medium/low issue
  - Adds to your backlog
  - Links to code review report
```

### Bloquer la fusion pour les critiquesprobl√®mes iques

```text
Review asks: "Block merge for critical/high issues?"

If YES:
  - Marks merge as blocked
  - Provides failure reason
  - Suggests resolution steps
```

### Enregistrer le rapport

Rapport automatiquement enregistr√© dans¬†:
```text
docs/08-project/code-reviews/<YYYYMMDD>-<BRANCH>.md
```

Exemple¬†:
```text
docs/08-project/code-reviews/20251016-feature-user-auth.md
```

## Contr√¥les de s√©curit√©

La r√©vision recherche automatiquement¬†:

### Secrets et informations d'identification
- Cl√©s API cod√©es en dur
- Mots de passe de base de donn√©es
- Jetons OAuth
- Secrets JWT
- Informations d'identification AWS

### Vuln√©rabilit√©s courantes
- Injection SQL (requ√™tes non param√©tr√©es)
- Attaques XSS (sortie sans √©chappement)
- D√©s√©rialisation dangereuse
- Vuln√©rabilit√©s CSRF
- Validation CORS manquante

### Mod√®les non s√©curis√©s
- eval() ou Function()
- Concat√©nation de cha√Ænes dangereuse
- Validation d'entr√©e manquante
- Faible cryptage
- D√©pendances non s√©curis√©es

##¬†Contr√¥les de performances

L'examen recherche¬†:

### Base de donn√©es
- Probl√®mes de requ√™tes N+1
- Index manquants
- Jointures inefficaces
- Requ√™tes inutiles

### Algorithmes
- O(n¬≤) quand O(n) possible
- Boucles imbriqu√©es pouvant √™tre plates
- Calculs r√©p√©t√©s
- R√©cursion non optimis√©e

### M√©moire
-Fuites de m√©moire
- Gros objets non lib√©r√©s
- R√©f√©rences circulaires
- Structures de donn√©es monopolisant la m√©moire

## Testcouverture √©tendue

V√©rifier les contr√¥les¬†:

### Nouveau code
- Existe-t-il un test pour les nouvelles fonctionnalit√©s ?
- Les cas extr√™mes sont-ils couverts¬†?
- La qualit√© des tests est-elle bonne¬†?

### Lacunes de couverture
- Lignes ajout√©es sans tests
- Fonctions sans couverture de test
- Chemins d'erreur non test√©s

### Qualit√© des tests
- Les affirmations ont-elles un sens ?
- Les tests v√©rifient-ils le comportement ?
- Les tests sont-ils maintenables ?

## R√©sultat et recommandations

### Actions imm√©diates (fusion de blocs)

```text
1. Remove hardcoded API key (critical)
2. Fix SQL injection (critical)
3. Add error handling to login (high)
```

### Avant la fusion

```text
4. Add tests for auth endpoints (high)
5. Fix N+1 query in posts API (high)
6. Reduce complexity in validator.ts (medium)
```

### Suivi (Cr√©er des histoires)

```text
7. Standardize naming conventions (medium)
8. Add ESLint rule for secrets (medium)
9. Set up automated security scanning (low)
```

## Int√©gration avec CI

Sugg√©rez d'ajouter √† `.github/workflows/pr.yml`¬†:

```yaml
- name: AI Code Review
  run: npx claude-code /agileflow:review BRANCH=${{ github.head_ref }}

- name: Check for critical issues
  run: |
    if grep -q "CRITICAL" code-review-report.md; then
      echo "::error::Critical issues found."
      exit 1
    fi
```

## Conseils

### Avant de soumettre le PR

```bash
/agileflow:review
# Fix any CRITICAL or HIGH issues
# Address MEDIUM issues if possible
# Then submit PR with confidence
```

### Am√©lioration it√©rative

```bash
# After feedback, run review again
/agileflow:review

# See if score improved
# Ensure critical issues fixed
# Check test coverage
```

### Approche ax√©e sur la s√©curit√©

```bash
# Always check security first
/agileflow:review FOCUS=security

# Fix any CRITICAL security issues
# Then review other categories
```

## Principes

- **Soyez constructif** - Fournissez des commentaires exploitables, pas seulement des critiques
- **Afficher des exemples** - Inclure ‚ùå MAUVAIS et ‚úÖ BON code
- **Prioriser** - Les probl√®mes critiques en premier, le style en dernier
- **C√©l√©brer** - Inclure des observations positives
- **Sugg√©rerst fix** - Ne vous contentez pas d'identifier les probl√®mes
- **Aucun commit forc√©** - Toujours demander avant la correction automatique

## Commandes associ√©es

- [`/pr`](/commands/pr) - G√©n√©rer une description du PR (examiner avant de soumettre)
- [`/impact`](/commands/impact) - Analyser l'impact du changement
- [`/babysit`](/commands/babysit) - Conseils de mise en ≈ìuvre (effectue un examen avant le PR)
- [`/verify`](/commands/verify) - V√©rifier la r√©ussite des tests
- [`/baseline`](/commands/baseline) - Cr√©er un point de contr√¥le v√©rifi√©