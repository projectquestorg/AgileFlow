---
title: /verificar
description: Execute testes de projeto e atualize o status do teste da hist√≥ria
---

# /verificar

Execute os testes do seu projeto e atualize automaticamente o status do teste da hist√≥ria no seu sistema de rastreamento. Verify √© um componente central do conjunto de sess√µes do AgileFlow que garante a valida√ß√£o do teste em todo o fluxo de trabalho de desenvolvimento.

## In√≠cio r√°pido

```bash
# Run all tests and update all in-progress stories
/agileflow:verify

# Run tests and update specific story
/agileflow:verify US-0042
```

O comando ir√°:
1. Carregue a configura√ß√£o de teste do seu projeto
2. Execute o conjunto de testes
3. Analisar resultados de testes
4. Atualizar o status do teste de hist√≥ria (aprovado/reprovado)
5. Exiba um relat√≥rio claro com indicadores visuais

## Principais recursos

### An√°lise Autom√°tica de Teste

O Verify detecta e analisa automaticamente resultados de testes de:

| Framework | Example Output |
|-----------|-----------------|
| Jest/Vitest (Node.js) | `Tests: 42 passed, 42 total` |
| Pytest (Python) | `42 passed in 2.5s` |
| Cargo (Rust) | `test result: ok. 42 passed` |
| Go Test | `ok github.com/user/project` |

Se a an√°lise falhar, ela retornar√° ao c√≥digo de sa√≠da (0 = aprova√ß√£o, diferente de zero = falha).

### Atualiza√ß√µes de status da hist√≥ria

Os resultados dos testes s√£o registrados automaticamente em suas hist√≥rias:

```json
{
  "story_id": "US-0042",
  "test_status": "passing",
  "test_results": {
    "last_run": "2025-12-06T10:30:00Z",
    "command": "npm test",
    "passed": 42,
    "failed": 0,
    "exit_code": 0,
    "output_summary": "All tests passed (42/42)"
  }
}
```

### Rastreamento de v√°rias hist√≥rias

Sem um ID de hist√≥ria espec√≠fico, verifique todas as atualiza√ß√µes `in_progress` hist√≥rias:

```bash
/agileflow:verify
# Updates test_status for:
# - US-0042: passing
# - US-0043: passing
# - US-0044: failing
```

## Uso

### Execute todos os testes

```bash
/agileflow:verify
```

Executa seu conjunto de testes e atualiza todas as hist√≥rias em andamento com resultados.

### Execute testes para uma hist√≥ria espec√≠fica

```bash
/agileflow:verify US-0042
```

Executa testes e atualiza apenas o status de teste do US-0042. √ötil quando voc√™ est√° trabalhando em apenas uma hist√≥ria.

### Par√¢metros

| Parameter | Required | Default | Description |
|-----------|----------|---------|-------------|
| `STORY` | No | All in-progress | Story ID to update (e.g., US-0042) |

## Exemplos

### Fluxo de trabalho de desenvolvimento t√≠pico

```bash
# Make code changes...

# Verify tests still pass
/agileflow:verify

# Output:
# ‚úÖ PASSED | npm test | 42 passed, 0 failed | 12.3s
# Updated stories:
# - US-0042: passing
# - US-0043: passing
```

### Falha nos testes - corrija-os

```bash
/agileflow:verify

# Output:
# ‚ùå FAILED | npm test | 40 passed, 2 failed | 8.7s
#
# Failed tests:
#   ‚ùå auth.test.ts:42 - Expected redirect
#   ‚ùå api.test.ts:67 - Session token not persisting
#
# Updated stories:
# - US-0042: failing
# - US-0043: failing
```

### Antes de criar a linha de base

```bash
# Ensure all tests pass before marking a milestone
/agileflow:verify

# If passing:
/agileflow:baseline "Sprint 3 complete"

# If failing:
# (Fix tests first, then baseline)
```

## Formato de sa√≠da

### Relat√≥rio de sucesso

```text
üß™ Test Verification Complete

Command: npm test
Duration: 12.3s
Result: ‚úÖ PASSED

Tests: 42 passed, 0 failed, 42 total

Updated stories:
- US-0042: passing
- US-0043: passing

All in-progress stories have passing tests ‚úÖ
```

### Relat√≥rio de falhas

```text
üß™ Test Verification Complete

Command: npm test
Duration: 8.7s
Result: ‚ùå FAILED

Tests: 40 passed, 2 failed, 42 total

Failed tests:
  ‚ùå auth.test.ts:42
     Expected redirect to /dashboard
     Got redirect to /login

  ‚ùå api.test.ts:67
     Session token not persisting
     Cookie not set after login

Updated stories:
- US-0042: failing
- US-0043: failing

‚ö†Ô∏è  WARNING: 2 stories now have failing tests
```

### Tempo esgotado

```text
üß™ Test Verification Failed

Command: npm test
Result: ‚è±Ô∏è  TIMEOUT (60s)

The test suite did not complete within 60 seconds.

Updated stories:
- US-0042: failing (timeout)

Consider:
1. Increase test_timeout_ms in environment.json
2. Optimize slow tests
3. Run specific test suites instead of all tests
```

## Configura√ß√£o

Verifique se usa configura√ß√µes de `docs/00-meta/environment.json`:

```json
{
  "test_command": "npm test",
  "test_timeout_ms": 60000,
  "project_type": "nodejs"
}
```

Para personalizar o comportamento do teste:

1. Editar `docs/00-meta/environment.json`
2. Mudar `test_command` ao seu comando
3. Mudar `test_timeout_ms` para o tempo limite desejado
4. Execute a verifica√ß√£o novamente

## Pr√©-requisitos

A verifica√ß√£o requer:

- **Session harness initialized** - Correr `/agileflow:session:init` primeiro
- **docs/00-meta/environment.json** - Arquivo de configura√ß√£o de teste
- **docs/09-agents/status.json** - Acompanhamento de hist√≥ria
- **Working tests** - Seu projeto deve ter um conjunto de testes

### Inicializar o chicote de sess√£o

Se voc√™ receber um erro "Sess√£o de chicote n√£o inicializada":

```bash
/agileflow:session:init
```

Isto ir√°:
- Detecte seu tipo de projeto
- Crie ambiente.json com configura√ß√£o de teste
- Configure a verifica√ß√£o de teste para todas as hist√≥rias

## Integra√ß√£o com outros comandos

Verify √© usado automaticamente por:

| Command | When |
|---------|------|
| `/babysit` | After implementing code changes |
| `/baseline` | Before creating verified checkpoints |
| `/session:resume` | At start of work session |
| `/pr` | Can include test status in PR description |

Voc√™ tamb√©m pode executar a verifica√ß√£o manualmente a qualquer momento para verificar o status.

## Cen√°rios Comuns

### "Meus testes est√£o passando?"

```bash
/agileflow:verify
# Shows immediate pass/fail status with counts
```

### "Corrigir testes com falha"

```bash
# See which tests failed
/agileflow:verify

# Fix the failing tests in your code editor
# Then verify again
/agileflow:verify
# Should show ‚úÖ PASSED now
```

### ‚ÄúUma hist√≥ria falha, outras passam‚Äù

```bash
# Check which story has failing tests
/agileflow:verify

# Review that story's test_status in output
# Focus on fixing just that story's tests

# Run verify with specific story to confirm fix
/agileflow:verify US-0042
```

### "Testes lentos - demorando muito"

```bash
# Timeout occurred
/agileflow:verify

# Options:
# 1. Increase timeout in environment.json
# 2. Run subset of tests: npm test -- --testPathPattern=auth
# 3. Optimize slow tests

# Increase timeout and try again
```

## Solu√ß√£o de problemas

### "Arn√™s de sess√£o n√£o inicializado"

**Error:**
```text
‚ö†Ô∏è  Session harness not initialized
Run /agileflow:session:init to set up test verification
```

**Fix:**
```bash
/agileflow:session:init
```

### "Testes n√£o encontrados"

**Error:**
```text
‚ùå Test Command Failed
Command: npm test
Error: npm: command not found
```

**Fix:**
- Instale depend√™ncias: `npm install`
- Verifique se o comando de teste em Environment.json corresponde √† sua configura√ß√£o
- Verifique PATH inclui as ferramentas necess√°rias

### "Hist√≥ria n√£o encontrada"

**Error:**
```text
‚ö†Ô∏è  Story US-0099 not found in status.json
Available in_progress stories:
- US-0042
- US-0043
```

**Fix:**
- Verifique se o ID da hist√≥ria est√° correto (verifique status.json)
- Execute sem ID da hist√≥ria para verificar todas as hist√≥rias em andamento

### "Status.json inv√°lido"

**Error:**
```text
‚ùå Cannot Update Status
File docs/09-agents/status.json is invalid or missing.
```

**Fix:**
```bash
# Re-initialize AgileFlow setup
/agileflow:setup
```

## Pontas

### Execute testes com frequ√™ncia

```bash
# After every major change
/agileflow:verify

# Before committing
/agileflow:verify

# Before creating PR
/agileflow:verify

# Before baseline
/agileflow:verify
```

### Capture regress√µes antecipadamente

O Verify rastreia automaticamente o status do teste por hist√≥ria, para que voc√™ possa:
- Veja quando os testes s√£o interrompidos (mudan√ßas no test_status)
- Identifique qual hist√≥ria introduziu o fracasso
- Corrija os problemas antes que eles se acumulem

### Usar com linha de base

```bash
# Ensure all tests pass
/agileflow:verify

# If all passing:
/agileflow:baseline "Milestone complete"

# If any failing:
# (Fix first, then baseline)
```

## Comandos Relacionados

- [`/bab√°`](/commands/babysit) - Mentor de implementa√ß√£o (executa a verifica√ß√£o automaticamente)
- [`/linha de base`](/commands/baseline) - Crie pontos de verifica√ß√£o verificados (requer aprova√ß√£o em testes)
- [`/sess√£o:init`](/commands/session-init) - Inicializar o chicote de sess√£o
- [`/sess√£o:curr√≠culo`](/commands/session-resume) - Retomar sess√£o (executa verifica√ß√£o)
- [`/pr`](/commands/pr) - Gerar solicita√ß√£o pull (mostra o status do teste)
