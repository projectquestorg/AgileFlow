---
title: /agileflow:investigación:preguntar
description: Genere solicitudes de investigación detalladas para ChatGPT, Claude web, Perplexity o Gemini
---
# /agileflow:investigación:preguntar

Genere un mensaje de investigación completo y rico en contexto para herramientas externas de IA cuando necesite ayuda de expertos.

## Inicio rápido

```bash
/agileflow:research:ask TOPIC="your research topic"
```

Ejemplo de solución de problemas:

```bash
/agileflow:research:ask TOPIC="next-auth Google OAuth" ERROR="[auth][error] CallbackRouteError: unauthorized_client"
```

## Propósito

Cuando estás atascado en un problema o necesitas orientación experta, este comando genera un **mensaje detallado de más de 200 líneas** que incluye:

- Su contexto base de código actual y fragmentos de código
- Mensajes de error exactos y seguimientos de pila.
- Lo que ya has probado
- Preguntas específicas para responder.

El mensaje generado está diseñado para obtener respuestas prácticas y específicas de las herramientas de inteligencia artificial.

## Parámetros

| Argumento | Requerido | Descripción |
|----------|----------|-------------|
| TEMA | Sí | Qué estás investigando (por ejemplo, "OAuth 2.0 con Google") |
| DETALLES | No | Restricciones, plazos o requisitos específicos |
| ERROR | No | Mensaje de error exacto al solucionar problemas |

## Qué se genera

El comando crea un mensaje estructurado con estas secciones:

### 1. Contexto del proyecto
Marcoversión, dependencias y archivos relevantes de su código base.

### 2. Implementación actual
**Más de 50 líneas de código real** de tu proyecto, no pseudocódigo ni resúmenes.

### 3. El problema
- Mensajes de error exactos (textualmente)
- Seguimiento de pila completo si está disponible
- Comportamiento esperado versus real
- Pasos para reproducir

### 4. Lo que ya hemos probado
Al menos **2 enfoques** con resultados detallados y análisis de por qué no funcionaron.

### 5. Preguntas específicas
**Más de 3 preguntas específicas** que tienen respuesta y son específicas para su situación.

### 6. Lo que necesito
- Análisis de causa raíz
- Solución paso a paso
- Ejemplos de código completos
- Problemas y casos extremos
- Enfoque de prueba

### 7. Detalles del entorno
Versión de Node.js, sistema operativo y versiones de herramientas relevantes.

## Requisitos de calidad

El comando valida el mensaje generado antes de generar:

| Consultar | Requisito |
|-------|-------------|
| Longitud | ≥200 líneas |
| Fragmentos de código | ≥50 líneas de código real |
| Detalles del error | Mensaje textual si soluciona el problemaing |
| Sección probada | ≥2 enfoques documentados |
| Preguntas | ≥3 preguntas específicas |

Si alguna comprobación falla, el comando recopila más contexto y se regenera.

## Flujo de trabajo

```
Step 1: Run the command
/agileflow:research:ask TOPIC="..." ERROR="..."

Step 2: Copy the generated prompt

Step 3: Paste into ChatGPT, Claude web, Perplexity, or Gemini

Step 4: Get expert analysis

Step 5: Import results back
/agileflow:research:import TOPIC="..."
(paste the response when prompted)

Step 6: Results saved to docs/10-research/
```

## Salida de ejemplo

Un buen mensaje se ve así (abreviado):

```markdown
# Research Request: next-auth Google OAuth unauthorized_client Error

## Project Context

**Framework**: Next.js 14.0.4 with App Router
**Key Dependencies**:
- next-auth: 5.0.0-beta.4
- next: 14.0.4
- typescript: 5.3.3

---

## Current Implementation

### File: src/app/api/auth/[...nextauth]/route.ts

```mecanografiado
import NextAuth from "next-auth";
import Google from "next-auth/providers/google";

exportar const {controladores, autenticación, iniciar sesión, cerrar sesión} = NextAuth({
  proveedores: [
    Google({
      ID de cliente: proceso.env.GOOGLE_CLIENT_ID!,
      clientSecret: proceso.env.GOOGLE_CLIENT_SECRET!,
    }),
  ],
  // ... 40+ líneas más de código real
});
```

---

## The Problem

### Error Message
```
[auth][error] CallbackRouteError: Lea más en https://errors.authjs.dev#callbackrouteerror
[auth][causa]: Error: cliente_no autorizado
```

### Expected Behavior
User should be redirected to Google login, authenticate, and return to the app.

### Actual Behavior
After clicking "Sign in with Google", immediately get unauthorized_client error.

---

## What We've Already Tried

### Attempt 1: Verify credentials
**What we did**: Double-checked GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET
**Result**: Credentials match exactly
**Why it didn't work**: Issue persists

### Attempt 2: Check redirect URIs
**What we did**: Added localhost:3000/api/auth/callback/google to Google Console
**Result**: Still getting unauthorized_client

---

## Specific Questions

1. **Why does next-auth 5.0.0-beta.4 throw unauthorized_client when credentials are verified?**
2. **Is there additional configuration needed for Google OAuth with App Router?**
3. **What's the correct redirect URI format for next-auth v5?**
4. **Are there known issues with next-auth 5.0.0-beta.4 and the Google provider?**

---

## What I Need

1. **Root cause analysis**: Why is this happening?
2. **Step-by-step solution** with exact code changes
3. **Complete code examples** that I can copy-paste
4. **Gotchas and edge cases** to watch for
5. **Testing approach** to verify the fix works
```

## Antipatrones

**No generes indicaciones breves y vagas:**

```
❌ "How do I fix OAuth in Next.js?"
❌ "Getting an error with authentication, how to fix?"
❌ "Help with Google login"
```

**Siempre genere indicaciones detalladas con:**

```
✅ 200+ lines with full context
✅ Actual code from your codebase
✅ Exact error messages
✅ What you've already tried
✅ Specific questions
```

## Integración con niñera

Cuando [`/agileflow:babysit`](/commands/babysit) detecta que estás atascado en un problema, te sugierepuntos:

```
⚠️ You're working on this for a while. Need help?

Try:
  /agileflow:research:ask TOPIC="describe your problem"
```

## Consejos para obtener mejores resultados

1. **Sea específico con el TEMA**: incluya versiones del marco y tipos de errores
2. **Incluir mensajes de ERROR**: los seguimientos completos de la pila son de gran ayuda
3. **Deje que el comando lea su código**: extrae la implementación real
4. **No te saltes la validación**: las comprobaciones garantizan respuestas de calidad.

## Comandos relacionados

- [`/agileflow:research`](/commands/research) - Descripción general del sistema de investigación
- [`/agileflow:research:import`](/commands/research-import) - Importar resultados de investigación
- [`/agileflow:research:list`](/commands/research-list) - Ver todas las notas de investigación
- [`/agileflow:research:view`](/commands/research-view) - Leer nota de investigación específica