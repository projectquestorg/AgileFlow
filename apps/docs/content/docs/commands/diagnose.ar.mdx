---
title: / تشخيص
description: تشخيص صحة النظام
---
# / تشخيص

قم بإجراء فحوصات شاملة لسلامة نظام AgileFlow لتحديد المشكلات المحتملة قبل أن تتسبب في حدوث أعطال.

## بداية سريعة

__لا تترجم_0__

يؤدي هذا إلى تنفيذ مجموعة تشخيصية كاملة دون الحاجة إلى وسائط.

## المعلمات

لا يأخذ هذا الأمر أي معلمات - فهو يقوم تلقائيًا بتشغيل كافة الاختبارات التشخيصية.

## ما يتحقق

يتحقق نظام التشخيص من صحة تثبيت AgileFlow بالكامل:

### 1. التحقق من صحة ملف JSON
- التحقق من صحة جميع ملفات JSON الهامة (status.json، البيانات الوصفية، الإعدادات)
- التحقق من تنسيق الملف وبنيته
- تقارير أحجام الملفات بالكيلوبايت
- يحذر إذا تجاوز Status.json 100 كيلو بايت (يوصي بالأرشفة)
- يظهر عدد القصص في الملفات النشطة والمؤرشفة

### 2. سلامة بنية الملف
- التحقق من وجود الأدلة المطلوبة (docs/، .agileflow/، .claude/)
- التحقق من الملفات الهامة (metadata.json،status.json)
- التمييز بين الملفات الهامة والاختيارية

### 3. نظام الأرشفة التلقائية
- التحقق من وجود البرنامج النصي للأرشيف وقابل للتنفيذ
- التحقق من تكوين الخطاف iن .كلود/settings.json
- تقارير عتبة الأرشفة من البيانات الوصفية
- يحدد المكونات المفقودة أو التي تم تكوينها بشكل خاطئ

### 4. نظام الخطافات
- التحقق من صحة بنية .claude/settings.json
- يحسب خطافات SessionStart وUserPromptSubmit وStop
- تقارير مشاكل التكوين
- التحقق من قابلية تنفيذ الخطاف

### 5. تحليل حجم الملف
- يراقب حجم Status.json مع الحدود
- يظهر عدد القصص النشطة والمؤرشفة
- يوصي بالأرشفة عند الحاجة
- يقدم توصيات على أساس الحجم

## أمثلة

### التشخيص الأساسي

__لا تترجم_1__

يقوم بإجراء فحص كامل لسلامة النظام ويعرض النتائج.

### مؤشرات الإخراج

يستخدم التشخيص مؤشرات الحالة هذه:
- **✅** (علامة اختيار): تم اجتياز الفحص الصحي
- **❌** (تقاطع): فشل فحص الصحة
- **⚠️** (تحذير): تم العثور على مشكلة غير حرجة
- **ℹ️** (معلومات): الحالة المعلوماتية

## الإخراج النموذجي

__لا تترجم_2__

## تم اكتشاف المشكلات الشائعة

| العدد | المؤشر | الحل |
|-------|----------|----------|
| بناء جملة JSON غير صالح | ❌ | إصلاح JSON باستخدام `jq . <file>` لتحديد الأخطاء |
| حالة كبيرة.json (> 100 كيلو بايت) | ⚠️ | قم بتشغيل الأرشيف لتقليل حجم الملف |
| الملفات الهامة المفقودة | ❌ | قم بتشغيل `npx agileflow setup` لإعادة إنشاء |
| البرنامج النصي للأرشيف غير قابل للتنفيذ | ⚠️ | تشغيل `chmod +x scripts/archive-completed-stories.sh` |
| لم يتم تكوين الخطاف الأرشيفي | ❌ | تشغيل `/agileflow:configure --enable=archival` |
| .claude/settings.json | غير صالح ❌ | قم بتشغيل `/agileflow:configure --migrate` لإصلاح التنسيق |

## متى يتم التشغيل

تشغيل التشخيص:
- **بعد الإعداد**: تحقق من اكتمال تثبيت AgileFlow بنجاح
- **قبل العمليات الكبرى**: تحقق من صحة النظام قبل إجراء تغييرات كبيرة
- **بشكل دوري**: تشغيل شهري/ربع سنوي للحفاظ على سلامة النظام
- **بعد تغييرات التكوين**: تحقق من سريان التغييرات بشكل صحيح
- **عند بدء التشغيل**: إذا واجهت مشكلات، فابدأ هنا لاستكشاف الأخطاء وإصلاحها

## رموز الخروج

- **0**: تم اجتياز كافة الاختبارات، والنظام سليم
- **1**: تم العثور على مشكلة واحدة أو أكثر تحتاج إلى الاهتمام

يسمح هذا باستخدام الأمر في خطوط أنابيب CI/CD والبرامج النصية الآلية.

## الإجراءات الموصى بها

إذا كانت القضايا لواتبع الخطوات التالية:

1. **JSON غير صالح**: استخدم `jq . <file>` لتحديد أخطاء بناء الجملة وإصلاحها يدويًا
2. **الملفات الكبيرة**: تشغيل الأرشيف: `bash scripts/archive-completed-stories.sh`
3. **الملفات المفقودة**: أعد التثبيت: `npx agileflow setup`
4. **مشكلات التنسيق**: تشغيل الترحيل: `/agileflow:configure --migrate`
5. **إعادة تشغيل التشخيص**: تأكد من حل المشكلات

## الأوامر ذات الصلة

- [`/configure`](/commands/configure) - تكوين ميزات AgileFlow
- [`/validate-expertise`](/commands/validate-expertise) - التحقق من صحة ملفات الخبرة
- [`/compress`](/commands/compress) - ضغط الحالة.json وتقليل حجم الملف