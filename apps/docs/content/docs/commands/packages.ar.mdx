---
title: /package
description: إدارة التبعيات من خلال التحديثات وعمليات التدقيق الأمني
---

# /package

إدارة تبعيات المشروع بشكل شامل باستخدام لوحات المعلومات الآلية وعمليات تدقيق الأمان والتحديثات الآمنة وإدارة الثغرات الأمنية عبر جميع مديري الحزم الرئيسيين.

## بداية سريعة

```bash
/agileflow:packages ACTION=dashboard
```

## غاية

يوفر هذا الأمر إدارة التبعية الكاملة عن طريق:
- اكتشاف تبعيات المشروع عبر npm، والنقطة، والبضائع، ومديري الحزم الآخرين
- إنشاء لوحات معلومات تبعية شاملة تحتوي على معلومات الحالة والضعف
- إجراء عمليات التدقيق الأمني ​​وتحديد التهديدات الخطيرة
- تخطيط وتطبيق تحديثات التبعية الآمنة
- إنشاء قصص لقضايا الأمن
- تتبع والإبلاغ عن صحة الصيانة

## حدود

| Parameter | Required | Default | Description |
|-----------|----------|---------|-------------|
| `ACTION` | No | `dashboard` | `dashboard`, `update`, or `audit` |
| `SCOPE` | No | `all` | For updates: `security`, `major`, `minor`, `patch`, `all` |
| `OUTPUT` | No | `markdown` | For dashboard: `markdown`, `html`, `json`, `csv` |
| `INCLUDE_DEV` | No | `yes` | Include dev dependencies: `yes` or `no` |
| `SAVE_TO` | No | varies | Save report location (e.g., `docs/08-project/deps.md`) |
| `AUTO_PR` | No | `no` | Auto-create PR for updates: `yes` or `no` |

## أمثلة

### عرض لوحة معلومات التبعية

```bash
/agileflow:packages
```

يعرض لوحة تحكم شاملة لجميع التبعيات مع الحالة ونقاط الضعف والتوصيات.

### تصدير لوحة المعلومات بتنسيق HTML

```bash
/agileflow:packages ACTION=dashboard OUTPUT=html
```

يُنشئ لوحة تحكم HTML تفاعلية تحتوي على جداول ورسوم بيانية قابلة للفرز.

### التدقيق الأمني ​​فقط

```bash
/agileflow:packages ACTION=audit
```

يقوم بإجراء عمليات فحص الأمان والإبلاغ عن نقاط الضعف دون إجراء تغييرات.

### تحديث الثغرات الأمنية

```bash
/agileflow:packages ACTION=update SCOPE=security
```

يقوم بأمان بتحديث الحزم ذات المشكلات الأمنية المعروفة ويطلب التأكيد.

### تحديث الإصدارات الثانوية

```bash
/agileflow:packages ACTION=update SCOPE=minor
```

تحديثات الإصدارات الثانوية (ميزات جديدة، متوافقة مع الإصدارات السابقة).

### إنشاء تلقائي للعلاقات العامة للتحديثات

```bash
/agileflow:packages ACTION=update SCOPE=all AUTO_PR=yes
```

يقوم بتحديث كافة الحزم وإنشاء طلب سحب تلقائيًا.

## الإجراءات

### الإجراء=لوحة المعلومات (افتراضي)

يُنشئ تقرير تبعية شامل يُظهر:
- **Total count** - تبعيات الإنتاج والتطوير
- **Vulnerability status** - حرجة، عالية، متوسطة، منخفضة
- **Update availability** - إصدارات التصحيح الرئيسية والثانوية
- **License info** - لتتبع الامتثال
- **Health score** - صحة صيانة التبعية الشاملة

**Output Example**:
```text
# Dependencies Dashboard

Project: my-app
Generated: 2025-12-24 10:00:00 UTC
Total Dependencies: 145 (prod: 98, dev: 47)

## Summary

| Category | Count | Action Needed |
|----------|-------|---------------|
| Critical Vulnerabilities | 2 | Update immediately |
| Major Updates | 12 | Review breaking changes |
| Minor Updates | 28 | Safe to update |
| Up-to-date | 85 | No action |
| Deprecated | 3 | Find alternatives |

## Critical Vulnerabilities

### express@4.16.0
Current: 4.16.0 → Latest: 4.18.2 (+2 major)
Severity: HIGH (CVSS 7.5)
CVE: CVE-2022-24999
Description: ReDoS vulnerability in Express.js routing
Fix: npm install express@4.18.2

[Additional vulnerability details...]

## Maintenance Score: 78/100

Breakdown:
- Security: 60/100 (2 critical vulnerabilities)
- Freshness: 80/100 (most deps recent)
- License compliance: 95/100 (2 GPL warnings)
- Bundle size: 75/100 (some optimization possible)
```

### الإجراء = التحديث

يخطط ويطبق تحديثات التبعية مع فحوصات السلامة:

1. **Detects outdated packages** باستخدام مدير الحزم المناسب
2. **Categorizes by type** - الأمن، الكبرى، الثانوية، التصحيح
3. **Shows update plan** مع كسر تحذيرات التغيير
4. **Asks for confirmation** قبل التقديم
5. **Runs tests** بعد التحديثات (إن وجدت)
6. **Creates PR** إذا طلب ذلك
7. **Generates report** مع كل التغييرات

**Supported Package Managers**:
- Node.js: npm، الغزل، pnpm
- بايثون: النقطة، أدوات النقطة، الشعر
- روبي: المجمع (Gemfile)
- اذهب: اذهب إلى الوضع
- الصدأ: البضائع
- جافا: مخضرم، جرادل
- .NET: نوجيت

**Security Updates** يتم دائمًا تحديد الأولويات والتوصية بها على الفور.

**Major Updates** إنشاء قصص فردية للمراجعة (قد تتطلب تغييرات في التعليمات البرمجية).

**Minor/Patch Updates** يمكن دفعاتها بأمان.

### الإجراء=التدقيق

تشغيل التدقيق الأمني ​​فقط دون تحديث:

يعرض جميع نقاط الضعف المعروفة مع:
- مستويات الخطورة (حرجة، عالية، متوسطة، منخفضة)
- معرفات وأوصاف مكافحة التطرف العنيف
- إصدارات الحزمة المتأثرة
- الإصلاحات الموصى بها

مثال:
```text
# Security Audit Report

Generated: 2025-12-24 10:00:00 UTC
Package Manager: npm

## Critical (2)
- express@4.16.0: CVE-2022-24999 (CVSS 7.5)
- lodash@4.17.19: CVE-2021-23337 (CVSS 7.4)

## High (0)
None

## Moderate (3)
[Details...]

Recommendation: Run /agileflow:packages ACTION=update SCOPE=security
```

## كشف مدير الحزم

يكتشف الأمر ويدعم تلقائيًا:

| Manager | Files | Detection |
|---------|-------|-----------|
| npm | package.json, package-lock.json | Node.js projects |
| yarn | yarn.lock | Modern Node.js |
| pnpm | pnpm-lock.yaml | Modern Node.js |
| pip | requirements.txt, pyproject.toml | Python |
| poetry | poetry.lock | Modern Python |
| bundler | Gemfile, Gemfile.lock | Ruby/Rails |
| go mod | go.mod, go.sum | Go |
| cargo | Cargo.toml, Cargo.lock | Rust |
| Maven | pom.xml | Java |
| Gradle | build.gradle | Java |
| NuGet | *.csproj, packages.config | .NET |

## تنسيقات الإخراج

### تخفيض السعر (افتراضي)
تقرير قابل للقراءة من قبل الإنسان مع جداول مناسبة للتوثيق:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=markdown
```

### HTML
لوحة تحكم تفاعلية مع التصفية والفرز والتصور:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=html
```

### JSON
البيانات المنظمة للأدوات والتكامل:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=json
```

### CSV
التنسيق المتوافق مع جدول البيانات:
```bash
/agileflow:packages ACTION=dashboard OUTPUT=csv
```

## أمثلة سير العمل

### تدقيق التبعية الأسبوعي

```bash
# Run every Monday
/agileflow:packages ACTION=audit
```

مراجعة جميع نقاط الضعف وتحديثات الخطة.

### الصيانة الشهرية

```bash
# Update minor and patch versions
/agileflow:packages ACTION=update SCOPE=minor
```

البقاء على اطلاع بالتغييرات غير الطارئة.

### التحديثات الرئيسية الفصلية

```bash
# Review major version upgrades
/agileflow:packages ACTION=update SCOPE=major
```

خطط للتغييرات الكسرية واختبرها بعناية.

### التصحيح الأمني ​​في حالات الطوارئ

```bash
# Immediately update critical vulnerabilities
/agileflow:packages ACTION=update SCOPE=security
```

أنشئ علاقات عامة وانشرها بسرعة في حالة نجاح الاختبارات.

## التكامل سي

### التدقيق الآلي في CI

أضف إلى إجراءات جيثب:
```yaml
- name: Dependency audit
  run: npm audit --audit-level=high

- name: Check outdated
  run: npm outdated || true  # Don't fail, just report
```

### تكوين ديبيندابوت

يخلق `.github/dependabot.yml`:
```yaml
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10

  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"
```

سيقوم Dependabot تلقائيًا بإنشاء علاقات عامة للحصول على التحديثات.

### فحص التبعية الأسبوعي

إضافة سير العمل المجدول:
```yaml
name: Dependencies
on:
  schedule:
    - cron: '0 9 * * 1'  # Monday 9am

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: /agileflow:packages ACTION=dashboard
```

## إنشاء قصص لنقاط الضعف

عند العثور على مشكلات أمنية، قم بإنشاء قصص:

**Format**:
```text
US-XXXX: Fix security vulnerability in [PACKAGE]

Severity: [CRITICAL|HIGH|MEDIUM]
CVE: [CVE-XXXX-XXXXX]
Current: [version]
Fix: [recommended version]

Steps to Fix:
1. Update package: npm install package@latest
2. Run tests: npm test
3. Review changelog for breaking changes
```

## أفضل الممارسات

1. **Prioritize Security** - قم دائمًا بتحديث نقاط الضعف الحرجة على الفور

2. **Batch Minor Updates** - تحديثات المجموعة غير المتقطعة من أجل الكفاءة

3. **Test After Updates** - قم دائمًا بتشغيل مجموعة الاختبار الكاملة بعد التحديثات

4. **Review Major Changes** - اختبار الإصدارات الرئيسية في التدريج قبل الإنتاج

5. **Monitor Deprecations** - التعامل مع الحزم المهملة مبكرًا

6. **License Compliance** - التحقق من التراخيص لمتطلبات الشركات

7. **Bundle Size** - مراقبة تأثير حجم الحزمة من التبعيات

8. **Automated Audits** - قم بإجراء عمليات التدقيق أسبوعيًا، وليس فقط أثناء الإصدارات

## قواعد

- لا تقم مطلقًا بالتحديث التلقائي للحزم الهامة دون الحصول على موافقة
- قم دائمًا بمعاينة التغييرات قبل تطبيقها (الفرق أولاً، نعم/لا)
- قم بتجميع التحديثات الثانوية/التصحيحية عندما يكون ذلك ممكنًا
- التحذير بشكل بارز من كسر التغييرات
- رابط لسجلات التغيير وأدلة الهجرة
- إنشاء قصص للترقيات الرئيسية
- لا تخطي الاختبارات أبدًا بعد التحديث
- الالتزام دائمًا بملفات القفل (package-lock.json، Cargo.lock، وما إلى ذلك)

## الأوامر ذات الصلة

- [`/اختبارات الإعداد`](/commands/tests) - تكوين الاختبار الآلي
- [`/ إعداد ci`](/commands/ci) - إعداد الشيكات CI
- [`/الإعداد للنشر`](/commands/deploy) - تكوين النشر
