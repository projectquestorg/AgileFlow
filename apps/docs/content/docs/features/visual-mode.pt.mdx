---
title: Modo Visual
description: Sistema de verificação de captura de tela para desenvolvimento de UI com protocolo de prefixo verificado
---
# Modo Visual

O Modo Visual é um sistema de verificação de captura de tela para desenvolvimento de UI que garante que todos os resultados visuais sejam revisados e aprovados antes que uma história seja marcada como concluída.

## Visão geral

Ao desenvolver componentes de UI, os testes por si só podem não detectar problemas visuais como:
- Problemas de layout
- Inconsistências de estilo
- Problemas de design responsivo
- Regressões visuais

O Modo Visual resolve isso exigindo que todas as capturas de tela sejam **verificadas** (prefixadas com __NOTRASLATE_23__) antes de continuar.

## Como funciona

### O protocolo de prefixo verificado

1. Durante o desenvolvimento da IU, as capturas de tela são salvas no diretório __NOTRASLATE_24__
2. Novas capturas de tela são salvas sem prefixo (por exemplo, __NOTRASLATE_25__)
3. Após a revisão visual, as capturas de tela aprovadas são renomeadas com o prefixo __NOTRASLATE_26__
4. O Modo Visual verifica se TODAS as capturas de tela têm o prefixo __NOTRASLATE_27__
5. Se existir alguma captura de tela não verificada, o loop faz uma pausa para revisão

<imagem>
  <source media="(prefere esquema de cores: escuro)" srcset="/images/docs/features/visual-mode-protocol.dark.svg" />
  <img alt="Protocolo de prefixo verificado" src="/images/docs/features/visual-mode-protocol.light.svg" />
</imagem>

## Início rápido

Ative o modo visual no modo Loop:

```bash
/agileflow:babysit EPIC=EP-0042 MODE=loop VISUAL=true
```

Ou execute o verificador diretamente:

```bash
node .agileflow/scripts/screenshot-verifier.js
```

## Fluxo de trabalho de captura de tela

### 1. Faça capturas de tela durante o desenvolvimento

Ao implementar componentes de UI, salve capturas de tela:

```typescript
// In your test or component
await page.screenshot({ path: 'screenshots/user-profile.png' });
```

Ou manualmente com ferramentas de desenvolvimento do navegador.

### 2. Revise as capturas de tela

O Modo Visual é pausado quando capturas de tela não verificadas são encontradas:

__NOTRADUZIR_3__

### 3. Verifique ou corrija

**Se a captura de tela parecer correta:**
__NÃOTRADUZIR_4__

**Se forem encontrados problemas:**
- Corrija o código da IU
- Refaça a captura de tela
- Revise novamente

### 4. Continuar

Depois que todas as capturas de tela forem verificadas, o loop continuará automaticamente.

## Script verificador

### Uso

__NOTRADUZIR_5__

### Códigos de saída

| Código | Significado |
|------|---------|
| 0 | Todas as capturas de tela verificadas |
| 1 | Capturas de tela não verificadas encontradas |
| 2 | Erro duranteverificação de ng |

### Exemplos de saída

**Tudo verificado:**
__NOTRADUZIR_6__

**Encontrado não verificado:**
__NÃOTRADUZIR_7__

## Configuração

### No estado da sessão

Configuração do modo visual em __NOTRASLATE_28__:

__NÃOTRADUZIR_8__

### Em metadados

Configurações padrão em __NOTRASLATE_29__:

__NOTRADUZIR_9__

### Opções

| Opção | Padrão | Descrição |
|--------|---------|---------|
| `screenshots_dir` | `screenshots` | Diretório para procurar capturas de tela |
| `verified_prefix` | `verified-` | Prefixo necessário para capturas de tela verificadas |
| `extensions` | `[".png", ".jpg", ".jpeg", ".webp"]` | Extensões de arquivo de imagem a serem verificadas |
| `auto_cleanup` | `true` | Remover capturas de tela verificadas após a conclusão épica |

## Integração com modo Loop

O Modo Visual funciona como uma etapa de verificação adicional em [Loop Mode__NOTRASLATE_44__:

<imagem>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/visual-mode-loop.dark.svg" />
  <img alt="Integração do Loop do Modo Visualíon" src="/images/docs/features/visual-mode-loop.light.svg" />
</imagem>

## Quando usar o modo visual

### Bom para

- ✅ Desenvolvimento de componentes UI
- ✅ Projetar implementações de sistemas
- ✅ Trabalho de layout responsivo
- ✅ Prevenção de regressão visual
- ✅ Verificações visuais de acessibilidade
- ✅ Trabalho de tema e estilo

### Não é bom para

- ❌ Desenvolvimento back-end/API
- ❌ Migrações de banco de dados
- ❌ Configuração CI/CD
- ❌ Recursos não visuais
- ❌ Testes automatizados apenas em fluxos de trabalho

## Melhores práticas

### 1. Nomenclatura consistente de capturas de tela

Use nomes descritivos e consistentes:

__NOTRADUZIR_10__

### 2. Capture vários estados

Captura de tela de todos os estados dos componentes:

__NOTRADUZIR_11__

### 3. Incluir Contexto

Captura de tela com contexto suficiente para entender o componente:

```typescript
// Too narrow - just the button
await button.screenshot({ path: 'screenshots/button.png' });

// Better - button with surrounding context
await page.screenshot({
  path: 'screenshots/button-in-form.png',
  clip: { x: 0, y: 100, width: 400, height: 200 }
});
```

### 4. Limpeza após verificação

Remova capturas de tela verificadas antigas quando as histórias forem concluídas:

__NÃOTRADUZIR_13__

### 5. Aparência esperada do documento

Adicione notas sobre o que a captura de tela deve mostrar:

__NOTRADUZIR_14__

## Solução de problemas

###Scapturas de tela não detectadas

1. Verifique o caminho do diretório:
   __NÃOTRADUZIR_15__

2. Verifique se as extensões dos arquivos estão corretas:
   __NOTRADUZIR_16__

3. Verifique o caminho de configuração em session-state.json

### A verificação não está em execução

1. Certifique-se de que o Modo Visual esteja ativado:
   ```bash
   cat docs/09-agents/session-state.json | grep visual
   ```

2. Verifique se o modo Loop está ativo:
   __NÃOTRADUZIR_18__

### Falsos Positivos

Se as capturas de tela estiverem sendo sinalizadas incorretamente:

1. Verifique a ortografia do prefixo: __NOTRASLATE_38__ (observe o hífen)
2. Verifique se há caracteres ocultos no nome do arquivo
3. Verifique se o arquivo é na verdade uma imagem

## Exemplo de fluxo de trabalho

### UI Story: Adicionar componente de avatar do usuário

**1. A história começa, Claude implementa o componente:**
__NOTRADUZIR_19__

**2. Claude faz capturas de tela:**
```bash
screenshots/
  avatar-small.png
  avatar-medium.png
  avatar-large.png
  avatar-fallback.png
```

**3. Pausas no modo visual:**
```
⚠️ Visual Mode: 4 unverified screenshots

Please review and verify:
  - avatar-small.png
  - avatar-medium.png
  - avatar-large.png
  - avatar-fallback.png
```

**4. Você analisa e verifica:**
```bash
# All look good
for f in screenshots/avatar-*.png; do
  mv "$f" "screenshots/verified-$(basename $f)"
done
```

**5. O loop continua na próxima história**

## Recursos relacionados

- [Loop Mode__NOTRASLATE_45__ - Processamento autônomo de histórias
- [Controle de danos__NOTRASLATE_46__ - Proteção contra danos destrutivosoperações
- [__NOTRASLATE_39____NOTRASLATE_47__ - Comando de verificação manual

## Arquitetura

| Componente | Finalidade |
|-----------|---------|
| `screenshot-verifier.js` | Script de verificação principal |
| `ralph-loop.js` | Orquestra verificações do Modo Visual |
| `session-state.json` | Armazena a configuração do Modo Visual |
| `screenshots/` | Diretório de captura de tela padrão |

O Modo Visual integra-se ao gancho de parada do Modo Loop para fornecer verificação visual junto com testes automatizados.