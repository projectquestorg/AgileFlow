---
title: "Sistema de experiência de agente"
description: "Agentes de autoaperfeiçoamento que mantêm a experiência no domínio e aceleram a execução de tarefas por meio do conhecimento aprendido"
---
# Sistema de experiência de agente

O Agent Expertise System é um padrão em que os agentes mantêm **arquivos de expertise** (modelos mentais) de seu domínio e os atualizam automaticamente enquanto trabalham. Isso cria um sistema de aprendizagem em circuito fechado que torna os agentes mais rápidos e precisos ao longo do tempo.

## Visão geral

### O problema resolvido

Sem arquivos de experiência, cada sessão requer a mesma exploração:
- Agente começa do zero
- Deve pesquisar a base de código para entender a estrutura
- Repete a exploração para cada tarefa
- Nunca melhora ou aprende

Com arquivos especializados, os agentes ficam mais inteligentes:
- Carregar modelo mental no início da sessão
- Ignore a exploração, concentre-se na construção
- Aprenda com cada tarefa
- Melhorar automaticamente através do autoaperfeiçoamento

### Principais benefícios

| Aspecto | Sem experiência | Com experiência |
|--------|------------------|----------------|
| **Velocidade** | Lento (deve explorar) | Rápido (conhecimento pré-carregado) |
| **Precisão** | Variável (depende da exploração) | Consistente (conhecimento validado) |
| **Aprendizagem** |Nenhum - esquece tudo | Automático - aumenta ao longo do tempo |
| **Reutilização de conhecimento** | Zero – começa do zero | Completo - aproveita todos os aprendizados |
| **Tamanho do contexto** | Grande (exploração + construção) | Pequeno (expertise + construção) |

## Como funciona

O sistema de expertise segue um **fluxo de trabalho de três etapas**:

### Etapa 1: Planejar (com experiência)

```
Load expertise.yaml → Validate against code → Create detailed plan
```

O agente:
1. **Lê** o arquivo de expertise (modelo mental do domínio)
2. **Valida** em relação ao código real (o código é a fonte da verdade)
3. **Planeja** o trabalho com base em conhecimento validado

**Exemplo:**
```yaml
# expertise.yaml excerpt
files:
  schemas:
    - path: src/db/schema.ts
      purpose: Database table definitions
      key_exports: [tables, relations]
```

O agente lê isso e sabe exatamente onde estão os arquivos de esquema, ignorando pesquisas de diretório.

### Etapa 2: Construir (Executar Plano)

```
Execute changes → Capture diff → Validate result
```

O agente:
1. **Executa** o plano de implementação
2. **Captura** o que mudou (git diff)
3. **Valida** o resultado funciona

Resultado de exemplo:
__NOTRADUZIR_3__

### Etapa 3: Autoaperfeiçoamento (Atualização de Conhecimento)

__NÃOTRADUZIR_4__

O agente:
1. **Analisa** o git diff
2. ** Acimadatas** o arquivo de expertise com novos conhecimentos
3. **Adiciona** uma entrada de aprendizado

**Exemplo de entrada de aprendizado:**
__NOTRADUZIR_5__

## Estrutura do Arquivo de Especialização

Cada domínio de agente possui um arquivo __NOTRASLATE_32__ que documenta:

### 1. Metadados
__NOTRADUZIR_6__

### 2. Seção de arquivos
Arquivos principais que o agente precisa conhecer:

__NÃOTRADUZIR_7__

**Por que isso é importante:** o agente sabe onde estão as coisas sem precisar procurar.

### 3. Seção de Relacionamentos
Como as entidades do domínio se relacionam:

__NÃOTRADUZIR_8__

**Por que isso é importante:** O agente entende o fluxo de dados e as dependências.

### 4. Seção de padrões
Abordagens recorrentes a seguir:

__NOTRADUZIR_9__

**Por que isso é importante:** O agente aplica padrões consistentes automaticamente.

### 5. Seção de Convenções
Regras a seguir no domínio:

__NOTRADUZIR_10__

**Por que isso é importante:** O agente mantém a consistência com o código existente.

### 6. Seção de Aprendizado
Atualizado automaticamente por autoaperfeiçoamento:

__NOTRADUZIR_11__

**Por que isso é importante:** o agente se lembra do que aprendeu, melhorandohora.

## Exemplo completo de fluxo de trabalho

Aqui está um fluxo de trabalho real do início ao fim:

### Solicitação Inicial
> "Adicionar uma tabela de sessões para rastrear sessões de login do usuário"

### Etapa 1: Plano

O agente lê expertise.yaml e sabe:
- Os esquemas estão em __NOTRASLATE_33__
- As migrações vão em __NOTRASLATE_34__
- Padrão: exclusões suaves com __NOTRASLATE_35__
- Convenção: chaves primárias UUID
- Relacionamentos: as sessões possuem muitos logs de auditoria

**Plano criado:**
```markdown
1. Add sessions table to src/db/schema.ts
   - Columns: id (UUID), user_id (FK), token, expires_at, created_at, updated_at, deleted_at
2. Create migration: src/db/migrations/20250109_add_sessions.ts
3. Create query functions: src/db/queries/sessions.ts
4. Add pattern to conventions: "Sessions use token field for validation"
```

### Etapa 2: Construir

Agente executa:
1. Modifica __NOTRASLATE_36__ - adiciona tabela de sessões
2. Cria arquivo de migração
3. Cria utilitários de consulta
4. Valida com TypeScript

A diferença do Git mostra:
__NÃOTRADUZIR_13__

### Etapa 3: Autoaperfeiçoamento

Experiência em atualizações do agente:

__NOTRADUZIR_14__

**Resultado:** Na próxima vez que o agente trabalhar em sessões, ele já conhecerá a estrutura e os padrões.

## Agentes Especialistas Disponíveis

AgileFlow inclui experiência nestes domínios:

### Fase Piloto (MVP)
- **Banco de dados** - Esquema, migrações, consultas
- **API** - comandos CLI, routestes, pontos finais
- **UI** - Componentes, estilo, layouts

### Implementação da Fase 1
- **Testes** - Teste arquivos, padrões, estruturas
- **CI/CD** - GitHub Actions, Docker, implantação
- **DevOps** - Infraestrutura, Kubernetes, monitoramento
- **Segurança** - Autenticação, tokens, permissões

### Implementação da Fase 2
- **Documentação** - README, documentos da API, guias
- **Refatoração** - Limpeza de código, otimização
- **Desempenho** - Cache, otimização, benchmarks
- **Acessibilidade** - WCAG, padrões a11y

### Fase 3+ Implementação
- **Celular** - React Native, iOS, Android
- **Integrações** - Webhooks, APIs, serviços de terceiros
- **Analytics** - Acompanhamento, métricas, painéis
- **Monitoramento** - Observabilidade, alerta

## Padrões de fluxo de trabalho em três etapas

### Para desenvolvimento completo de recursos

Use o **fluxo de trabalho completo** ao implementar um recurso completo:

__NÃOTRADUZIR_15__

### Para perguntas rápidas

Use o **prompt de pergunta** para obter informações:

__NOTRADUZIR_16__

### Para atualizações manuais

Use o **prompt de autoaperfeiçoamento**depois de fazer alterações:

```bash
# 1. Make your code changes manually

# 2. Read the self-improve prompt
cat packages/cli/src/core/experts/database/self-improve.md

# 3. Run self-improvement
# Agent analyzes your changes and updates expertise.yaml
```

## Validação de experiência

Use o script de validação fornecido para garantir que os arquivos de expertise permaneçam precisos:

__NÃOTRADUZIR_18__

### Verificações de validação

O validador verifica:
- **Esquema** - Campos obrigatórios presentes (domínio, last_updated, versão)
- **Desatualização** - Arquivo com menos de 30 dias
- **Tamanho** - O arquivo permanece focado (menos de 200 linhas)
- **Aprendizagens** - O agente se aprimorou pelo menos uma vez

## Métricas de especialização

Monitore a integridade do seu sistema de especialização:

__NOTRADUZIR_19__

### Métricas rastreadas

```
╔════════════════════════════════════════════════╗
║        Agent Expert Metrics Dashboard          ║
╚════════════════════════════════════════════════╝

Summary
─────────────────────────────────────────────────
Total Experts:              15
With Learnings:             12 (80%)
Total Learnings Recorded:   48
Avg File Size:              145 lines

Staleness Distribution
─────────────────────────────────────────────────
Updated in last 7 days:     8
8-30 days old:              4
31-90 days old:             2
90+ days old:               1

Self-Improve Health
─────────────────────────────────────────────────
Good adoption: 12/15 agents learning
Average learnings per expert: 3.2
```

### Principais métricas

- **Taxa de autoaperfeiçoamento** - % de agentes que melhoraram (meta: 100%)
- **Aprendizagens médias** - Acumulação de aprendizagem por especialista (meta: 5+)
- **Desatualização** - Qual é a situação atual dos arquivos de expertise (meta: menos de 7 dias)
- **Tamanho do arquivo** - Mantenha o foco no conhecimento (menos de 200 linhas cada)

## Autoaperfeiçoamento Automático

O sistema pode atualizar automaticamente arquivos de expertise com base no trabalho realizado:

### Como funciona

```bash
# Script runs as a session stop hook
node scripts/auto-self-improve.js

# Process:
# 1. Detect which agent was active
# 2. Analyze git diff for changes
# 3. Generate learning summary
# 4. Append to expertise.yaml
```

### Exemplo de aprendizado automático

Se o agente modificou estes arquivos:
```
src/db/schema.ts        # +10 lines
src/db/migrations/...ts # +25 lines
src/db/queries/users.ts # +30 lines
```

O sistema adiciona automaticamente:
```yaml
learnings:
  - date: 2025-01-09
    auto_generated: true
    insight: "Modified 3 database files: added user schema updates and queries"
    files_touched:
      - src/db/schema.ts
      - src/db/migrations/20250109_extend_users.ts
      - src/db/queries/users.ts
    context: "Session work - database domain"
```

## Criando um novo agente especialista

### 1. Criar diretório

```bash
mkdir -p packages/cli/src/core/experts/your-domain/
```

### 2. Copiar modelos

```bash
cp packages/cli/src/core/experts/templates/expertise-template.yaml \
   packages/cli/src/core/experts/your-domain/expertise.yaml

cp packages/cli/src/core/experts/templates/question-template.md \
   packages/cli/src/core/experts/your-domain/question.md

cp packages/cli/src/core/experts/templates/self-improve-template.md \
   packages/cli/src/core/experts/your-domain/self-improve.md

cp packages/cli/src/core/experts/templates/workflow-template.md \
   packages/cli/src/core/experts/your-domain/workflow.md
```

### 3. Personalize expertise.yaml

```yaml
domain: your-domain
last_updated: 2025-01-09
version: 1.0

files:
  primary:
    - path: src/your-domain/
      purpose: Main domain code location

  secondary:
    - path: src/lib/your-domain/
      purpose: Shared utilities

relationships: []
patterns: []
conventions: []
learnings: []
```

### 4. Atualizar arquivo do agente

Modifique o arquivo do agente principal para carregar a expertise:

```markdown
# At the top of your agent (FIRST ACTION)

## FIRST ACTION: Load Expertise

Read your expertise file at `packages/cli/src/core/experts/your-domain/expertise.yaml`.

This contains your mental model of the domain, including:
- Key file locations
- Relationships between entities
- Patterns to follow
- Conventions to maintain
```

E no final, execute o auto-aperfeiçoamento:

```markdown
## FINAL ACTION: Self-Improve

Read `packages/cli/src/core/experts/your-domain/self-improve.md`

Then analyze what you changed and update your expertise file.
```

## Melhores práticas

### FAZER

✅ **Validar experiência em relação ao código** - Código é fonte de verdade, experiência é memória de trabalho
✅ **Mantenha o foco na experiência** - Um domínio por arquivo (menos de 200 linhas)
✅ **Data todos os aprendizados** - Acompanhe quando os insights foram descobertos
✅ **Use caminhos de arquivo específicos** - Não diga "em algum lugar em src/", use caminhos exatos
✅ **Remover informações desatualizadas** - Exclua entradas que não se aplicam mais
✅ **Execute a validação regularmente** - __NOTRASLATE_37__

### NÃO

❌ **Confie cegamente na experiência** - Sempre verifique o código real
❌ ** Domínio mistos** - Mantenha o conhecimento em banco de dados separado do conhecimento em API
❌ **Editar aprendizados manualmente** - Deixe o autoaperfeiçoamento cuidar disso
❌ **Mantenha entradas desatualizadas** - Remova conhecimentos que não são mais precisos
❌ **Pular validação** – Conhecimento obsoleto prejudica mais do que ajuda
❌ **Crie arquivos enormes** - Divida em vários domínios específicos

## Princípios Chave

### 1. Código é fonte da verdade

Arquivos de expertise são modelos mentais – como o modo como um engenheiro entende um sistema. Eles são úteis, mas não confiáveis.

**Sempre valide com base no código real** antes de confiar na experiência.

```yaml
# ✅ Good - validated against code
# Confirmed: Database uses UUID primary keys in all tables
# Checked: src/db/schema.ts line 45

# ❌ Bad - speculative
# Probably uses UUIDs
# I think the database is PostgreSQL
```

### 2. A experiência acelera, não substitui

A experiência ajuda os agentes a trabalhar mais rapidamente, eliminando a exploração, mas os agentes ainda devem validar as descobertas.

**Use a experiência para pular a pesquisa, não para deixar de pensar.**

### 3. O aprendizado é automático

Não mantenha manualmente arquivos de expertise. Execute __NOTRASLATE_38__ após fazer alterações.

**O sistema aprende automaticamente se você usar o fluxo de trabalho.**

### 4. A experiência é focada

Cadah especialista concentra-se em UM domínio. Não crie "All Frontend Expert" - crie "React Component Expert" ou "Form Validation Expert".

**Domínios restritos → Melhor foco → Aprendizagem mais rápida**

### 5. Problemas de sinais de obsolescência

Se a perícia não tiver sido atualizada em 30 dias:
- O domínio é estável (bom!)
- O agente não está sendo usado (remova-o)
- A expertise está errada (atualize)

**Use o script de validação para monitorar a integridade.**

## Diagrama de Arquitetura

<imagem>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/agent-expertise-arch.dark.svg" />
  <img alt="Arquitetura de experiência do agente" src="/images/docs/features/agent-expertise-arch.light.svg" />
</imagem>

> O fluxo de trabalho de ciclo fechado: especialistas carregam conhecimento, validam-no, desenvolvem-no e aprendem automaticamente com o que fazem.

## Comparação: com e sem experiência

### Sem Expertise (Agente Tradicional)

```
Session 1:
├─ Search codebase structure (5 min)
├─ Understand naming conventions (3 min)
├─ Find database schema file (2 min)
└─ Build feature (10 min)
Total: 20 minutes

Session 2: (Same task in different domain)
├─ Search codebase structure (5 min) ← Repeat!
├─ Understand naming conventions (3 min) ← Repeat!
├─ Find database schema file (2 min) ← Repeat!
└─ Build feature (10 min)
Total: 20 minutes ← No improvement
```

### Com experiência (agente de autoaperfeiçoamento)

```
Session 1:
├─ Load expertise.yaml (instant)
├─ Validate against code (1 min)
├─ Build feature (10 min)
├─ Self-improve (2 min)
└─ Save learnings
Total: 13 minutes

Session 2: (Same task in same domain)
├─ Load expertise.yaml (instant) ← Faster exploration
├─ Validate against code (instant) ← Already knows structure
├─ Build feature (9 min) ← Slightly faster, better patterns
├─ Self-improve (2 min)
└─ Save learnings
Total: 11 minutes ← Improvement!

Session 10: (Regular work in domain)
├─ Load expertise.yaml (instant)
├─ No validation needed (already verified)
├─ Build feature (8 min) ← Experts apply patterns automatically
├─ Self-improve (1 min) ← Minimal updates
└─ Save learnings
Total: 9 minutes ← Continuous improvement
```

## Solução de problemasting

### O arquivo de experiência está obsoleto

**Problema:** Última atualização há mais de 45 dias

**Solução:**
1. Leia o arquivo de perícia
2. Verifique o estado atual do código
3. Atualize quaisquer entradas imprecisas
4. Execute a validação: __NOTRASLATE_39__

### Nenhum aprendizado registrado

**Problema:** O agente nunca melhorou

**Causa:** as etapas do fluxo de trabalho não foram seguidas ou o autoaperfeiçoamento não foi executado

**Solução:**
1. Execute o trabalho usando o fluxo de trabalho completo
2. Certifique-se de que a etapa de autoaperfeiçoamento seja concluída
3. Verifique expertise.yaml para novas entradas de aprendizado

### O arquivo é muito grande (>200 linhas)

**Problema:** O arquivo de experiência cresceu muito

**Causa:** O domínio é muito amplo ou foram adicionadas entradas redundantes

**Solução:**
1. Divida em vários arquivos focados
2. Remova entradas duplicadas/desatualizadas
3. Guarde apenas informações essenciais

### A experiência não corresponde ao código

**Problema:** as informações do arquivo de experiência estão erradas

**Causa:** o código foi alterado sem atualizar a experiência ou a experiência nunca foi precisa

**Solução:**
1. Execute a validação: __NOTRASLATE_40__
2. Corrija manualmente itens imprecisostenta
3. Configure o processo para detectar isso mais cedo
4. Execute o autoaperfeiçoamento após a próxima sessão de trabalho

## Pesquisa e leitura adicional

Este sistema é baseado no **padrão Agent Expert** de:

- **Fonte:** Curso de Codificação Agente Tática do IndyDevDan
- **Lição:** 13 - Agentes especialistas: finalmente, agentes que realmente aprendem
- **Conceito:** Agentes que mantêm bases de conhecimento externas para acelerar a execução de tarefas

O padrão reconhece que:
1. Agentes explorando tudo em cada sessão é ineficiente
2. O conhecimento persistente (arquivos de experiência) acelera drasticamente o trabalho
3. Sistemas de autoaperfeiçoamento aprendem e melhoram com o tempo
4. Domínios focados criam aprendizagem sustentável

Consulte a documentação da pesquisa para teoria detalhada e padrões de implementação.

## Resumo

O Agent Expertise System permite o autoaperfeiçoamento dos agentes por meio de:

1. **Arquivos de Especialização** - Modelos mentais de cada domínio
2. **Fluxo de trabalho em três etapas** - Planejar → Construir → Autoaperfeiçoar
3. **Aprendizado Automático** – Atualizações de conhecimento à medida que os agentes trabalham
4. **Validação e Métricas** - Ferramentas para garantir a qualidade
5. **Domínios Focados** - Conhecimento especializado para cada área

Esse sistema de aprendizagem em circuito fechado torna os agentes mais rápidos, precisos e cada vez mais valiosos à medida que acumulam conhecimento do domínio ao longo do tempo.