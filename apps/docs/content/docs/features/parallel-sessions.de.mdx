---
title: Parallele Sitzungen
description: Arbeiten Sie gleichzeitig an mehreren Funktionen mit isolierten Git-Arbeitsbäumen und Sitzungsgrenzenschutz.
---
# Parallele Sitzungen

Mit parallelen Sitzungen können Sie gleichzeitig an mehreren Funktionen, Fehlern oder Experimenten arbeiten, ohne den Kontext zu wechseln. Jede Sitzung verfügt über ein eigenes isoliertes Verzeichnis, einen eigenen Git-Zweig und einen Grenzschutz, um versehentliche sitzungsübergreifende Änderungen zu verhindern.

## Übersicht

Wenn Sie an komplexen Projekten arbeiten, müssen Sie häufig Folgendes tun:
- Beheben Sie einen Fehler, während eine Funktion ausgeführt wird
- Experimentieren Sie, ohne Ihre Hauptarbeit zu beeinträchtigen
- Überprüfen Sie den Code in einem Zweig, während Sie in einem anderen entwickeln

Parallele Sitzungen lösen dieses Problem, indem sie mithilfe von Git-Arbeitsbäumen isolierte Arbeitsbereiche erstellen, die jeweils von AgileFlow mit automatischem Grenzschutz verfolgt werden.

<Bild>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-overview.dark.svg" />
  <img alt="Parallel Sessions Overview" src="/images/docs/features/parallel-sessions-overview.light.svg" />
</Bild>

## Hauptmerkmale

| Funktion | Beschreibung |
|---------|-------------|
| **Git Worktrees** | Jede Sitzung ist ein separates Verzeichnismit eigener Filiale |
| **Grenzschutz** | Edit/Write-Hooks verhindern versehentliche sitzungsübergreifende Bearbeitungen |
| **Sitzungsverfolgung** | AgileFlow verfolgt alle Sitzungen mit Status, Storys und Aktivität |
| **Einfacher Wechsel** | Wechseln Sie die Sitzung mit `/add-dir` – bleibt im selben Terminal |
| **Unabhängiger Kontext** | Jede Sitzung behält ihre eigene Geschichte und ihren eigenen Fortschritt |

## Wie es funktioniert

### Architektur

<Bild>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-arch.dark.svg" />
  <img alt="Parallel Sessions Architecture" src="/images/docs/features/parallel-sessions-arch.light.svg" />
</Bild>

### Sitzungsstatusverwaltung

Sitzungen werden in zwei Dateien verfolgt:

**Registrierung** (`.agileflow/sessions/registry.json`):
```json
{
  "sessions": [
    {
      "id": "1",
      "path": "/home/user/project",
      "branch": "main",
      "is_main": true,
      "nickname": null
    },
    {
      "id": "2",
      "path": "/home/user/project-bugfix",
      "branch": "session-2-bugfix",
      "is_main": false,
      "nickname": "bugfix"
    }
  ]
}
```

**Aktive Sitzung** (`docs/09-agents/session-state.json`):
```json
{
  "active_session": {
    "id": "2",
    "nickname": "bugfix",
    "path": "/home/user/project-bugfix",
    "branch": "session-2-bugfix",
    "switched_at": "2025-01-12T10:30:00Z"
  }
}
```

### Grenzschutz

Der Sitzungsgrenzen-Hook wird bei jedem Bearbeitungs- und Schreibvorgang ausgeführt:

<Bild>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-boundary.dark.svg" />
  <img alt="Session Boundary Protection Flow" src="/images/docs/features/parallel-sessions-boundary.light.svg" />
</Bild>

**Schutzlogik:**
```javascript
// File is allowed if:
// 1. No active session is set (normal behavior)
// 2. File path starts with active session path

const isAllowed =
  !activeSession ||
  filePath.startsWith(activeSession.path + '/') ||
  filePath === activeSession.path;
```

## Befehle

### Neue Sitzung erstellen

```
/agileflow:session:new
```

Erstellt eine neue parallele Sitzung mit folgenden Optionen:
- **Automatisch erstellen**: Generiert `../project-{id}` mit Zweig `session-{id}`
- **Benannt**: Erstellt `../project-{name}` mit benutzerdefiniertem Spitznamen
- **Vorhandener Zweig**: Verwendet einen vorhandenen Git-Zweig

**Ausgabe:**
```
Created Session 2 "bugfix"

┌───────────┬────────────────────────────────────────────┐
│ Session   │ 2 "bugfix"                                 │
│ Workspace │ ../project-bugfix                          │
│ Branch    │ session-2-bugfix                           │
└───────────┴────────────────────────────────────────────┘

To switch to this session, run:

  /add-dir ../project-bugfix
```

### Sitzungen wechseln

```
/agileflow:session:resume
```

Listet alle Sitzungen auf und stellt den Befehl zum Wechseln bereit:

```
Which session would you like to resume?

○ Session 1: main (current)
  US-0042: User Auth API │ Active now │ /home/user/project

○ Session 2: "bugfix"
  US-0038: Fix Login │ Active now │ ../project-bugfix

○ Create new session
  Start a fresh parallel workspace
```

Nach der Auswahl:
```
To switch to Session 2 "bugfix":

  /add-dir ../project-bugfix
```

### Sitzungsstatus anzeigen

```
/agileflow:session:status
```

Zeigt aktuelle Sitzungsinformationen und alle registrierten Sitzungen an.

### Sitzung beenden

```
/agileflow:session:end
```

Beendet die aktuelle Sitzung und optional:
- Führt Änderungen zurück zum Hauptmenü zusammen
- Löscht den Arbeitsbaum
- Bereinigt die Filiale

## Workflow-Beispiel

### Starten einer FehlerbehebungDie Feature-Arbeit ist im Gange

```
# You're working on Session 1 (main) with US-0042: User Auth API

User: I need to quickly fix a login bug, but don't want to lose my current work

Claude: I'll create a new session for the bug fix.

> /agileflow:session:new

Created Session 2 "bugfix"
To switch: /add-dir ../project-bugfix

User: /add-dir ../project-bugfix

# Now working in Session 2
# Claude can only edit files in ../project-bugfix
# Any attempt to edit files in the main project is BLOCKED

User: Fix the login validation bug

Claude: [Fixes bug in ../project-bugfix/src/auth/login.ts]

User: Done, let's go back to main work

> /agileflow:session:resume
> Select: Session 1: main

To switch: /add-dir /home/user/project

User: /add-dir /home/user/project

# Back in Session 1, boundary protection now blocks edits to ../project-bugfix
```

## Konfiguration

### Aktivieren des Sitzungsgrenzenschutzes

Sitzungsgrenzen-Hooks werden automatisch konfiguriert, wenn Sie parallele Sitzungen verwenden. Sie werden zu `.claude/settings.json` hinzugefügt:

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node .agileflow/scripts/session-boundary.js"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "node .agileflow/scripts/session-boundary.js"
          }
        ]
      }
    ]
  }
}
```

### Grenzschutz deaktivieren

Um ohne Einschränkungen sitzungsübergreifend zu arbeiten:

```bash
node .agileflow/scripts/session-manager.js clear-active
```

Dadurch wird die aktive Sitzung gelöscht, sodass Änderungen an jedem Verzeichnis möglich sind.

## Session Manager-CLI

Das Sitzungsmanager-Skript bietet direkte Kontrolle:

```bash
# List all sessions
node .agileflow/scripts/session-manager.js list --json

# Get current session status
node .agileflow/scripts/session-manager.js status

# Switch active session (for boundary protection)
node .agileflow/scripts/session-manager.js switch 2

# Get currently active session
node .agileflow/scripts/session-manager.js active

# Clear active session (disable boundaries)
node .agileflow/scripts/session-manager.js clear-active

# Create new session
node .agileflow/scripts/session-manager.js create --nickname "feature"

# Delete session
node .agileflow/scripts/session-manager.js delete 2 --remove-worktree
```

## Best Practices

### Do's

- **Verwenden Sie beschreibende Spitznamen**: `bugfix`, `auth`, `experiment` sind klarer als `session-2`
- **Sitzungen explizit wechseln**: Verwenden Sie zum Wechseln immer `/agileflow:session:resume`
- **Vor dem Wechsel bestätigen**: Stellen Sie sicher, dass die Arbeit gespeichert wird, bevor Sie die Sitzung ändern
- **Sitzungen nach Abschluss beenden**: Arbeitsbäume bereinigen, um Speicherplatz zu sparen

### Don'ts

- **Nicht manuell cd**: Verwenden Sie `/add-dir`, um in der gleichen Claude-Konversation zu bleiben
- **DDeaktivieren Sie Grenzen nicht einfach so**: Sie verhindern eine versehentliche Kreuzkontamination
- **Erstellen Sie nicht zu viele Sitzungen**: Halten Sie es überschaubar (maximal 3–5 empfohlen)

## Fehlerbehebung

### Fehler „Bearbeiten blockiert“.

**Ursache**: Sie versuchen, eine Datei außerhalb der aktiven Sitzung zu bearbeiten.

**Lösung**:
```
/agileflow:session:resume
```
Wählen Sie die richtige Sitzung aus und führen Sie dann den angezeigten Befehl `/add-dir` aus.

### Sitzung nicht gefunden

**Ursache**: Das Arbeitsbaumverzeichnis wurde gelöscht oder verschoben.

**Lösung**:
```bash
# Check if directory exists
ls ../project-{name}

# If missing, unregister the session
node .agileflow/scripts/session-manager.js delete {id}
```

### Git Worktree-Konflikte

**Ursache**: Der Zweig wurde bereits in einem anderen Arbeitsbaum ausgecheckt.

**Lösung**:
```bash
# List worktrees
git worktree list

# Remove stale worktree
git worktree remove ../project-{name}
```

## Verwandte Funktionen

- [Schadenskontrolle](/docs/features/damage-control) - Zusätzlicher Dateischutz
– [Compact Context](/docs/features/compact-context) – Kontexterhaltung über Sitzungen hinweg
- [Agent Expertise](/docs/features/agent-expertise-system) – Spezialisierte Agenten für Sitzungen