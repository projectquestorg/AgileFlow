---
title: Parallele Sitzungen
description: Arbeiten Sie gleichzeitig an mehreren Funktionen mit isolierten Git-Arbeitsbäumen und Sitzungsgrenzenschutz.
---

# Parallele Sitzungen

Mit parallelen Sitzungen können Sie gleichzeitig an mehreren Funktionen, Fehlern oder Experimenten arbeiten, ohne den Kontext zu wechseln. Jede Sitzung verfügt über ein eigenes isoliertes Verzeichnis, einen eigenen Git-Zweig und einen Grenzschutz, um versehentliche sitzungsübergreifende Änderungen zu verhindern.

## Überblick

Wenn Sie an komplexen Projekten arbeiten, müssen Sie häufig Folgendes tun:
- Beheben Sie einen Fehler, während eine Funktion ausgeführt wird
- Experimentieren Sie, ohne Ihre Hauptarbeit zu beeinträchtigen
- Überprüfen Sie den Code in einem Zweig, während Sie in einem anderen entwickeln

Parallele Sitzungen lösen dieses Problem, indem sie isolierte Arbeitsbereiche erstellen **git worktrees**, jeweils von AgileFlow mit automatischem Grenzschutz verfolgt.

<picture>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-overview.dark.svg" />
  <img alt="Parallel Sessions Overview" src="/images/docs/features/parallel-sessions-overview.light.svg" />
</picture>

## Hauptmerkmale

| Feature | Description |
|---------|-------------|
| **Git Worktrees** | Each session is a separate directory with its own branch |
| **Boundary Protection** | Edit/Write hooks prevent accidental cross-session edits |
| **Session Tracking** | AgileFlow tracks all sessions with status, stories, and activity |
| **Easy Switching** | Switch sessions with `/add-dir` - stays in same terminal |
| **Independent Context** | Each session maintains its own story and progress |

## Wie es funktioniert

### Architektur

<picture>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-arch.dark.svg" />
  <img alt="Parallel Sessions Architecture" src="/images/docs/features/parallel-sessions-arch.light.svg" />
</picture>

### Sitzungsstatusverwaltung

Sitzungen werden in zwei Dateien verfolgt:

**Registry** (`.agileflow/sessions/registry.json`):
```json
{
  "sessions": [
    {
      "id": "1",
      "path": "/home/user/project",
      "branch": "main",
      "is_main": true,
      "nickname": null
    },
    {
      "id": "2",
      "path": "/home/user/project-bugfix",
      "branch": "session-2-bugfix",
      "is_main": false,
      "nickname": "bugfix"
    }
  ]
}
```

**Active Session** (`docs/09-agents/session-state.json`):
```json
{
  "active_session": {
    "id": "2",
    "nickname": "bugfix",
    "path": "/home/user/project-bugfix",
    "branch": "session-2-bugfix",
    "switched_at": "2025-01-12T10:30:00Z"
  }
}
```

### Grenzschutz

Der Sitzungsgrenzen-Hook wird bei jedem Bearbeitungs- und Schreibvorgang ausgeführt:

<picture>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-boundary.dark.svg" />
  <img alt="Session Boundary Protection Flow" src="/images/docs/features/parallel-sessions-boundary.light.svg" />
</picture>

**Protection Logic:**
```javascript
// File is allowed if:
// 1. No active session is set (normal behavior)
// 2. File path starts with active session path

const isAllowed =
  !activeSession ||
  filePath.startsWith(activeSession.path + '/') ||
  filePath === activeSession.path;
```

## Befehle

### Neue Sitzung erstellen

```
/agileflow:session:new
```

Erstellt eine neue parallele Sitzung mit folgenden Optionen:
- **Auto-create**: Erzeugt `../project-{id}` mit Zweig `session-{id}`
- **Named**: Erstellt `../project-{name}` mit benutzerdefiniertem Spitznamen
- **Existing branch**: Verwendet einen vorhandenen Git-Zweig

**Output:**
```
Created Session 2 "bugfix"

┌───────────┬────────────────────────────────────────────┐
│ Session   │ 2 "bugfix"                                 │
│ Workspace │ ../project-bugfix                          │
│ Branch    │ session-2-bugfix                           │
└───────────┴────────────────────────────────────────────┘

To switch to this session, run:

  /add-dir ../project-bugfix
```

### Wechseln Sie die Sitzungen

```
/agileflow:session:resume
```

Listet alle Sitzungen auf und stellt den Befehl zum Wechseln bereit:

```
Which session would you like to resume?

○ Session 1: main (current)
  US-0042: User Auth API │ Active now │ /home/user/project

○ Session 2: "bugfix"
  US-0038: Fix Login │ Active now │ ../project-bugfix

○ Create new session
  Start a fresh parallel workspace
```

Nach der Auswahl:
```
To switch to Session 2 "bugfix":

  /add-dir ../project-bugfix
```

### Sitzungsstatus anzeigen

```
/agileflow:session:status
```

Zeigt aktuelle Sitzungsinformationen und alle registrierten Sitzungen an.

### Sitzung beenden

```
/agileflow:session:end
```

Beendet die aktuelle Sitzung und optional:
- Führt Änderungen zurück zur Hauptdatei zusammen
- Löscht den Arbeitsbaum
- Bereinigt den Zweig

## Workflow-Beispiel

### Starten einer Fehlerbehebung, während die Feature-Arbeit im Gange ist

```
# You're working on Session 1 (main) with US-0042: User Auth API

User: I need to quickly fix a login bug, but don't want to lose my current work

Claude: I'll create a new session for the bug fix.

> /agileflow:session:new

Created Session 2 "bugfix"
To switch: /add-dir ../project-bugfix

User: /add-dir ../project-bugfix

# Now working in Session 2
# Claude can only edit files in ../project-bugfix
# Any attempt to edit files in the main project is BLOCKED

User: Fix the login validation bug

Claude: [Fixes bug in ../project-bugfix/src/auth/login.ts]

User: Done, let's go back to main work

> /agileflow:session:resume
> Select: Session 1: main

To switch: /add-dir /home/user/project

User: /add-dir /home/user/project

# Back in Session 1, boundary protection now blocks edits to ../project-bugfix
```

## Konfiguration

### Aktivieren des Sitzungsgrenzenschutzes

Sitzungsgrenzen-Hooks werden automatisch konfiguriert, wenn Sie parallele Sitzungen verwenden. Sie werden ergänzt `.claude/settings.json`:

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node .agileflow/scripts/session-boundary.js"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "node .agileflow/scripts/session-boundary.js"
          }
        ]
      }
    ]
  }
}
```

### Grenzschutz deaktivieren

Um ohne Einschränkungen sitzungsübergreifend zu arbeiten:

```bash
node .agileflow/scripts/session-manager.js clear-active
```

Dadurch wird die aktive Sitzung gelöscht, sodass Änderungen an jedem Verzeichnis möglich sind.

## Sitzungsmanager-CLI

Das Sitzungsmanager-Skript bietet direkte Kontrolle:

```bash
# List all sessions
node .agileflow/scripts/session-manager.js list --json

# Get current session status
node .agileflow/scripts/session-manager.js status

# Switch active session (for boundary protection)
node .agileflow/scripts/session-manager.js switch 2

# Get currently active session
node .agileflow/scripts/session-manager.js active

# Clear active session (disable boundaries)
node .agileflow/scripts/session-manager.js clear-active

# Create new session
node .agileflow/scripts/session-manager.js create --nickname "feature"

# Delete session
node .agileflow/scripts/session-manager.js delete 2 --remove-worktree
```

## Best Practices

### DOS

- **Use descriptive nicknames**: `bugfix`, `auth`, `experiment` sind klarer als `session-2`
- **Switch sessions explicitly**: Immer verwenden `/agileflow:session:resume` wechseln
- **Commit before switching**: Stellen Sie sicher, dass die Arbeit gespeichert wird, bevor Sie die Sitzung ändern
- **End sessions when done**: Arbeitsbäume bereinigen, um Speicherplatz zu sparen

### Verbote

- **Don't manually cd**: Verwenden `/add-dir` um im selben Claude-Gespräch zu bleiben
- **Don't disable boundaries casually**: Sie verhindern eine versehentliche Kreuzkontamination
- **Don't create too many sessions**: Halten Sie es überschaubar (maximal 3–5 empfohlen)

## Troubleshooting

### Fehler „Bearbeiten blockiert“.

**Cause**: Sie versuchen, eine Datei außerhalb der aktiven Sitzung zu bearbeiten.

**Solution**:
```
/agileflow:session:resume
```
Wählen Sie die richtige Sitzung aus und führen Sie dann die aus `/add-dir` Befehl angezeigt.

### Sitzung nicht gefunden

**Cause**: Das Arbeitsbaumverzeichnis wurde gelöscht oder verschoben.

**Solution**:
```bash
# Check if directory exists
ls ../project-{name}

# If missing, unregister the session
node .agileflow/scripts/session-manager.js delete {id}
```

### Git Worktree-Konflikte

**Cause**: Zweig bereits in einem anderen Arbeitsbaum ausgecheckt.

**Solution**:
```bash
# List worktrees
git worktree list

# Remove stale worktree
git worktree remove ../project-{name}
```

## Verwandte Funktionen

- [Schadensbegrenzung](/docs/features/damage-control) - Zusätzlicher Dateischutz
- [Kompakter Kontext](/docs/features/compact-context) - Kontexterhaltung über Sitzungen hinweg
- [Agentenkompetenz](/docs/features/agent-expertise-system) - Spezialisierte Agenten für Sitzungen
