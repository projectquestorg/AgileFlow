---
title: Sessões Paralelas
description: Trabalhe em vários recursos simultaneamente com árvores de trabalho git isoladas e proteção de limite de sessão.
---
# Sessões Paralelas

As sessões paralelas permitem que você trabalhe em vários recursos, bugs ou experimentos simultaneamente, sem mudança de contexto. Cada sessão tem seu próprio diretório isolado, ramificação git e proteção de limite para evitar edições acidentais entre sessões.

## Visão geral

Ao trabalhar em projetos complexos, muitas vezes você precisa:
- Corrija um bug enquanto um recurso está em andamento
- Experimente sem afetar seu trabalho principal
- Revise o código em um branch enquanto desenvolve em outro

As sessões paralelas resolvem isso criando espaços de trabalho isolados usando **árvores de trabalho git**, cada uma rastreada pelo AgileFlow com proteção automática de limites.

<imagem>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-overview.dark.svg" />
  <img alt="Visão geral das sessões paralelas" src="/images/docs/features/parallel-sessions-overview.light.svg" />
</imagem>

## Principais recursos

| Recurso | Descrição |
|--------|-------------|
| **Árvores de trabalho Git** | Cada sessão é um diretório separadocom filial própria |
| **Proteção de limite** | Ganchos de edição/gravação evitam edições acidentais entre sessões |
| **Acompanhamento de Sessão** | AgileFlow rastreia todas as sessões com status, histórias e atividades |
| **Troca fácil** | Alternar sessões com __NOTRASLATE_17__ - permanece no mesmo terminal |
| **Contexto Independente** | Cada sessão mantém sua própria história e progresso |

## Como funciona

### Arquitetura

<imagem>
  <source media="(prefers-color-scheme: dark)" srcset="/images/docs/features/parallel-sessions-arch.dark.svg" />
  <img alt="Arquitetura de sessões paralelas" src="/images/docs/features/parallel-sessions-arch.light.svg" />
</imagem>

### Gerenciamento de estado de sessão

As sessões são rastreadas em dois arquivos:

**Registro** (`.agileflow/sessions/registry.json`):
```json
{
  "sessions": [
    {
      "id": "1",
      "path": "/home/user/project",
      "branch": "main",
      "is_main": true,
      "nickname": null
    },
    {
      "id": "2",
      "path": "/home/user/project-bugfix",
      "branch": "session-2-bugfix",
      "is_main": false,
      "nickname": "bugfix"
    }
  ]
}
```

**Sessão ativa** (__NOTRASLATE_19__):
```json
{
  "active_session": {
    "id": "2",
    "nickname": "bugfix",
    "path": "/home/user/project-bugfix",
    "branch": "session-2-bugfix",
    "switched_at": "2025-01-12T10:30:00Z"
  }
}
```

### Proteção de limite

O gancho de limite de sessão é executado em todas as operações de edição e gravação:

<imagem>
  <source media="(prefere esquema de cores: escuro)" srcset="/images/docs/features/sessões paralelas-boundary.dark.svg" />
  <img alt="Fluxo de proteção de limite de sessão" src="/images/docs/features/parallel-sessions-boundary.light.svg" />
</imagem>

**Lógica de Proteção:**
```javascript
// File is allowed if:
// 1. No active session is set (normal behavior)
// 2. File path starts with active session path

const isAllowed =
  !activeSession ||
  filePath.startsWith(activeSession.path + '/') ||
  filePath === activeSession.path;
```

## Comandos

### Criar nova sessão

__NOTRADUZIR_3__

Cria uma nova sessão paralela com opções:
- **Criação automática**: gera `../project-{id}` com branch `session-{id}`
- **Nomeado**: Cria __NOTRASLATE_22__ com apelido personalizado
- **Branch existente**: usa um branch git existente

**Saída:**
__NÃOTRADUZIR_4__

### Alternar sessões

__NOTRADUZIR_5__

Lista todas as sessões e fornece o comando para alternar:

__NOTRADUZIR_6__

Após a seleção:
__NÃOTRADUZIR_7__

### Ver status da sessão

__NÃOTRADUZIR_8__

Mostra informações da sessão atual e todas as sessões registradas.

### Finalizar sessão

__NOTRADUZIR_9__

Encerra a sessão atual e opcionalmente:
- Mescla as alterações de volta ao principal
- Exclui a árvore de trabalho
- Limpa o galho

## Exemplo de fluxo de trabalho

### Iniciando uma correção de bug enquantoO trabalho do recurso está em andamento

__NOTRADUZIR_10__

## Configuração

### Habilitando proteção de limite de sessão

Os ganchos de limite de sessão são configurados automaticamente quando você usa sessões paralelas. Eles são adicionados a __NOTRASLATE_23__:

__NOTRADUZIR_11__

### Desativando proteção de limite

Para trabalhar em sessões sem restrições:

```bash
node .agileflow/scripts/session-manager.js clear-active
```

Isso limpa a sessão ativa, permitindo edições em qualquer diretório.

## CLI do gerenciador de sessão

O script do gerenciador de sessão fornece controle direto:

__NÃOTRADUZIR_13__

## Melhores práticas

### O que fazer

- **Use apelidos descritivos**: `bugfix`, `auth`, `experiment` são mais claros que `session-2`
- **Alternar sessões explicitamente**: sempre use __NOTRASLATE_28__ para alternar
- **Confirmar antes de mudar**: certifique-se de que o trabalho seja salvo antes de mudar de sessão
- **Terminar sessões quando terminar**: Limpe as árvores de trabalho para economizar espaço em disco

### O que não fazer

- **Não faça cd manualmente**: Use __NOTRASLATE_29__ para permanecer na mesma conversa de Claude
- ** Don't disable boundaries casually**: They prevent accidental cross-contamination
- **Don't create too many sessions**: Keep it manageable (3-5 max recommended)

## Troubleshooting

### "Edit blocked" Error

**Cause**: You're trying to edit a file outside the active session.

**Solution**:
```
/agileflow:session:resume
```
Select the correct session, then run the `/add-dir` command shown.

### Session Not Found

**Cause**: The worktree directory was deleted or moved.

**Solution**:
```bash
# Check if directory exists
ls ../project-{name}

# If missing, unregister the session
node .agileflow/scripts/session-manager.js delete {id}
```

### Git Worktree Conflicts

**Cause**: Branch already checked out in another worktree.

**Solution**:
```bash
# List worktrees
git worktree list

# Remove stale worktree
git worktree remove ../project-{name}
```

## Related Features

- [Damage Control](/docs/features/damage-control) - Additional file protection
- [Compact Context](/docs/features/compact-context) - Context preservation across sessions
- [Agent Expertise](/docs/features/agent-expertise-system) - Specialized agents for sessions
