---
title: Konfiguration
description: Vollst√§ndiger Leitfaden zum Konfigurationssystem von AgileFlow ‚Äì 9 Agenten zum Anpassen Ihres Entwicklungsworkflows
---
# Konfigurationssystem

Das Konfigurationssystem von AgileFlow bietet 9 spezialisierte Agenten, die jeden Aspekt Ihres Entwicklungsworkflows einrichten, anpassen und √ºberpr√ºfen. Greifen Sie √ºber `/agileflow:configure` darauf zu.

## Schnellstart

```bash
# Interactive wizard - guides you through all options
/agileflow:configure

# Detect current configuration
/agileflow:configure --detect

# Enable specific features
/agileflow:configure --enable=damage-control,status-line,archival

# Upgrade to latest versions
/agileflow:configure --upgrade
```

## Die 9 Konfigurationsagenten

| Agent | Zweck | Hauptmerkmal |
|-------|---------|-------------|
| **git-config** | Git und Remote-Repos initialisieren | SSH/HTTPS-Unterst√ºtzung |
| **Haken** | Event-driven automation | SessionStart, PreCompact, Stop |
| **vorverdichten** | Kontexterhaltung | √úberlebt Konversationskomprimierung |
| **Statuszeile** | Benutzerdefinierte Statusleiste | Story, WIP, Kontextanzeige |
| **Archiv** | Status.json automatisch verwalten | Schwellenwertbasierte Bereinigung |
| **Namensnennung** | Git-Commit-Richtlinie | Kontrollieren Sie die Offenlegung von KI |
| **ci** | CI/CD-Workflows | GitHub-Aktionen, GitLab, CircleCI |
| **Schadensbegrenzung** | Zerst√∂rerischer Befehlsschutz | Musterbasiertes Blockieren |
| **√ºberpr√ºfen** | Testkonfigurationen | Token-Verwaltung |

## Recommended Setup Order

```
Phase 1: Foundation (10-15 min)
‚îú‚îÄ 1. git-config      ‚Üí Enable version control
‚îú‚îÄ 2. hooks           ‚Üí Enable automation
‚îî‚îÄ 3. attribution     ‚Üí Establish commit policy

Phase 2: Safety (5-10 min)
‚îú‚îÄ 4. damage-control  ‚Üí Protect codebase
‚îî‚îÄ 5. verify          ‚Üí Validate setup

Phase 3: Productivity (15-20 min)
‚îú‚îÄ 6. archival        ‚Üí Manage status.json size
‚îú‚îÄ 7. status-line     ‚Üí Real-time visibility
‚îú‚îÄ 8. ci              ‚Üí Automated testing
‚îî‚îÄ 9. precompact      ‚Üí Long conversation support
```

---

## Agentendetails

### 1. Git-Konfiguration

**Zweck:** Git-Repository initialisieren und mit Remote verbinden (GitHub, GitLab usw.)

**Was es tut:**
‚Äì Initialisiert bei Bedarf das Git-Repository
- Konfiguriert Remote-URL (SSH oder HTTPS)
- √úberpr√ºft die Remote-Verbindung
- Speichert die Konfiguration in Metadaten

**Optionen:**
```
Initialize git:      Yes / No
Remote protocol:     SSH / HTTPS
Private repo:        Yes / No (for auth)
Verify connection:   Yes / No
```

**Dateien ge√§ndert:**
‚Äì `.git/` ‚Äì Git-Repository
‚Äì `docs/00-meta/agileflow-metadata.json` ‚Äì Git-Konfiguration gespeichert
- `.claude/settings.local.json` - Token (falls erforderlich)

---

### 2. Hakensystem

**Zweck:** Erm√∂glichen Sie ereignisgesteuerte Automatisierung durch die Hooks von Claude Code

**Verf√ºgbare Haken:**
- **SessionStart** ‚Äì Willkommensinfo, wenn Claude Code startet
- **PreCompact** ‚Äì Kontext vor der Komprimierung beibehalten
- **Stop** ‚Äì Sitzungszusammenfassung, wenn Claude aufh√∂rt
- **UserPromptSubmit** ‚Äì Aktivit√§tsprotokollierung

**Optionen:**
```
SessionStart:        Enable / Disable
PreCompact:          Enable / Disable
Stop:                Enable / Disable
UserPromptSubmit:    Enable / Disable
```

**Erstellte Dateien:**
‚Äì `.claude/settings.json` ‚Äì Hook-Konfiguration
‚Äì `scripts/agileflow-welcome.js` ‚Äì SessionStart-Skript
‚Äì `scripts/precompact-context.sh` ‚Äì PreCompact-Skript
- `scripts/agileflow-stop.sh` ‚Äì Hook-Skript stoppen

**Wichtig:** Erfordert einen Neustart von Claude Code, damit Hooks wirksam werden.

---

### 3. PreCompact-Konfiguration

**Zweck:** Bewahren Sie den kritischen Projektkontext, wenn Claude Code Konversationen komprimiert

**Vorteile:**
- Projektkonventionen √ºberleben die Komprimierung
- Aktive Befehlsregeln bleiben erhalten
- Aktueller Story- und WIP-Status beibehalten
- Teamkonventionen gehen nicht verloren

**Beispielausgabe w√§hrend der Komprimierung:**
```
Project: MyProject v2.40.0 | Branch: main

Active Stories:
- US-0042 (in-progress): Login API
- US-0043 (blocked): Payment Integration

WIP Count: 2/3
Context Preservation: ENABLED
```

**Erfordert:** Hooks-System zuerst konfiguriert

---

### 4. Statuszeilenkonfiguration

**Zweck:** Konfigurieren Sie eine benutzerdefinierte Statusleiste in Claude Code

**Verf√ºgbare Komponenten:**
- Aktuelle Story-ID und Titel
- Epischer Fortschritt (X/Y-Geschichten)
- WIP-Anzahl vs. WIP-Limit
- Prozentsatz der Kontextnutzung
- Sitzungskosten in USD
‚Äì Name des Git-Zweigs

**Beispielstatuszeilen:**
```
[Opus] US-0042: Login API | WIP 2/3 | 45% ctx | main
agileflow v2.40.0 | US-0003 | main
```

**Optionen:**
```
Display components:  story, epic, wip, context, cost, git (multiselect)
Show git branch:     Yes / No
```

**Wichtig:** Erfordert einen Neustart von Claude Code.

---

### 5. Archivkonfiguration

**Zweck:** Dateigr√∂√üe von status.json automatisch verwalten

**Warum es wichtig ist:**
‚Äì status.json kann das Token-Limit von 25.000 √ºberschreiten
- Wenn es zu gro√ü ist, k√∂nnen Agenten es nicht lesen
- Die automatische Archivierung verhindert dies stillschweigend

**Grenzwertoptionen:**
- **30 Tage** (empfohlen) - Ausgewogenheit zwischen Kontext und Geschichte
- **14 Tage** ‚Äì Schnelllebige Projekte
- **7 Tage** ‚Äì Gro√üe Teams mit vielen Geschichten
‚Äì **3 Tage** ‚Äì Sehr aggressiv, minimale status.json

**Archivstruktur:**
```
docs/09-agents/
‚îú‚îÄ‚îÄ status.json           # Active work
‚îú‚îÄ‚îÄ status-archive.json   # Historical
‚îî‚îÄ‚îÄ archive/
    ‚îú‚îÄ‚îÄ 2025-01.json      # Monthly archives
    ‚îî‚îÄ‚îÄ 2025-02.json
```

**Manuelle Befehle:**
```bash
# Archive with default threshold
bash scripts/archive-completed-stories.sh

# Archive with custom threshold (days)
bash scripts/archive-completed-stories.sh 7

# Compress status.json (removes verbose fields)
bash scripts/compress-status.sh
```

---

### 6. Attributionskonfiguration

**Zweck:** Konfigurieren Sie Git-Commit-Attributionseinstellungen

**Optionen:**
- **Keine Namensnennung** (empfohlen): Saubere Commits ohne KI-Erw√§hnungen
- **Namensnennung beibehalten** (Standard): Claude-Code-Fu√üzeile einschlie√üen

**Beispiel CLAUDE.md mit deaktivierter Namensnennung:**
```markdown
## CRITICAL: NO AI Attribution in Git Commits

‚ùå FORBIDDEN:
- ü§ñ Generated with Claude Code
- Co-Authored-By: Claude

‚úÖ REQUIRED:
- Clean, professional commit messages
- Conventional commit format
```

---

### 7. CI/CD-Konfiguration

**Zweck:** Kontinuierliche Integrationsworkflows einrichten

**Unterst√ºtzte Anbieter:**
- GitHub-Aktionen (`.github/workflows/ci.yml`)
- GitLab CI (`.gitlab-ci.yml`)
- CircleCI (`.circleci/config.yml`)

**Konfigurierbare Befehle:**
- Installieren Sie abh√§ngigSt√§dte
- F√ºhren Sie Tests durch
- Linter laufen lassen
- F√ºhren Sie die Typpr√ºfung aus
- Projekt erstellen

**Optionen:**
```
CI provider:         GitHub Actions / GitLab CI / CircleCI
Commands to run:     install, test, lint, type-check, build (multiselect)
Test locally:        Yes / No
Trigger remote CI:   Yes / No
```

---

### 8. Konfiguration der Schadensbegrenzung

**Zweck:** Sch√ºtzen Sie Ihre Codebasis vor destruktiven Befehlen

Die vollst√§ndige Dokumentation finden Sie unter [Schadenskontrolle](/docs/features/damage-control).

**Schutzstufen:**
- **Standard** ‚Äì Schneller Mustervergleich, √ºber 40 Muster
- **Erweitert** ‚Äì Standard + KI-Bewertung
- **Minimal** ‚Äì Nur Pfadschutz

**Optionen:**
```
Protection level:    Standard / Enhanced / Minimal
Custom protections:  Prod DB / Cloud CLI / Env files (multiselect)
```

---

### 9. Verifizierungsagent

**Zweck:** Testen und validieren Sie, dass Konfigurationen ordnungsgem√§√ü funktionieren

**Was es best√§tigt:**
- JSON-Dateisyntax (Einstellungen, Metadaten)
- Hook-Skriptausf√ºhrung
- YAML-Workflow-Syntax
- CI-Befehle (lokale Tests)
- Remote-Verbindungen

**Token-Verwaltung:**
‚Äì Speichert Token in `.claude/settings.local.json` (gitignored)
- Unterst√ºtzt GitHub-, GitLab- und CircleCI-Token
- Gibt niemals Token an die Konsole zur√ºck

---

## Dateiorganisation

```
project/
‚îú‚îÄ‚îÄ .github/workflows/ci.yml          # GitHub Actions
‚îú‚îÄ‚îÄ .claude/
‚îÇ   ‚îú‚îÄ‚îÄ settings.json                 # Hooks & status line (committed)
‚îÇ   ‚îú‚îÄ‚îÄ settings.local.json           # User overrides (gitignored)
‚îÇ   ‚îî‚îÄ‚îÄ settings.local.example.json   # Template for team
‚îú‚îÄ‚îÄ .agileflow/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ damage-control-patterns.yaml
‚îÇ   ‚îî‚îÄ‚îÄ scripts/
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ agileflow-welcome.js
‚îÇ   ‚îú‚îÄ‚îÄ agileflow-statusline.sh
‚îÇ   ‚îî‚îÄ‚îÄ precompact-context.sh
‚îú‚îÄ‚îÄ CLAUDE.md                         # Project guidelines
‚îî‚îÄ‚îÄ docs/00-meta/
    ‚îî‚îÄ‚îÄ agileflow-metadata.json       # Configuration metadata
```

## Gitignore-Regeln

**Engagiert (Teamkonfiguration):**
- `.claude/settings.json`
- __NICHT √úBERSETZEN_31__
- `.github/workflows/`
- `CLAUDE.md`
- `scripts/`
- `.agileflow/`

**Gitignored (benutzerspezifisch):**
- `.claude/settings.local.json`
- `.claude/prompt-log.txt`
- `.claude/*.log`

## Token-Referenz

### GitHub-Token (ghp_xxx)
- **Standort:** `.claude/settings.local.json`
- **Ben√∂tigte Bereiche:** `repo`, `workflow`
- **Erstellen unter:** https://github.com/settings/tokens/new

### GitLab-Token (glpat_xxx)
- **Standort:** `.claude/settings.local.json`
- **Ben√∂tigte Bereiche:** `api`, `read_repository`, `write_repository`
- **Erstellen unter:** https://gitlab.com/-/profile/personal_access_tokens

### CircleCI-Token
- **Standort:** `.claude/settings.local.json`
- **Erstellen unter:** https://app.circleci.com/settings/user/tokens

## Fehlerbehebung

| Problem | Ursache | L√∂sung |
|---------|-------|----------|
| Konfiguration wird nicht wirksam | Claude Code nicht neu gestartet | Beenden (Befehl+Q) und neu starten |
| Token-Authentifizierung schl√§gt fehl | Abgelaufenes/ung√ºltiges Token | Beim Anbieter neu generieren |
| YAML-Syntaxfehler | Ung√ºltige Workflowdatei |Mit yamllint | validieren
| status.json zu gro√ü | √úberschreitet das Token-Limit | Archivierung aktivieren (3-7 Tage) |
| Hooks laufen nicht | Settings.json ung√ºltig | √úberpr√ºfen Sie JSON mit `jq` |
| Statuszeile fehlt | Skript nicht ausf√ºhrbar | `chmod +x scripts/*.sh` |

### Neustartanforderung

Diese Agenten erfordern einen **Claude Code-Neustart**:
- Haken
- vorverdichten
- Statuszeile
- Schadensbegrenzung

```bash
# Complete quit (not just closing window)
Cmd+Q (Mac) or Ctrl+Q (Windows/Linux)
# Wait 5 seconds, then reopen
```

### Rollback

```bash
# Restore from git
git checkout .claude/settings.json

# Remove problematic hook
jq 'del(.hooks.HookName)' .claude/settings.json > tmp.json && mv tmp.json .claude/settings.json

# Disable all hooks
jq 'del(.hooks)' .claude/settings.json > tmp.json && mv tmp.json .claude/settings.json
```

## H√§ufige Szenarien

### Neues Projekt-Setup
```bash
/agileflow:configure  # Select: Git Repository
/agileflow:configure  # Select: Hooks System
/agileflow:configure  # Select: Damage Control
/agileflow:configure  # Select: Verification
```

### CI/CD hinzuf√ºgen
```bash
/agileflow:configure  # Select: CI/CD Workflow
# Choose provider, commands, test locally
git add .github/workflows/ci.yml
git commit -m "ci: add GitHub Actions workflow"
```

### F√ºr gro√üe Projekte optimieren
```bash
/agileflow:configure  # Select: Archival (7-14 days)
/agileflow:configure  # Select: Status Line
/agileflow:configure  # Select: PreCompact
```